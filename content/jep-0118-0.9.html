<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<title>JEP-0118: User Tune</title>
<link rel="stylesheet" type="text/css" href="jep.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<meta name="DC.Title" content="User Tune">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Description" content="This JEP defines a protocol for communicating information about the music to which a user is listening.">
<meta name="DC.Publisher" content="Jabber Software Foundation">
<meta name="DC.Contributor" content="JEP Editor">
<meta name="DC.Date" content="2004-10-27">
<meta name="DC.Type" content="Jabber Enhancement Proposal">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="JEP-0118">
<meta name="DC.Language" content="en">
<meta name="DC.Rights" content="This Jabber Enhancement Proposal is copyright 1999 - 2004 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;http://www.jabber.org/jsf/ipr-policy.php&gt;. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at &lt;http://www.opencontent.org/openpub/&gt;).">
</head>
<body bgcolor="#FFFFFF">
<h1>JEP-0118: User Tune</h1>
<p>This JEP defines a protocol for communicating information about the music to which a user is listening.</p>
<p><hr></p>
<p style="color:red">NOTICE: This JEP is currently within Last Call or under consideration by the Jabber Council for advancement to the next stage in the JSF standards process. For further details, visit &lt;<a href="http://www.jabber.org/council/queue.php">http://www.jabber.org/council/queue.php</a>&gt;.</p>
<p><hr></p>
<h2>JEP Information</h2>
<p class="indent">
            Status: Proposed<br>
            Type: Standards Track<br>
            Number: 0118<br>
            Version: 0.9<br>
            Last Updated: 2004-10-27<br>
            JIG: Standards JIG<br>
                Approving Body: Jabber Council<br>Dependencies: XMPP Core, XMPP IM, JEP-0060<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: tune<br>
</p>
<h2>Author Information</h2>
<h3>Peter Saint-Andre</h3>
<p class="indent">
        Email: stpeter@jabber.org<br>
        JID: stpeter@jabber.org</p>
<h2>Legal Notice</h2>
<p class="indent">This Jabber Enhancement Proposal is copyright 1999 - 2004 by the <a href="http://www.jabber.org/jsf/">Jabber Software Foundation</a> (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;<a href="http://www.jabber.org/jsf/ipr-policy.php">http://www.jabber.org/jsf/ipr-policy.php</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at &lt;<a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>&gt;).</p>
<h2>Discussion Venue</h2>
<p class="indent">The preferred venue for discussion of this document is the Standards-JIG discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig">http://mail.jabber.org/mailman/listinfo/standards-jig</a>&gt;.</p>
<h2>Relation to XMPP</h2>
<p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core and XMPP IM specifications contributed by the Jabber Software Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocols defined in this JEP have been developed outside the Internet Standards Process and are to be understood as extensions to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
<h2>Conformance Terms</h2>
<p class="indent">The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in RFC 2119.</p>
<p><hr></p>
<h2>Table of Contents</h2>
<dl>
<dt>1.  <a href="#intro">Introduction</a>
</dt>
<dt>2.  <a href="#protocol">Protocol</a>
</dt>
<dl>
<dt>2.1.  <a href="#protocol-elements">Container Element and Child Elements</a>
</dt>
<dt>2.2.  <a href="#protocol-transport">Transport Mechanism</a>
</dt>
<dt>2.3.  <a href="#protocol-stop">Stop Command</a>
</dt>
</dl>
<dt>3.  <a href="#impl">Implementation Notes</a>
</dt>
<dt>4.  <a href="#security">Security Considerations</a>
</dt>
<dt>5.  <a href="#iana">IANA Considerations</a>
</dt>
<dt>6.  <a href="#registrar">Jabber Registrar Considerations</a>
</dt>
<dl><dt>6.1.  <a href="#registrar-ns">Protocol Namespaces</a>
</dt></dl>
<dt>7.  <a href="#schema">XML Schema</a>
</dt>
<dt><a href="#notes">Notes</a></dt>
<dt><a href="#revs">Revision History</a></dt>
</dl>
<p><hr></p>
<h2>1.
       <a name="intro">Introduction</a>
</h2>
  <p class="" style="">This JEP defines a protocol for communicating information about the music to which a user is listening. Such information may be seen as a kind of &quot;extended presence&quot;, and users may want to communicate such information to their contacts on the network as a fun add-on to traditional IM applications or to provide integration with common music-player applications.</p>
<h2>2.
       <a name="protocol">Protocol</a>
</h2>
  <div class="indent">
<h3>2.1 <a name="protocol-elements">Container Element and Child Elements</a>
</h3>
    <p class="" style="">Information about tunes is provided by the user and propagated on the network by the user's client. The information container for tune data is a &lt;tune/&gt; element that is qualified by the 'http://jabber.org/protocol/tune' namespace. The tune information itself is provided as the XML character data of the following children of the &lt;tune/&gt; element:</p>
    <p class="caption">Table 1: Child Elements</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Element</th>
        <th colspan="" rowspan="">Description</th>
        <th colspan="" rowspan="">Example</th>
        <th colspan="" rowspan="">Datatype</th>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">artist</td>
        <td align="" colspan="" rowspan="">The artist or performer of the song or piece</td>
        <td align="" colspan="" rowspan="">Yes</td>
        <td align="" colspan="" rowspan="">xs:string</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">title</td>
        <td align="" colspan="" rowspan="">The title of the song or piece</td>
        <td align="" colspan="" rowspan="">Heart of the Sunrise</td>
        <td align="" colspan="" rowspan="">xs:string</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">source</td>
        <td align="" colspan="" rowspan="">The collection (e.g., album) or other source (e.g., a band website that hosts streams or audio files)</td>
        <td align="" colspan="" rowspan="">Yessongs</td>
        <td align="" colspan="" rowspan="">xs:string</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">track</td>
        <td align="" colspan="" rowspan="">A unique identifier for the tune; e.g., the track number within a collection or the specific URI for the object (e.g., a stream or audio file)</td>
        <td align="" colspan="" rowspan="">3</td>
        <td align="" colspan="" rowspan="">xs:string</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">length</td>
        <td align="" colspan="" rowspan="">The duration of the song or piece in seconds</td>
        <td align="" colspan="" rowspan="">686</td>
        <td align="" colspan="" rowspan="">xs:unsignedShort</td>
      </tr>
    </table>
    <p class="" style="">NOTE: The datatypes specified above are defined in <span class="ref">XML Schema Part 2</span>  [<a href="#nt-id2602108">1</a>].</p>
  </div>
  <div class="indent">
<h3>2.2 <a name="protocol-transport">Transport Mechanism</a>
</h3>
    <p class="" style="">Tune information SHOULD be communicated and transported by means of the <span class="ref">Publish-Subscribe</span>  [<a href="#nt-id2602050">2</a>] protocol. Because tune information is not pure presence information and can change independently of the user's availability, it SHOULD NOT be provided as an extension to &lt;presence/&gt;.</p>
    <p class="caption">Example 1. User Publishes Tune Information</p>
<div class="indent"><pre>
&lt;iq type='set'
    from='stpeter@jabber.org/work'
    to='pubsub.jabber.org'
    id='tunes123'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;publish node='generic/tunes/stpeter@jabber.org'&gt;
      &lt;item id='current'&gt;
        &lt;tune xmlns='http://jabber.org/protocol/tune'&gt;
          &lt;artist&gt;Yes&lt;/artist&gt;
          &lt;title&gt;Heart of the Sunrise&lt;/title&gt;
          &lt;source&gt;Yessongs&lt;/source&gt;
          &lt;track&gt;3&lt;/track&gt;
          &lt;length&gt;686&lt;/length&gt;
        &lt;/tune&gt;
      &lt;/item&gt;
    &lt;/publish&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The tune information is then delivered to all subscribers:</p>
    <p class="caption">Example 2. Tune Information is Delivered to All Subscribers</p>
<div class="indent"><pre>
&lt;message
    from='pubsub.jabber.org'
    to='maineboy@jabber.org'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='generic/tunes/stpeter@jabber.org'&gt;
      &lt;item id='current'&gt;
        &lt;tune xmlns='http://jabber.org/protocol/tune'&gt;
          &lt;artist&gt;Yes&lt;/artist&gt;
          &lt;title&gt;Heart of the Sunrise&lt;/title&gt;
          &lt;source&gt;Yessongs&lt;/source&gt;
          &lt;track&gt;3&lt;/track&gt;
          &lt;length&gt;686&lt;/length&gt;
        &lt;/tune&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
.
.
.
    </pre></div>
    <p class="" style="">As mentioned in JEP-0060, the stanza containing the event notification or payload MAY also include 'replyto' data (as specified by the <span class="ref">Extended Stanza Addressing</span>  [<a href="#nt-id2602232">3</a>] protocol) to provide an explicit association between the published data and the user:</p>
    <p class="caption">Example 3. Event notification with extended stanza addressing</p>
<div class="indent"><pre>
&lt;message
    from='pubsub.jabber.org'
    to='maineboy@jabber.org'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='generic/tunes/stpeter@jabber.org'&gt;
      &lt;item id='current'&gt;
        &lt;tune xmlns='http://jabber.org/protocol/tune'&gt;
          &lt;artist&gt;Yes&lt;/artist&gt;
          &lt;title&gt;Heart of the Sunrise&lt;/title&gt;
          &lt;source&gt;Yessongs&lt;/source&gt;
          &lt;track&gt;3&lt;/track&gt;
          &lt;length&gt;686&lt;/length&gt;
        &lt;/tune&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
  &lt;addresses xmlns='http://jabber.org/protocol/address'&gt;
    &lt;address type='replyto' jid='juliet@capulet.com'/&gt;
  &lt;/addresses&gt;
&lt;/message&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>2.3 <a name="protocol-stop">Stop Command</a>
</h3>
    <p class="" style="">In order to indicate that the user is no longer listening to any tunes, the user's client SHOULD send an empty &lt;tune/&gt; element, which can be considered a &quot;stop command&quot; for user tunes:</p>
    <p class="caption">Example 4. User Publishes &quot;Stop Playing&quot; Information</p>
<div class="indent"><pre>
&lt;iq type='set'
    from='stpeter@jabber.org/work'
    to='pubsub.jabber.org'
    id='tunes345'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;publish node='generic/tunes/stpeter@jabber.org'&gt;
      &lt;item id='current'&gt;
        &lt;tune xmlns='http://jabber.org/protocol/tune'/&gt;
      &lt;/item&gt;
    &lt;/publish&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 5. Empty Tune Information is Delivered to All Subscribers</p>
<div class="indent"><pre>
&lt;message
    from='pubsub.jabber.org'
    to='maineboy@jabber.org'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='generic/tunes/stpeter@jabber.org'&gt;
      &lt;item id='current'&gt;
        &lt;tune xmlns='http://jabber.org/protocol/tune'/&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
.
.
.
    </pre></div>
  </div>
<h2>3.
       <a name="impl">Implementation Notes</a>
</h2>
  <p class="" style="">To prevent a large number of updates when a user is skipping through tracks, an implementation may wait several seconds before publishing new tune information.</p>
  <p class="" style="">If the length is unknown (e.g., the user is listening to a stream), the &lt;length/&gt; element SHOULD NOT be included.</p>
<h2>4.
       <a name="security">Security Considerations</a>
</h2>
  <p class="" style="">This protocol introduces no security considerations above and beyond those defined in <span style="font-weight: bold">Publish-Subscribe</span> (JEP-0060).</p>
<h2>5.
       <a name="iana">IANA Considerations</a>
</h2>
  <p class="" style="">This JEP requires no interaction with the <span class="ref">Internet Assigned Numbers Authority (IANA)</span>  [<a href="#nt-id2602405">4</a>].</p>
<h2>6.
       <a name="registrar">Jabber Registrar Considerations</a>
</h2>
  <div class="indent">
<h3>6.1 <a name="registrar-ns">Protocol Namespaces</a>
</h3>
    <p class="" style="">The <span class="ref">Jabber Registrar</span>  [<a href="#nt-id2602353">5</a>] shall include 'http://jabber.org/protocol/tune' in its registry of protocol namespaces.</p>
  </div>
<h2>7.
       <a name="schema">XML Schema</a>
</h2>
  <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/tune'
    xmlns='http://jabber.org/protocol/tune'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='tune'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name='artist' type='xs:string' minOccurs='0'/&gt;
        &lt;xs:element name='title' type='xs:string' minOccurs='0'/&gt;
        &lt;xs:element name='source' type='xs:string' minOccurs='0'/&gt;
        &lt;xs:element name='track' type='xs:string' minOccurs='0'/&gt;
        &lt;xs:element name='length' type='xs:unsignedShort' minOccurs='0'/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

&lt;/xs:schema&gt;
  </pre></div>
<p><hr></p>
<a name="notes"></a><h2>Notes</h2>
<p>
<a name="nt-id2602108">1</a>. XML Schema Part 2: Datatypes &lt;<a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a>&gt;.</p>
<p>
<a name="nt-id2602050">2</a>. JEP-0060: Publish-Subscribe &lt;<a href="http://www.jabber.org/jeps/jep-0060.html">http://www.jabber.org/jeps/jep-0060.html</a>&gt;.</p>
<p>
<a name="nt-id2602232">3</a>. JEP-0033: Extended Stanza Addressing &lt;<a href="http://www.jabber.org/jeps/jep-0033.html">http://www.jabber.org/jeps/jep-0033.html</a>&gt;.</p>
<p>
<a name="nt-id2602405">4</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
<p>
<a name="nt-id2602353">5</a>. The Jabber Registrar maintains a list of reserved Jabber protocol namespaces as well as registries of parameters used in the context of protocols approved by the Jabber Software Foundation. For further information, see &lt;<a href="http://www.jabber.org/registrar/">http://www.jabber.org/registrar/</a>&gt;.</p>
<p><hr></p>
<a name="revs"></a><h2>Revision History</h2>
<div class="indent">
<h4>Version 0.9 (2004-10-27)</h4>
<div class="indent">Changed recommendation to not include the &lt;length/&gt; element if the track time is unknown. (psa)
    </div>
<h4>Version 0.8 (2004-10-26)</h4>
<div class="indent">Added implementation notes; clarified nature of &lt;source/&gt; and &lt;track/&gt; elements; if length is unknown, set to zero. (psa)
    </div>
<h4>Version 0.7 (2004-05-20)</h4>
<div class="indent">Changed &lt;length/&gt; datatype from xs:duration to xs:unsignedShort. (psa)
    </div>
<h4>Version 0.6 (2004-04-25)</h4>
<div class="indent">Corrected several errors; added reference to JEP-0033. (psa)
    </div>
<h4>Version 0.5 (2004-02-19)</h4>
<div class="indent">Reverted from infobits to tune elements. (psa)
    </div>
<h4>Version 0.4 (2003-12-14)</h4>
<div class="indent">Slight modifications to track changes to infobits JEPs. (psa)
    </div>
<h4>Version 0.3 (2003-10-23)</h4>
<div class="indent">Replaced tune elements with infobits. (psa)
    </div>
<h4>Version 0.2 (2003-09-10)</h4>
<div class="indent">Added &quot;stop&quot; function via empty &lt;tune/&gt; element. (psa)
    </div>
<h4>Version 0.1 (2003-09-08)</h4>
<div class="indent">Initial version. (psa)
    </div>
</div>
<p><hr></p>
<p>END</p>
</body>
</html>
