<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<title>JEP-0112: User Physical Location</title>
<link rel="stylesheet" type="text/css" href="jep.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<meta name="DC.Title" content="User Physical Location">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Description" content="A protocol for communicating information about the current physical location of a user.">
<meta name="DC.Publisher" content="Jabber Software Foundation">
<meta name="DC.Contributor" content="JEP Editor">
<meta name="DC.Date" content="2004-05-11">
<meta name="DC.Type" content="Jabber Enhancement Proposal">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="JEP-0112">
<meta name="DC.Language" content="en">
<meta name="DC.Rights" content="This Jabber Enhancement Proposal is copyright 1999 - 2004 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;http://www.jabber.org/jsf/ipr-policy.php&gt;. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at &lt;http://www.opencontent.org/openpub/&gt;).">
</head>
<body bgcolor="#FFFFFF">
<h1>JEP-0112: User Physical Location</h1>
<p>A protocol for communicating information about the current physical location of a user.</p>
<p><hr></p>
<p style="color:red">NOTICE: This JEP is currently within Last Call or under consideration by the Jabber Council for advancement to the next stage in the JSF standards process. Final voting results should be available within several weeks.</p>
<p><hr></p>
<h2>JEP Information</h2>
<p class="indent">
            Status: Proposed<br>
            Type: Standards Track<br>
            Number: 0112<br>
            Version: 0.5<br>
            Last Updated: 2004-05-11<br>
            JIG: Standards JIG<br>
                Approving Body: Jabber Council<br>Dependencies: XMPP Core, JEP-0060<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: physloc<br>
</p>
<h2>Author Information</h2>
<h3>Peter Saint-Andre</h3>
<p class="indent">
        Email: stpeter@jabber.org<br>
        JID: stpeter@jabber.org</p>
<h2>Legal Notice</h2>
<p class="indent">This Jabber Enhancement Proposal is copyright 1999 - 2004 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;<a href="http://www.jabber.org/jsf/ipr-policy.php">http://www.jabber.org/jsf/ipr-policy.php</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Open Publication License, v1.0 or later (the latest version is presently available at &lt;<a href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>&gt;).</p>
<h2>Discussion Venue</h2>
<p class="indent">The preferred venue for discussion of this document is the Standards-JIG discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig">http://mail.jabber.org/mailman/listinfo/standards-jig</a>&gt;.</p>
<h2>Relation to XMPP</h2>
<p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core and XMPP IM specifications contributed by the Jabber Software Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocols defined in this JEP have been developed outside the Internet Standards Process and are to be understood as extensions to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
<h2>Conformance Terms</h2>
<p class="indent">The keywords &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;NOT RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in RFC 2119.</p>
<p><hr></p>
<h2>Table of Contents</h2>
<dl>
<dt>1.  <a href="#intro">Introduction</a>
</dt>
<dt>2.  <a href="#protocol">Protocol</a>
</dt>
<dt>3.  <a href="#usage">Usage</a>
</dt>
<dt>4.  <a href="#security">Security Considerations</a>
</dt>
<dt>5.  <a href="#iana">IANA Considerations</a>
</dt>
<dt>6.  <a href="#registrar">Jabber Registrar Considerations</a>
</dt>
<dl><dt>6.1.  <a href="#registrar-ns">Protocol Namespaces</a>
</dt></dl>
<dt>7.  <a href="#schema">XML Schema</a>
</dt>
<dt><a href="#notes">Notes</a></dt>
<dt><a href="#revs">Revision History</a></dt>
</dl>
<p><hr></p>
<h2>1.
       <a name="intro">Introduction</a>
</h2>
  <p class="" style="">This JEP defines an extension mechanism for capturing &quot;extended presence&quot; information about a user's current physical location. The information structures defined herein are intended to provide a semi-structured format for describing a location that may change fairly frequently (e.g., one's location on a campus or in a large building) in situations where the user or application does not possess, or does not wish to communicate, detailed latitude/longitude data of the type defined in <span class="ref">User Geolocation</span>  [<a href="#nt-id2596136">1</a>].</p> 
<h2>2.
       <a name="protocol">Protocol</a>
</h2>
  <p class="" style="">Information about the user's location is provided by the user and propagated on the network by the user's client. The information is structured by means of an &lt;physloc/&gt; element that is qualified by the 'http://jabber.org/protocol/physloc' namespace. The location information itself is provided as the XML character data of the following children of the &lt;physloc/&gt; element:</p>
  <p class="caption">Table 1: Child Elements</p>
<table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
<th colspan="" rowspan="">Element</th>
<th colspan="" rowspan="">Description</th>
<th colspan="" rowspan="">Example</th>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;country/&gt;</td>
<td align="" colspan="" rowspan="">The nation where the user is located</td>
<td align="" colspan="" rowspan="">USA</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;region/&gt;</td>
<td align="" colspan="" rowspan="">An administrative region of the nation, such as a state or province</td>
<td align="" colspan="" rowspan="">New York</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;locality/&gt;</td>
<td align="" colspan="" rowspan="">A locality within the administrative region, such as a town or city</td>
<td align="" colspan="" rowspan="">New York City</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;area/&gt;</td>
<td align="" colspan="" rowspan="">A named area such as a campus or neighborhood</td>
<td align="" colspan="" rowspan="">Central Park</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;street/&gt;</td>
<td align="" colspan="" rowspan="">A thoroughfare within the locality, or a crossing of two thoroughfares</td>
<td align="" colspan="" rowspan="">34th and Broadway</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;building/&gt;</td>
<td align="" colspan="" rowspan="">A specific building on a street or in an area</td>
<td align="" colspan="" rowspan="">The Empire State Building</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;floor/&gt;</td>
<td align="" colspan="" rowspan="">A particular floor in a building</td>
<td align="" colspan="" rowspan="">102</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;room/&gt;</td>
<td align="" colspan="" rowspan="">A particular room in a building</td>
<td align="" colspan="" rowspan="">Observatory</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;text/&gt;</td>
<td align="" colspan="" rowspan="">A catch-all element that captures any other information about the user's location</td>
<td align="" colspan="" rowspan="">Northwest corner of the lobby</td>
</tr>
    <tr class="body">
<td align="" colspan="" rowspan="">&lt;url/&gt;</td>
<td align="" colspan="" rowspan="">A URL that describes the current location</td>
<td align="" colspan="" rowspan="">A MaqQuest page</td>
</tr>
  </table>
<h2>3.
       <a name="usage">Usage</a>
</h2>
  <p class="" style="">The &lt;physloc/&gt; information SHOULD be communicated by means of <span class="ref">Publish-Subscribe</span>  [<a href="#nt-id2601978">2</a>]. Because physical location information is not pure presence information and can change independently of the user's availability, it SHOULD NOT be provided as an extension to &lt;presence/&gt;.</p>
  <p class="caption">Example 1. User Publishes Address</p>
<div class="indent"><pre>
&lt;iq type='set'
    from='stpeter@jabber.org/laptop'
    to='pubsub.jabber.org'
    id='publish1'&gt;
  &lt;pubsub xmlns='http://jabber.org/protocol/pubsub'&gt;
    &lt;publish node='generic/stpeter-loc'&gt;
      &lt;item id='current'&gt;
        &lt;physloc xmlns='http://jabber.org/protocol/physloc'&gt;
          &lt;country&gt;Austria&lt;/country&gt;
          &lt;locality&gt;Vienna&lt;/locality&gt;
          &lt;building&gt;Vienna International Centre&lt;/building&gt;
          &lt;text&gt;At IETF 57&lt;/text&gt;
        &lt;/physloc&gt;
      &lt;/item&gt;
    &lt;/publish&gt;
  &lt;/pubsub&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">The location information is then delivered to all subscribers:</p>
  <p class="caption">Example 2. Activity is Delivered to All Subscribers</p>
<div class="indent"><pre>
&lt;message
    from='pubsub.jabber.org'
    to='jer@jabber.org/silver'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='generic/stpeter-physloc'&gt;
      &lt;item id='current'&gt;
        &lt;physloc xmlns='http://jabber.org/protocol/physloc'&gt;
          &lt;country&gt;Austria&lt;/country&gt;
          &lt;locality&gt;Vienna&lt;/locality&gt;
          &lt;building&gt;Vienna International Centre&lt;/building&gt;
          &lt;text&gt;At IETF 57&lt;/text&gt;
        &lt;/physloc&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
&lt;/message&gt;
.
.
.
  </pre></div>
  <p class="" style="">As mentioned in JEP-0060, the stanza containing the event notification or payload MAY also include 'replyto' data (as specified by the <span class="ref">Extended Stanza Addressing</span>  [<a href="#nt-id2601963">3</a>] protocol) to provide an explicit association between the published data and the user:</p>
  <p class="caption">Example 3. Event notification with extended stanza addressing</p>
<div class="indent"><pre>
&lt;message
    from='pubsub.jabber.org'
    to='jer@jabber.org/silver'&gt;
  &lt;event xmlns='http://jabber.org/protocol/pubsub#event'&gt;
    &lt;items node='generic/stpeter-physloc'&gt;
      &lt;item id='current'&gt;
        &lt;physloc xmlns='http://jabber.org/protocol/physloc'&gt;
          &lt;country&gt;Austria&lt;/country&gt;
          &lt;locality&gt;Vienna&lt;/locality&gt;
          &lt;building&gt;Vienna International Centre&lt;/building&gt;
          &lt;text&gt;At IETF 57&lt;/text&gt;
        &lt;/physloc&gt;
      &lt;/item&gt;
    &lt;/items&gt;
  &lt;/event&gt;
  &lt;addresses xmlns='http://jabber.org/protocol/address'&gt;
    &lt;address type='replyto' jid='juliet@capulet.com'/&gt;
  &lt;/addresses&gt;
&lt;/message&gt;
  </pre></div>
<h2>4.
       <a name="security">Security Considerations</a>
</h2>
  <p class="" style="">It is imperative to control access to location information, at least by default. Imagine that a stalker got unauthorized access to this information, with enough accuracy and timeliness to be able to find the target person. This scenario could lead to loss of life, so please take access control checks seriously. A user SHOULD take care in approving subscribers and in characterizing his or her current physical location.</p>
<h2>5.
       <a name="iana">IANA Considerations</a>
</h2>
  <p class="" style="">This JEP requires no interaction with the <span class="ref">Internet Assigned Numbers Authority (IANA)</span>  [<a href="#nt-id2602152">4</a>].</p>
<h2>6.
       <a name="registrar">Jabber Registrar Considerations</a>
</h2>
  <div class="indent">
<h3>6.1 <a name="registrar-ns">Protocol Namespaces</a>
</h3>
    <p class="" style="">Upon advancement of this proposal to a status of Draft, the <span class="ref">Jabber Registrar</span>  [<a href="#nt-id2602111">5</a>] shall add the 'http://jabber.org/protocol/physloc' namespace to its registry of protocol namespaces.</p>
  </div>
<h2>7.
       <a name="schema">XML Schema</a>
</h2>
  <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/physloc'
    xmlns='http://jabber.org/protocol/physloc'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='physloc'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence minOccurs='0'&gt;
        &lt;xs:element name='country' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='region' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='locality' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='area' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='street' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='building' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='floor' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='room' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='text' minOccurs='0' type='xs:string'/&gt;
        &lt;xs:element name='url' minOccurs='0' type='xs:string'/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

&lt;/xs:schema&gt;
  </pre></div>
<p><hr></p>
<a name="notes"></a><h2>Notes</h2>
<p>
<a name="nt-id2596136">1</a>. JEP-0080: User Geolocation &lt;<a href="http://www.jabber.org/jeps/jep-0080.html">http://www.jabber.org/jeps/jep-0080.html</a>&gt;.</p>
<p>
<a name="nt-id2601978">2</a>. JEP-0060: Publish-Subscribe &lt;<a href="http://www.jabber.org/jeps/jep-0060.html">http://www.jabber.org/jeps/jep-0060.html</a>&gt;.</p>
<p>
<a name="nt-id2601963">3</a>. JEP-0033: Extended Stanza Addressing &lt;<a href="http://www.jabber.org/jeps/jep-0033.html">http://www.jabber.org/jeps/jep-0033.html</a>&gt;.</p>
<p>
<a name="nt-id2602152">4</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
<p>
<a name="nt-id2602111">5</a>. The Jabber Registrar maintains a list of reserved Jabber protocol namespaces as well as registries of parameters used in the context of protocols approved by the Jabber Software Foundation. For further information, see &lt;<a href="http://www.jabber.org/registrar/">http://www.jabber.org/registrar/</a>&gt;.</p>
<p><hr></p>
<a name="revs"></a><h2>Revision History</h2>
<div class="indent">
<h4>Version 0.5 (2004-05-11)</h4>
<div class="indent">Changed root element, namespace, and shortname to physloc to prevent conflict with JEP-0033. (psa)
    </div>
<h4>Version 0.4 (2004-04-25)</h4>
<div class="indent">Corrected several errors; added reference to JEP-0033. (psa)
    </div>
<h4>Version 0.3 (2004-02-19)</h4>
<div class="indent">Revived JEP upon modifications to JEP-0080; changed root element, namespace, and shortname to 'address'. (psa)
    </div>
<h4>Version 0.2 (2003-08-21)</h4>
<div class="indent">Removed 'current' from title; changed shortname to 'location'; changed 'freetext' to 'text'; made several other small fixes. (psa)
    </div>
<h4>Version 0.1 (2003-08-20)</h4>
<div class="indent">Initial version. (psa)
    </div>
</div>
<p><hr></p>
<p>END</p>
</body>
</html>
