<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0166: Jingle</title><link rel="stylesheet" type="text/css" href="../xmpp.css" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><meta name="DC.Title" content="Jingle" /><meta name="DC.Creator" content="Scott Ludwig" /><meta name="DC.Creator" content="Joe Beda" /><meta name="DC.Creator" content="Peter Saint-Andre" /><meta name="DC.Creator" content="Robert McQueen" /><meta name="DC.Creator" content="Sean Egan" /><meta name="DC.Creator" content="Joe Hildebrand" /><meta name="DC.Description" content="This specification defines an XMPP protocol extension for initiating and managing peer-to-peer media sessions between two XMPP entities in a way that is interoperable with existing Internet standards. The protocol provides a pluggable model that enables the core session management semantics (compatible with SIP) to be used for a wide variety of application types (e.g., voice chat, video chat, file transfer) and with a wide variety of transport methods (e.g., TCP, UDP, ICE, application-specific transports)." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2008-12-18" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0166" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright (c) 1999 - 2009 by the XMPP Standards Foundation (XSF)." /></head><body><h1>XEP-0166: Jingle</h1><p>Copyright (c) 1999 - 2009 <a href="http://xmpp.org/">XMPP Standards Foundation</a>. See <a href="#appendix-legal">Legal Notices</a>.</p><hr /><p>This specification defines an XMPP protocol extension for initiating and managing peer-to-peer media sessions between two XMPP entities in a way that is interoperable with existing Internet standards. The protocol provides a pluggable model that enables the core session management semantics (compatible with SIP) to be used for a wide variety of application types (e.g., voice chat, video chat, file transfer) and with a wide variety of transport methods (e.g., TCP, UDP, ICE, application-specific transports).</p><p style="color:red">NOTICE: This document is currently within Last Call or under consideration by the XMPP Council for advancement to the next stage in the XSF standards process.</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#intro">Introduction</a><br />2.  <a href="#howitworks">How It Works</a><br />3.  <a href="#reqs">Requirements</a><br />4.  <a href="#terms">Terminology</a><br />   
      4.1.  <a href="#terms-glossary">Glossary</a><br />   
      4.2.  <a href="#terms-conventions">Conventions</a><br />5.  <a href="#concepts">Concepts and Approach</a><br />   
      5.1.  <a href="#concepts-session">Overall Session Management</a><br />6.  <a href="#session">Session Flow</a><br />   
      6.1.  <a href="#session-resource">Resource Determination</a><br />   
      6.2.  <a href="#protocol-initiate">Initiation</a><br />   
      6.3.  <a href="#protocol-response">Responder Response</a><br />      
      6.3.1.  <a href="#protocol-response-ack">Acknowledgement</a><br />      
      6.3.2.  <a href="#protocol-response-errors">Errors</a><br />   
      6.4.  <a href="#session-negotiation">Negotiation</a><br />   
      6.5.  <a href="#session-acceptance">Acceptance</a><br />   
      6.6.  <a href="#session-modify">Modifying an Active Session</a><br />   
      6.7.  <a href="#session-terminate">Termination</a><br />   
      6.8.  <a href="#session-info">Informational Messages</a><br />7.  <a href="#def">Formal Definition</a><br />   
      7.1.  <a href="#def-jingle">Jingle Element</a><br />   
      7.2.  <a href="#def-action">Action Attribute</a><br />      
      7.2.1.  <a href="#def-action-content-accept">content-accept</a><br />      
      7.2.2.  <a href="#def-action-content-add">content-add</a><br />      
      7.2.3.  <a href="#def-action-content-modify">content-modify</a><br />      
      7.2.4.  <a href="#def-action-content-reject">content-reject</a><br />      
      7.2.5.  <a href="#def-action-content-remove">content-remove</a><br />      
      7.2.6.  <a href="#def-action-description-info">description-info</a><br />      
      7.2.7.  <a href="#def-action-session-accept">session-accept</a><br />      
      7.2.8.  <a href="#def-action-session-info">session-info</a><br />      
      7.2.9.  <a href="#def-action-session-initiate">session-initiate</a><br />      
      7.2.10.  <a href="#def-action-session-terminate">session-terminate</a><br />      
      7.2.11.  <a href="#def-action-transport-accept">transport-accept</a><br />      
      7.2.12.  <a href="#def-action-transport-info">transport-info</a><br />      
      7.2.13.  <a href="#def-action-transport-reject">transport-reject</a><br />      
      7.2.14.  <a href="#def-action-transport-replace">transport-replace</a><br />      
      7.2.15.  <a href="#def-action-ties">Tie Breaking Related to Jingle Actions</a><br />   
      7.3.  <a href="#def-content">Content Element</a><br />   
      7.4.  <a href="#def-reason">Reason Element</a><br />   
      7.5.  <a href="#def-thread">Thread Element</a><br />8.  <a href="#errors">Error Handling</a><br />9.  <a href="#support">Determining Support</a><br />10.  <a href="#conformance">Conformance by Using Protocols</a><br />   
      10.1.  <a href="#conformance-apps">Application Formats</a><br />   
      10.2.  <a href="#conformance-transports">Transport Methods</a><br />11.  <a href="#security">Security Considerations</a><br />   
      11.1.  <a href="#security-dos">Denial of Service</a><br />   
      11.2.  <a href="#security-gateways">Communication Through Gateways</a><br />   
      11.3.  <a href="#security-info">Information Exposure</a><br />   
      11.4.  <a href="#security-redirect">Redirection</a><br />12.  <a href="#iana">IANA Considerations</a><br />13.  <a href="#registrar">XMPP Registrar Considerations</a><br />   
      13.1.  <a href="#registrar-ns">Protocol Namespaces</a><br />   
      13.2.  <a href="#registrar-versioning">Namespace Versioning</a><br />   
      13.3.  <a href="#registrar-apps">Jingle Application Formats Registry</a><br />   
      13.4.  <a href="#registrar-transports">Jingle Transport Methods Registry</a><br />14.  <a href="#schema">XML Schemas</a><br />   
      14.1.  <a href="#schema-jingle">Jingle</a><br />   
      14.2.  <a href="#schema-errors">Jingle Errors</a><br />15.  <a href="#history">History</a><br />16.  <a href="#ack">Acknowledgements</a></p><p><a href="#appendices">Appendices</a><br />    <a href="#appendix-docinfo">A: Document Information</a><br />    <a href="#appendix-authorinfo">B: Author Information</a><br />    <a href="#appendix-legal">C: Legal Notices</a><br />    <a href="#appendix-xmpp">D: Relation to XMPP</a><br />    <a href="#appendix-discuss">E: Discussion Venue</a><br />    <a href="#appendix-conformance">F: Requirements Conformance</a><br />    <a href="#appendix-notes">G: Notes</a><br />    <a href="#appendix-revs">H: Revision History</a></p></div><hr /><h2>1.
       <a name="intro" id="intro">Introduction</a></h2>
  <p class="" style="">The purpose of Jingle is to enable one-to-one, peer-to-peer media sessions between XMPP entities, where the negotiation occurs over the XMPP "channel" and the media is exchanged outside the XMPP channel using technologies such as the Real-time Transport Protocol (RTP; <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3550">RFC 3550</a></span>  [<a href="#nt-id2262348">1</a>]), the User Datagram Protocol (UDP; <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc0768">RFC 768</a></span>  [<a href="#nt-id2262374">2</a>]), and <span class="ref" style=""><a href="http://tools.ietf.org/html/draft-ietf-mmusic-ice">Interactive Connectivity Establishment (ICE)</a></span>  [<a href="#nt-id2262402">3</a>].</p>
  <p class="" style="">One target application for Jingle is simple voice and video chat (see <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0167.html">Jingle RTP Sessions</a></span>  [<a href="#nt-id2262440">4</a>]). We stress the word "simple". The purpose of the core Jingle technology is not to build a full-fledged telephony application that supports call waiting, call forwarding, call transfer, hold music, IVR systems, find-me-follow-me functionality, conference calls, and the like. These features are of interest to some user populations, but adding support for them to the core Jingle layer would introduce unnecessary complexity into a technology that is designed for basic multimedia interaction.</p>
  <p class="" style="">In addition, the purpose of Jingle is not to supplant or replace existing Internet technologies based on the Session Initiation Protocol (SIP; <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3261">RFC 3261</a></span>  [<a href="#nt-id2262462">5</a>]). Because dual-stack XMPP+SIP clients are difficult to build, Jingle was designed as a pure XMPP signalling protocol. However, Jingle is at the same time designed to interwork with SIP so that the millions of deployed XMPP clients can be added onto existing Voice over Internet Protocol (VoIP) networks, rather than limiting XMPP users to a separate and distinct network.</p>
  <p class="" style="">Jingle is designed in a modular way so that developers can easily add support for multimedia session types other than voice and video chat, such as application sharing, file transfer, collaborative editing, whiteboarding, and torrent broadcasting. The transport methods are also modular, so that Jingle implementations can use any appropriate media transport (including proprietary methods not standardized through the XMPP Standards Foundation).</p>
<h2>2.
       <a name="howitworks" id="howitworks">How It Works</a></h2>
  <p class="" style="">This section provides a friendly introduction to Jingle.</p>
  <p class="" style="">In essence, Jingle enables two XMPP entities (e.g., romeo@montague.lit and juliet@capulet.lit) to set up, manage, and tear down a multimedia session. The negotiation takes place over XMPP, and the media transfer typically takes place outside of XMPP. A simplified session flow would be as follows:  [<a href="#nt-id2262532">6</a>]</p>
  <p class="caption"></p><div class="indent"><pre>
Romeo                         Juliet
  |                             |
  |   session-initiate          |
  |----------------------------&gt;|
  |   ack                       |
  |&lt;----------------------------|
  |   session-accept            |
  |&lt;----------------------------|
  |   ack                       |
  |----------------------------&gt;|
  |   MEDIA SESSION             |
  |&lt;===========================&gt;|
  |   session-terminate         |
  |&lt;----------------------------|
  |   ack                       |
  |----------------------------&gt;|
  |                             |
  </pre></div>
  <p class="" style="">To illustrate the basic flow, we show a truncated example with a "stub" application format and transport method (skipping non-essential steps to enforce the most important concepts).</p>
  <p class="caption"><a name="example-1" id="example-1"></a>Example 1. Initiator sends session-initiate (stub)</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='jingle1'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'&gt;
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='stub'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:stub:0' media='stub'/&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:stub:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">After the responder acknowledges receipt of the session-initiate and the parties negotiate some parameters (not shown here), the responder would eventually send a session-accept to the initiator.</p>
  <p class="caption"><a name="example-2" id="example-2"></a>Example 2. Responder definitively accepts the session</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='accept1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-accept'
          initiator='romeo@montague.lit/orchard'
          responder='juliet@capulet.lit/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='stub'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:stub:0' media='stub'/&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:stub:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">The initiator acknowledges receipt of the session-accept (not shown here) and the parties can exchange "stub" media data over the "stub" transport.</p>
  <p class="" style="">Eventually, one of the parties (here the responder) will terminate the session.</p>
  <p class="caption"><a name="example-3" id="example-3"></a>Example 3. Responder terminates the session</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;success/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">The recipient acknowledges receipt of the session-terminate (not shown here) and the session is ended.</p>
  <p class="" style="">We now "fill in the blanks" for the &lt;description/&gt; and &lt;transport/&gt; elements with a more complex example: a voice chat session, where application type is a Jingle RTP session (with several different codec possibilities) and the transport method is <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0176.html">Jingle ICE-UDP Transport Method</a></span>  [<a href="#nt-id2262694">7</a>].</p>
  <p class="caption"><a name="example-4" id="example-4"></a>Example 4. Initiator sends session-initiate</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='jingle1'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'&gt;
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='96' name='speex' clockrate='16000'/&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
        &lt;payload-type id='0' name='PCMU' /&gt;
        &lt;payload-type id='103' name='L16' clockrate='16000' channels='2'/&gt;
        &lt;payload-type id='98' name='x-ISAC' clockrate='8000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">Upon receiving the session-initiate stanza, the responder determines whether it can proceed with the negotiation. If there is no error, the responder acknowledges the session initiation request.</p>
  <p class="caption"><a name="example-5" id="example-5"></a>Example 5. Responder acknowledges session-initiate</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='result'/&gt;
  </pre></div>
  <p class="" style="">After successful transport negotiation (not shown here), the responder accepts the session by sending a session-accept action to the initiator (including the negotiated transport details and the subset of offered codecs that the responder supports).</p>
  <p class="caption"><a name="example-6" id="example-6"></a>Example 6. Responder definitively accepts the session</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='accept1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-accept'
          initiator='romeo@montague.lit/orchard'
          responder='juliet@capulet.lit/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:0'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   ip='192.0.2.3'
                   network='1'
                   port='45664'
                   priority='1678246398'
                   protocol='udp'
                   pwd='asd88fgpdd777uzjYhagZg'
                   type='srflx'
                   ufrag='8hhy'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">And the initiator acknowledges session acceptance:</p>
  <p class="caption"><a name="example-7" id="example-7"></a>Example 7. Initiator acknowledges session acceptance</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='accept1'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
  </pre></div>
  <p class="" style="">The initiator and responder would then exchange media using any of the acceptable codecs.</p>
  <p class="" style="">Eventually, one of the parties (here the responder) will terminate the session.</p>
  <p class="caption"><a name="example-8" id="example-8"></a>Example 8. Responder terminates the session</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;success/&gt;
      &lt;text&gt;Sorry, gotta go!&lt;/text&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">The other party then acknowledges termination of the session:</p>
  <p class="caption"><a name="example-9" id="example-9"></a>Example 9. Initiator acknowledges termination</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='term1'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
  </pre></div>
<h2>3.
       <a name="reqs" id="reqs">Requirements</a></h2>
  <p class="" style="">The protocol defined herein is designed to meet the following requirements:</p>
  <ol start="" class="" style="">
    <li class="" style="">Make it possible to manage a wide variety of peer-to-peer sessions (including but not limited to voice and video) within XMPP.</li>
    <li class="" style="">When a peer-to-peer connection cannot be negotiated, make it possible to fall back to relayed communications.</li>
    <li class="" style="">Clearly separate the signalling channel (XMPP) from the data channel.</li>
    <li class="" style="">Clearly separate the application formats (e.g., audio) from the transport methods (e.g., RTP).</li>
    <li class="" style="">Make it possible to add, modify, and remove both application types and transport methods in an existing session.</li>
    <li class="" style="">Make it relatively easy to implement support for the protocol in standard Jabber/XMPP clients.</li>
    <li class="" style="">Where communication with non-XMPP entities is needed, push as much complexity as possible onto server-side gateways between the XMPP network and the non-XMPP network.</li>
  </ol>
  <p class="" style="">This document defines the signalling protocol only. Additional documents specify the following:</p>
  <ul class="" style="">
    <li class="" style=""><p class="" style="">Various application formats (audio, video, etc.) and, where possible, mapping of those types to the Session Description Protocol (SDP; see <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc4566">RFC 4566</a></span>  [<a href="#nt-id2262974">8</a>]); examples include <span class="ref">Jingle RTP Sessions</span> and <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0234.html">Jingle File Transfer</a></span>  [<a href="#nt-id2263011">9</a>].</p></li>
    <li class="" style=""><p class="" style="">Various transport methods; examples include <span class="ref">Jingle ICE-UDP Transport</span> and <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0177.html">Jingle Raw UDP Transport Method </a></span>  [<a href="#nt-id2263047">10</a>].</p></li>
    <li class="" style=""><p class="" style="">Procedures for mapping the Jingle signalling protocol to existing signalling standards such as the IETF's Session Initiation Protocol (SIP) and the ITU's H.323 protocol (see <span class="ref" style="">H.323</span>  [<a href="#nt-id2263089">11</a>]); see for example <span class="ref" style=""><a href="http://tools.ietf.org/html/draft-saintandre-sip-xmpp-media">draft-saintandre-sip-xmpp-media</a></span>  [<a href="#nt-id2263105">12</a>].</p></li>
  </ul>
<h2>4.
       <a name="terms" id="terms">Terminology</a></h2>
  <div class="indent"><h3>4.1 <a name="terms-glossary" id="terms-glossary">Glossary</a></h3>
  <div class="indent"><p class="caption"><a name="table-1" id="table-1"></a>Table 1: Glossary</p><table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Term</th>
      <th colspan="" rowspan="">Definition</th>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Application Format</td>
      <td colspan="" rowspan="">The data format of the content type being established, which formally declares one purpose of the session (e.g., "audio" or "video"). This is the 'what' of the session (i.e., the bits to be transferred), such as the acceptable codecs when establishing a voice conversation. In Jingle XML syntax the application format is the namespace of the &lt;description/&gt; element.</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Component</td>
      <td colspan="" rowspan="">A numbered stream of data that needs to be transmitted between the endpoints for a given content type in the context of a given session. It is up to the transport to negotiate the details of each component. Depending on the content type, multiple components might be needed (e.g., one to transmit an RTP stream and another to transmit RTCP timing information).</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Content Type</td>
      <td colspan="" rowspan="">A pair formed by the combination of one application format and one transport method.</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Session</td>
      <td colspan="" rowspan="">One or more content types negotiated between two entities. It is delimited in time by a session-initiate action and a session-terminate action. During the lifetime of a session, content types can be added or removed. A session consists of at least one content type at a time.</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">Transport Method</td>
      <td colspan="" rowspan="">The method for establishing data stream(s) between entities. Possible transports might include ICE-UDP, ICE-TCP, Raw UDP, inband data, etc. This is the 'how' of the session. In Jingle XML syntax this is the namespace of the &lt;transport/&gt; element. The transport method defines how to transfer bits from one host to another. Each transport method MUST specify whether it is datagram (thus suitable for applications where some packet loss is tolerable) or streaming (thus suitable for applications where packet loss is not tolerable).</td>
    </tr>
  </table></div>
  </div>
  <div class="indent"><h3>4.2 <a name="terms-conventions" id="terms-conventions">Conventions</a></h3>
    <p class="" style="">In diagrams, the following conventions are used:</p>
    <ul class="" style="">
      <li class="" style="">Dashed lines (---) represent Jingle stanzas that are sent via the XMPP signalling channel.</li>
      <li class="" style="">Double-dashed lines (===) represent media packets that are sent via the media channel, which typically is not an XMPP channel but a direct or mediated channel between the endpoints.</li>
    </ul>
  </div>
<h2>5.
       <a name="concepts" id="concepts">Concepts and Approach</a></h2>
  <p class="" style="">Jingle consists of three parts, each with its own syntax and semantics:</p>
  <ol start="" class="" style="">
    <li class="" style="">Overall session management</li>
    <li class="" style="">Application types (the "what")</li>
    <li class="" style="">Transport methods (the "how")</li>
  </ol>
  <p class="" style="">This document defines the semantics and syntax for overall session management. It also provides pluggable "slots" for application formats and transport methods, which are specified in separate documents.</p>
  <p class="" style="">At the most basic level, the process for initial negotiation of a Jingle session is as follows:</p>
  <ol start="" class="" style="">
    <li class="" style="">One user (the "initiator") sends to another user (the "responder") a session initiation request with at least one content definition.</li>
    <li class="" style="">If the responder wants to proceed, it acknowledges the session initiation request by sending an IQ result.</li>
    <li class="" style="">The parties attempt to set up data transmission over the designated transport method as defined in the relevant specification, which might involve the exchange of transport-info actions.</li>
    <li class="" style="">Optionally, either party can add or remove content definitions, or change the direction of the media flow.</li>
    <li class="" style="">Optionally, either party can send session-info actions (to inform the other party that it is attempting transport negotiation, that its device is ringing, etc.).</li>
    <li class="" style="">As soon as the responder determines that data can flow over the designated transport, it sends to the initiator a session-accept action.</li>
    <li class="" style="">The parties start sending data over the transport.</li>
  </ol>
  <p class="" style="">After the initial session negotiation has been completed and the session is in the ACTIVE state, the parties can adjust the session definition by sending additional Jingle actions, such as content-modify, content-remove, content-add, description-info, and transport-replace. In addition, certain transport methods allow continued sending of transport-info actions while in the ACTIVE state. And naturally the parties can send session-info actions at any time.</p>
  <div class="indent"><h3>5.1 <a name="concepts-session" id="concepts-session">Overall Session Management</a></h3>
    <p class="" style="">The state machine for overall session management (i.e., the state per Session ID) is as follows:</p>
    <p class="caption"></p><div class="indent"><pre>
         o
         |
         | session-initiate
         |
         | +------------------------+
         |/                         |
PENDING  o----------------------+   |
         |  | content-accept,   |   |
         |  | content-add,      |   |
         |  | content-modify,   |   |
         |  | content-reject,   |   |
         |  | content-remove,   |   |
         |  | description-info, |   |
         |  | session-info,     |   |
         |  | transport-accept, |   |
         |  | transport-info,   |   |
         |  | transport-reject, |   |
         |  | transport-replace |   |
         |  +-------------------+   |
         |                          |
         | session-accept           |
         |                          |
 ACTIVE  o----------------------+   |
         |  | content-accept,   |   |
         |  | content-add,      |   |
         |  | content-modify,   |   |
         |  | content-reject,   |   |
         |  | content-remove,   |   |
         |  | description-info, |   |
         |  | session-info,     |   |
         |  | transport-accept, |   |
         |  | transport-info,   |   |
         |  | transport-reject, |   |
         |  | transport-replace |   |
         |  +-------------------+   |
         |                          |
         +--------------------------+
                                    |
                                    | session-terminate
                                    |
                                    o ENDED
    </pre></div>
    <p class="" style="">As shown, there are three overall session states:</p>
    <ol start="" class="" style="">
      <li class="" style="">PENDING</li>
      <li class="" style="">ACTIVE</li>
      <li class="" style="">ENDED</li>
    </ol>
    <p class="" style="">The actions related to management of the overall Jingle session are as follows (detailed definitions are provided in under <a href="#def-action">Action Attribute</a>).</p>
    <ul class="" style="">
      <li class="" style="">content-accept -- Accept a content-add action received from another party.</li>
      <li class="" style="">content-add -- Add one or more new content definitions to the session.</li>
      <li class="" style="">content-modify -- Change the directionality of media sending.</li>
      <li class="" style="">content-reject -- Reject a content-add action received from another party.</li>
      <li class="" style="">content-remove -- Remove one or more content definitions from the session.</li>
      <li class="" style="">description-info -- Exchange information about parameters for an application type.</li>
      <li class="" style="">session-accept -- Definitively accept a session negotiation.</li>
      <li class="" style="">session-info -- Send session-level information, such as a ping or a ringing message.</li>
      <li class="" style="">session-initiate -- Request negotiation of a new Jingle session.</li>
      <li class="" style="">session-terminate -- End an existing session.</li>
      <li class="" style="">transport-accept -- Accept a transport-replace action received from another party.</li>
      <li class="" style="">transport-info -- Exchange transport candidates.</li>
      <li class="" style="">transport-reject -- Reject a transport-replace action received from another party.</li>
      <li class="" style="">transport-replace -- Redefine a transport method or replace it with a different method.</li>
    </ul>
  </div>
<h2>6.
       <a name="session" id="session">Session Flow</a></h2>
  <p class="" style="">This section defines the high-level flow of a Jingle session. More detailed descriptions are provided in the specifications for Jingle application formats and transport methods.</p>
  <div class="indent"><h3>6.1 <a name="session-resource" id="session-resource">Resource Determination</a></h3>
    <p class="" style="">In order to initiate a Jingle session, the initiator needs to determine which of the responder's XMPP resources is best for the desired application format. Methods for doing so are out of scope for this specification. However, see the <a href="#support">Determining Support</a> section of this document (and associated specifications) for relevant information.</p>
  </div>
  <div class="indent"><h3>6.2 <a name="protocol-initiate" id="protocol-initiate">Initiation</a></h3>
    <p class="" style="">Once the initiator has discovered which of the responder's XMPP resources is ideal for the desired application format, it sends a session initiation request to the responder. This request is an IQ-set containing a &lt;jingle/&gt; element qualified by the 'urn:xmpp:jingle:0' namespace (see <a href="#registrar-versioning">Namespace Versioning</a> regarding the possibility of incrementing the version number), where the value of the 'action' attribute is "session-initiate" and where the &lt;jingle/&gt; element contains one or more &lt;content/&gt; elements. Each &lt;content/&gt; element defines a content type to be transferred during the session, and each &lt;content/&gt; element in turn contains one &lt;description/&gt; child element that specifies a desired application format and one &lt;transport/&gt; child element that specifies a potential transport method. If either party wishes to propose the use of multiple transport methods for the same application format, it MUST include multiple &lt;content/&gt; elements.</p>
    <p class="caption"><a name="example-10" id="example-10"></a>Example 10. Initiator sends session-initiate</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='jingle1'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='96' name='speex' clockrate='16000'/&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
        &lt;payload-type id='0' name='PCMU' /&gt;
        &lt;payload-type id='103' name='L16' clockrate='16000' channels='2'/&gt;
        &lt;payload-type id='98' name='x-ISAC' clockrate='8000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: The syntax and semantics of the &lt;description/&gt; and &lt;transport/&gt; elements are out of scope for this document, since they are defined in related specifications. The syntax and semantics of the &lt;jingle/&gt; and &lt;content/&gt; elements are specified in this document under <a href="#def">Formal Definition</a>.</p>
  </div>
  <div class="indent"><h3>6.3 <a name="protocol-response" id="protocol-response">Responder Response</a></h3>
    <div class="indent"><h3>6.3.1 <a name="protocol-response-ack" id="protocol-response-ack">Acknowledgement</a></h3>
      <p class="" style="">Unless one of the following errors occurs, the responder SHOULD acknowledge receipt of the initiation request.</p>
      <p class="caption"><a name="example-11" id="example-11"></a>Example 11. Responder acknowledges session-initiate</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='result'/&gt;
      </pre></div>
      <p class="" style="">However, after acknowledging the session initiation request, the responder might subsequently determine that it cannot proceed with negotiation of the session (e.g., because it does not support any of the offered application formats or transport methods, because a human user is busy or unable to accept the session, because a human user wishes to formally decline the session, etc.). In these cases, the responder SHOULD immediately acknowledge the session initiation request but then terminate the session with an appropriate reason as described in the <a href="#session-terminate">Termination</a> section of this document.</p>
    </div>
    <div class="indent"><h3>6.3.2 <a name="protocol-response-errors" id="protocol-response-errors">Errors</a></h3>
      <p class="" style="">There are several reasons why the responder might immediately return an error instead of acknowledging receipt of the initiation request:</p>
      <ul class="" style="">
        <li class="" style="">The initiator is unknown to the responder and the responder does not communicate with unknown entities.</li>
        <li class="" style="">The responder does not support Jingle.</li>
        <li class="" style="">The responder wishes to redirect the request to another address.</li>
        <li class="" style="">The responder does not have sufficient resources to participate in a session.</li>
        <li class="" style="">The initiation request was malformed.</li>
      </ul>
      <p class="" style="">If the initiator is unknown to the responder (e.g., via presence subscription as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3921">RFC 3921</a></span>  [<a href="#nt-id2264142">13</a>]) and the responder has a policy of not communicating via Jingle with unknown entities, it MUST return a &lt;service-unavailable/&gt; error.</p>
      <p class="caption"><a name="example-12" id="example-12"></a>Example 12. Initiator is unknown to responder</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </pre></div>
      <p class="" style="">If the responder does not support Jingle, it MUST return a &lt;service-unavailable/&gt; error.</p>
      <p class="caption"><a name="example-13" id="example-13"></a>Example 13. Responder does not support Jingle</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </pre></div>
      <p class="" style="">If the responder wishes to redirect the request to another address, it MUST return a &lt;redirect/&gt; error.</p>
      <p class="caption"><a name="example-14" id="example-14"></a>Example 14. Responder redirection</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;redirect xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'&gt;
      xmpp:voicemail@capulet.lit
    &lt;/redirect&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </pre></div>
      <p class="" style="">If the responder does not have sufficient resources to participate in a session, it MUST return a &lt;resource-constraint/&gt; error.</p>
      <p class="caption"><a name="example-15" id="example-15"></a>Example 15. Responder has insufficent resources</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='wait'&gt;
    &lt;resource-constraint xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </pre></div>
      <p class="" style="">If the initiation request was malformed, the responder MUST return a &lt;bad-request/&gt; error.</p>
      <p class="caption"><a name="example-16" id="example-16"></a>Example 16. Initiation request malformed</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='jingle1'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </pre></div>
    </div>
  </div>
  <div class="indent"><h3>6.4 <a name="session-negotiation" id="session-negotiation">Negotiation</a></h3>
    <p class="" style="">In general, negotiation will be necessary before the parties can agree on an acceptable set of application formats and transport methods. There are many potential parameter combinations, as defined in the relevant specifications for various application formats and transport methods.</p>
    <p class="" style="">The allowable negotiations (e.g., content-level and transport-level negotiations) include:</p>
    <ul class="" style="">
      <li class="" style="">Exchanging particular transport candidates via the transport-info action.</li>
      <li class="" style="">Modifying the communication direction for a content type via the content-modify action.</li>
      <li class="" style="">Changing the definition of a content type via the transport-replace action (typically to fall back to a more suitable transport).</li>
      <li class="" style="">Adding a content type via the content-add action.</li>
      <li class="" style="">Removing a content type via the content-remove action.</li>
    </ul>
  </div>
  <div class="indent"><h3>6.5 <a name="session-acceptance" id="session-acceptance">Acceptance</a></h3>
    <p class="" style="">If (after negotiation of transport methods and application formats as well as checking of transport candidates) the responder determines that it will be able to establish a connection, it sends a definitive acceptance to the initiator.</p>
  <p class="caption"><a name="example-17" id="example-17"></a>Example 17. Responder accepts the session</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='accept1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-accept'
          initiator='romeo@montague.lit/orchard'
          responder='juliet@capulet.lit/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:0'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   ip='192.0.2.3'
                   network='1'
                   port='45664'
                   priority='1678246398'
                   protocol='udp'
                   pwd='asd88fgpdd777uzjYhagZg'
                   type='srflx'
                   ufrag='8hhy'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="box" style="">Note: The protocol-level "session-accept" action is not to be confused with an interface-level acceptance of the session request. After receiving and acknowledging the "session-initiate" action received from the initiator, the responder's client SHOULD present an interface element that enables a human user to explicitly agree to proceeding with the session (e.g., an "Accept Incoming Call?" pop-up window including "Yes" and "No" buttons). However, the responder's client SHOULD NOT return a "session-accept" action to the initiator until the responder has explicitly agreed to proceed with the session (unless the initiator is on a list of entities whose sessions are automatically accepted).</p>
    <p class="" style="">The initiator then acknowledges the responder's definitive acceptance, after which the parties can exchange media over the negotiated connection.</p>
    <p class="caption"><a name="example-18" id="example-18"></a>Example 18. Initiator acknowledges session acceptance</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='accept1'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
    </pre></div>
    <p class="" style="">If one of the parties cannot find a suitable transport method or candidate, it SHOULD terminate the session as described below.</p>
  </div>
  <div class="indent"><h3>6.6 <a name="session-modify" id="session-modify">Modifying an Active Session</a></h3>
    <p class="" style="">Once a session is in the ACTIVE state, it might be modified via a content-add, content-modify, content-remove, or transport-info action. Examples of such modifications are shown in the specifications for various application formats and transport methods.</p>
  </div>
  <div class="indent"><h3>6.7 <a name="session-terminate" id="session-terminate">Termination</a></h3>
    <p class="" style="">In order to gracefully end the session (which can be done at any point after acknowledging receipt of the initiation request, including immediately thereafter in order to decline the request), either the responder or the initiator MUST send a session-terminate action to the other party.</p>
    <p class="" style="">The party that terminates the session SHOULD include a &lt;reason/&gt; element that specifies why the session is being terminated. Examples follow.</p>
    <p class="" style="">Probably the primary reason for terminating a session is that the call has ended successfully; in this case, the recommended condition is &lt;success/&gt;.</p>
    <p class="caption"><a name="example-19" id="example-19"></a>Example 19. Terminating the session (busy)</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term0'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;success/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
    <p class="" style="">Another reason for terminating the session is that the terminating party is busy; in this case, the recommended condition is &lt;busy/&gt;.</p>
    <p class="caption"><a name="example-20" id="example-20"></a>Example 20. Terminating the session (busy)</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;busy/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">Another reason for terminating the session is that the terminating party wishes to formally decline the session; in this case, the recommended condition is &lt;decline/&gt;.</p>
  <p class="caption"><a name="example-21" id="example-21"></a>Example 21. Terminating the session (session formally declined)</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term2'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;decline/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Another reason for terminating the session is that the terminating party already has an existing session with the other party and wishes to use that session rather than initiate a new session; in this case, the recommended condition is &lt;alternative-session/&gt; and the terminating party SHOULD include the session ID of the alternative session in the &lt;sid/&gt; element.</p>
    <p class="caption"><a name="example-22" id="example-22"></a>Example 22. Terminating the session (existing session)</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term3'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;alternative-session&gt;
        &lt;sid&gt;b84tkkwlmb48kgfb&lt;/sid&gt;
      &lt;/alternative-session&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Another reason for terminating the session is that the terminating party does not support any of the offered application formats; in this case, the recommended condition is &lt;unsupported-applications/&gt;.</p>
    <p class="caption"><a name="example-23" id="example-23"></a>Example 23. Terminating the session (no offered application format supported)</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term4'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;unsupported-applications/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Another reason for terminating the session is that the terminating party does not support any of the offered transport methods; in this case, the recommended condition is &lt;unsupported-transports/&gt;.</p>
    <p class="caption"><a name="example-24" id="example-24"></a>Example 24. Terminating the session (no offered transport method supported)</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='term5'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;unsupported-transports/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: Other reasons for terminating the session might apply, and the foregoing list is not exhaustive.</p>
    <p class="" style="">Upon receiving an action of "session-terminate", the other party MUST then acknowledge termination of the session:</p>
    <p class="caption"><a name="example-25" id="example-25"></a>Example 25. Acknowledging termination</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='term1'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
    </pre></div>
    <p class="" style="">Note: As soon as an entity sends a session-terminate action, it MUST consider the session to be in the ENDED state (even before receiving acknowledgement from the other party). If the terminating entity receives additional Jingle-related IQ-sets from the other party after sending the session-terminate action, it MUST reply with an &lt;unknown-session/&gt; error.</p>
    <p class="caption"><a name="example-26" id="example-26"></a>Example 26. Unknown-session error</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='term1'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unknown-session xmlns='urn:xmpp:jingle:errors:0'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Not all Jingle sessions end gracefully. When the parties to a Jingle session also exchange XMPP presence information, receipt of &lt;presence type='unavailable'/&gt; from the other party SHOULD be considered a session-ending event that justifies proactively sending a session-terminate action to the seemingly unavailable party -- if, that is, no other communication has been received within 5 or 10 seconds from the seemingly unavailable party in the form of XMPP signalling traffic, connectivity checks, or continued media transfer.</p>  
  </div>
  <div class="indent"><h3>6.8 <a name="session-info" id="session-info">Informational Messages</a></h3>
    <p class="" style="">At any point after initiation of a Jingle session, either entity MAY send an informational message to the other party, for example to inform the other party that a device is ringing.</p>
    <p class="caption"><a name="example-27" id="example-27"></a>Example 27. Responder sends ringing message</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='ringing1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-info'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;ringing xmlns='urn:xmpp:jingle:apps:rtp:1:info'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">An informational message MUST be an IQ-set containing a &lt;jingle/&gt; element whose 'action' attribute is set to a value of "session-info", "description-info", or "transport-info"; the &lt;jingle/&gt; element SHOULD further contain a payload child element (specific to the application format or transport method) that specifies the information being communicated. If the party that receives an informational message does not understand the payload, it MUST return a &lt;feature-not-implemented/&gt; error with a Jingle-specific error condition of &lt;unsupported-info/&gt;.</p>
    <p class="caption"><a name="example-28" id="example-28"></a>Example 28. Responder returns unsupported-info error</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='ringing1'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='modify'&gt;
    &lt;feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unsupported-info xmlns='urn:xmpp:jingle:errors:0'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">However, the &lt;jingle/&gt; element associated with a session-info action MAY be empty. If either party receives an empty session-info action for an active session, it MUST send an empty IQ result; this usage functions as a "ping" to determine session vitality via the XMPP signalling channel.</p>
    <p class="caption"><a name="example-29" id="example-29"></a>Example 29. Responder sends session ping</p><div class="indent"><pre>
&lt;iq from='juliet@capulet.lit/balcony'
    id='ping1'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:0'
          action='session-info'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption"><a name="example-30" id="example-30"></a>Example 30. Initiator returns IQ-result</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='ping1'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
    </pre></div>
  </div>
<h2>7.
       <a name="def" id="def">Formal Definition</a></h2>
  <div class="indent"><h3>7.1 <a name="def-jingle" id="def-jingle">Jingle Element</a></h3>
    <p class="" style="">The &lt;jingle/&gt; element MAY be empty or contain one or more &lt;content/&gt; elements (for which see <a href="#def-content">Content Element</a>).</p>
    <p class="" style="">The attributes of the &lt;jingle/&gt; element are as follows.</p>
    <div class="indent"><p class="caption"><a name="table-2" id="table-2"></a>Table 2: Attributes of Jingle Element</p><table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Attribute</th>
        <th colspan="" rowspan="">Definition</th>
        <th colspan="" rowspan="">Inclusion</th>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">action</td>
        <td colspan="" rowspan="">A Jingle action as described under <a href="#def-action">Action Attribute</a>.</td>
        <td colspan="" rowspan="">REQUIRED</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">initiator</td>
        <td colspan="" rowspan="">The full JID of the entity that has initiated the session flow (which can be different from the 'from' address on the IQ-set).</td>
        <td colspan="" rowspan="">REQUIRED</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">responder</td>
        <td colspan="" rowspan="">The full JID of the entity that has replied to the initiation, which can be different from the 'to' address on the IQ-set.</td>
        <td colspan="" rowspan="">RECOMMENDED</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">sid</td>
        <td colspan="" rowspan="">A random session identifier generated by the initiator, which effectively maps to the local-part of a SIP "Call-ID" parameter; this SHOULD match the XML Nmtoken production  [<a href="#nt-id2264983">14</a>] so that XML character escaping is not needed for characters such as '&amp;'.</td>
        <td colspan="" rowspan="">REQUIRED</td>
      </tr>
    </table></div>
  </div>
  <div class="indent"><h3>7.2 <a name="def-action" id="def-action">Action Attribute</a></h3>
    <p class="" style="">The value of the 'action' attribute MUST be one of the following. If an entity receives a value not defined here, it MUST ignore the attribute and MUST return a &lt;bad-request/&gt; error to the sender.</p>
    <div class="indent"><h3>7.2.1 <a name="def-action-content-accept" id="def-action-content-accept">content-accept</a></h3>
      <p class="" style="">The <span class="strong">content-accept</span> action is used to accept a content-add action received from another party.</p>
    </div>
    <div class="indent"><h3>7.2.2 <a name="def-action-content-add" id="def-action-content-add">content-add</a></h3>
      <p class="" style="">The <span class="strong">content-add</span> action is used to add one or more new content definitions to the session. The sender MUST specify only the added content definition(s), not the added content definition(s) plus the existing content definition(s). Therefore it is the responsibility of the recipient to maintain a local copy of the current content definition(s). If the recipient wishes to include the new content definition in the session, it MUST send a content-accept action to the other party; if not, it MUST send a content-reject action to the other party.</p>
    </div>
    <div class="indent"><h3>7.2.3 <a name="def-action-content-modify" id="def-action-content-modify">content-modify</a></h3>
      <p class="" style="">The <span class="strong">content-modify</span> action is used to change the direction of an existing content definition through modification of the 'senders' attribute. If the recipient deems the directionality of a content-modify action to be unacceptable, it MAY reply with a contrary content-modify action, terminate the session, or simply refuse to send or accept application data in the new direction. In any case, the recipient MUST NOT send a content-accept action in response to the content-modify.</p>
    </div>
    <div class="indent"><h3>7.2.4 <a name="def-action-content-reject" id="def-action-content-reject">content-reject</a></h3>
      <p class="" style="">The <span class="strong">content-reject</span> action is used to reject a content-add action received from another party.</p>
    </div>
    <div class="indent"><h3>7.2.5 <a name="def-action-content-remove" id="def-action-content-remove">content-remove</a></h3>
      <p class="" style="">The <span class="strong">content-remove</span> action is used to remove one or more content definitions from the session. The sender MUST specify only the removed content definition(s), not the removed content definition(s) plus the remaining content definition(s). Therefore it is the responsibility of the recipient to maintain a local copy of the current content definition(s). Upon receiving a content-remove from the other party, the recipient MUST NOT send a content-accept and MUST NOT continue to negotiate the transport method related to that content definition or send application data related to that content definition.   [<a href="#nt-id2265152">15</a>]</p>
    </div>
    <div class="indent"><h3>7.2.6 <a name="def-action-description-info" id="def-action-description-info">description-info</a></h3>
      <p class="" style="">The <span class="strong">description-info</span> action is used to send informational hints about parameters related to the application type, such as the suggested height and width of a video display area or suggested configuration for an audio stream.</p>
    </div>
    <div class="indent"><h3>7.2.7 <a name="def-action-session-accept" id="def-action-session-accept">session-accept</a></h3>
      <p class="" style="">The <span class="strong">session-accept</span> action is used to definitively accept a session negotiation (implicitly this action also serves as a content-accept). A session-accept action indicates acceptance <span class="em">only</span> of the content definition(s) whose disposition type is "session" (the default value of the &lt;content/&gt; element's 'disposition' attribute), not any content definition(s) whose disposition type is something other than "session" (e.g., "early-session" for early media). In the session-accept stanza, the &lt;jingle/&gt; element MUST contain one or more &lt;content/&gt; elements, each of which MUST contain one &lt;description/&gt; element and one &lt;transport/&gt; element. The &lt;jingle/&gt; element SHOULD possess a 'responder' attribute that explicitly specifies the full JID of the responding entity; after sending acknowledgement of the session-accept, the initiator SHOULD send all future commmunications about this Jingle session to the JID provided in the 'responder' attribute and note the new JID in the user interface.</p>
    </div>
    <div class="indent"><h3>7.2.8 <a name="def-action-session-info" id="def-action-session-info">session-info</a></h3>
      <p class="" style="">The <span class="strong">session-info</span> action is used to send session-level information, such as a session ping or (for Jingle RTP sessions) a ringing message.</p>
    </div>
    <div class="indent"><h3>7.2.9 <a name="def-action-session-initiate" id="def-action-session-initiate">session-initiate</a></h3>
      <p class="" style="">The <span class="strong">session-initiate</span> action is used to request negotiation of a new Jingle session. When sending a session-initiate, the value of the &lt;content/&gt; element's 'disposition' attribute MUST be "session" (to be precise, if there are multiple &lt;content/&gt; elements then at least one MUST have a disposition of "session"); if this rule is violated, the responder MUST return a &lt;bad-request/&gt; error to the initiator.</p>
    </div>
    <div class="indent"><h3>7.2.10 <a name="def-action-session-terminate" id="def-action-session-terminate">session-terminate</a></h3>
      <p class="" style="">The <span class="strong">session-terminate</span> action is used to end an existing session.</p>
    </div>
    <div class="indent"><h3>7.2.11 <a name="def-action-transport-accept" id="def-action-transport-accept">transport-accept</a></h3>
      <p class="" style="">The <span class="strong">transport-accept</span> action is used to accept a transport-replace action received from another party.</p>
    </div>
    <div class="indent"><h3>7.2.12 <a name="def-action-transport-info" id="def-action-transport-info">transport-info</a></h3>
      <p class="" style="">The <span class="strong">transport-info</span> action is used to exchange transport candidates; it is mainly used in <span class="ref">XEP-0176</span> but might be used in other transport specifications.</p>
    </div>
    <div class="indent"><h3>7.2.13 <a name="def-action-transport-reject" id="def-action-transport-reject">transport-reject</a></h3>
      <p class="" style="">The <span class="strong">transport-reject</span> action is used to reject a transport-replace action received from another party.</p>
    </div>
    <div class="indent"><h3>7.2.14 <a name="def-action-transport-replace" id="def-action-transport-replace">transport-replace</a></h3>
      <p class="" style="">The <span class="strong">transport-replace</span> action is used to redefine a transport method, typically for fallback to a different method (e.g., changing from ICE-UDP to Raw UDP for a datagram transport, or changing from <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0065.html">SOCKS5 Bytestreams</a></span>  [<a href="#nt-id2265406">16</a>] to <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0047.html">In-Band Bytestreams</a></span>  [<a href="#nt-id2265432">17</a>] for a streaming transport). If the recipient wishes to use the new transport definition, it MUST send a transport-accept action to the other party; if not, it MUST send a transport-reject action to the other party.</p>
    </div>
    <div class="indent"><h3>7.2.15 <a name="def-action-ties" id="def-action-ties">Tie Breaking Related to Jingle Actions</a></h3>
      <p class="" style="">It is possible that two instances of certain actions can be sent at the same time in the context of an existing session, one by each party; for example, both parties might simulaneously attempt to send a content-add action. In all such cases, the action sent by the initiator MUST overrule the action sent by the responder; i.e., both parties MUST accept the action sent by the initiator and the initiator MUST return an &lt;conflict/&gt; error to the responder for the duplicate action, which SHOULD include a Jingle-specific condition of &lt;tie-break/&gt;.</p>
    <p class="caption"><a name="example-31" id="example-31"></a>Example 31. Initiator returns unexpected-request error</p><div class="indent"><pre>
&lt;iq from='romeo@montague.lit/orchard'
    id='add1'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;conflict xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;tie-break xmlns='urn:xmpp:jingle:errors:0'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    </div>
  </div>
  <div class="indent"><h3>7.3 <a name="def-content" id="def-content">Content Element</a></h3>
    <p class="" style="">The attributes of the &lt;content/&gt; element are as follows.</p>
    <div class="indent"><p class="caption"><a name="table-3" id="table-3"></a>Table 3: Attributes of Content Element</p><table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Attribute</th>
        <th colspan="" rowspan="">Definition</th>
        <th colspan="" rowspan="">Inclusion</th>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">creator</td>
        <td colspan="" rowspan="">Which party originally generated the content type (used to prevent race conditions regarding modifications); the defined values are "initiator" and "responder" (where the default is "initiator").</td>
        <td colspan="" rowspan="">REQUIRED</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">disposition</td>
        <td colspan="" rowspan="">How the content definition is to be interpreted by the recipient. The meaning of this attribute matches the "Content-Disposition" header as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc2183">RFC 2183</a></span>  [<a href="#nt-id2265603">18</a>] and applied to SIP by <span class="ref">RFC 3261</span>. The value of this attribute SHOULD be one of the values registered in the <span class="ref" style=""><a href="http://www.iana.org/assignments/mail-cont-disp">IANA Mail Content Disposition Values and Parameters Registry</a></span>  [<a href="#nt-id2265641">19</a>]. The default value of this attribute is "session".</td>
        <td colspan="" rowspan="">OPTIONAL</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">name</td>
        <td colspan="" rowspan="">A unique name or identifier for the content type according to the creator, which MAY have meaning to a human user in order to differentiate this content type from other content types (e.g., two content types containing video media could differentiate between "room-pan" and "slides").</td>
        <td colspan="" rowspan="">REQUIRED</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">senders</td>
        <td colspan="" rowspan="">Which parties in the session will be generating content; the allowable values are "initiator", "responder", or "both" (where the default is "both").</td>
        <td colspan="" rowspan="">RECOMMENDED</td>
      </tr>
    </table></div>
  </div>
  <div class="indent"><h3>7.4 <a name="def-reason" id="def-reason">Reason Element</a></h3>
    <p class="" style="">The structure of the &lt;reason/&gt; element is as follows.</p>
    <ul class="" style="">
      <li class="" style="">The &lt;reason/&gt; element MUST contain an element that provides machine-readable information about the condition that prompted the action.</li>
      <li class="" style="">The &lt;reason/&gt; element MAY contain a &lt;text/&gt; element that provides human-readable information about the reason for the action.</li>
      <li class="" style="">The &lt;reason/&gt; element MAY contain an element qualified by some other namespace that provides more detailed machine-readable information about the reason for the action.</li>
    </ul>
    <p class="" style="">The defined conditions are described in the following table.</p>
    <div class="indent"><p class="caption"><a name="table-4" id="table-4"></a>Table 4: Defined Conditions</p><table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Element</th>
        <th colspan="" rowspan="">Description</th>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;alternative-session/&gt;</td>
        <td colspan="" rowspan="">The party prefers to use an existing session with the peer rather than initiate a new session; the Jingle session ID of the alternative session SHOULD be provided as the XML character data of the &lt;sid/&gt; child.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;busy/&gt;</td>
        <td colspan="" rowspan="">The party is busy and cannot accept a session.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;cancel/&gt;</td>
        <td colspan="" rowspan="">The initiator wishes to formally cancel the session initiation request.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;connectivity-error/&gt;</td>
        <td colspan="" rowspan="">The action is related to connectivity problems.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;decline/&gt;</td>
        <td colspan="" rowspan="">The party wishes to formally decline the session.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;expired/&gt;</td>
        <td colspan="" rowspan="">The session length has exceeded a pre-defined time limit (e.g., a meeting hosted at a conference service).</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;general-error/&gt;</td>
        <td colspan="" rowspan="">The action is related to a non-specific application error.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;gone/&gt;</td>
        <td colspan="" rowspan="">The entity is going offline or is no longer available.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;media-error/&gt;</td>
        <td colspan="" rowspan="">The action is related to media processing problems.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;security-error/&gt;</td>
        <td colspan="" rowspan="">The action is related to a violation of local security policies.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;success/&gt;</td>
        <td colspan="" rowspan="">The action is generated during the normal course of state management and does not reflect any error.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;timeout/&gt;</td>
        <td colspan="" rowspan="">A request has not been answered so the sender is timing out the request.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;unsupported-applications/&gt;</td>
        <td colspan="" rowspan="">The party supports none of the offered application types.</td>
      </tr>
      <tr class="body">
        <td colspan="" rowspan="">&lt;unsupported-transports/&gt;</td>
        <td colspan="" rowspan="">The party supports none of the offered transport methods.</td>
      </tr>
    </table></div>
  </div>
  <div class="indent"><h3>7.5 <a name="def-thread" id="def-thread">Thread Element</a></h3>
    <p class="" style="">The syntax and semantics of the &lt;thread/&gt; element exactly matches that of the &lt;thread/&gt; element for the &lt;message/&gt; stanza (qualified by the 'jabber:client' namespace) as defined in <span class="ref" style=""><a href="http://tools.ietf.org/html/rfc3921">XMPP IM</a></span>  [<a href="#nt-id2266146">20</a>]. It is used to associate a Jingle session or sessions with an ongoing conversation, so that user interfaces with the ability to present multiple interactions in the same window can show an association between the conversation and the Jingle session(s).</p>
  </div>
<h2>8.
       <a name="errors" id="errors">Error Handling</a></h2>
  <p class="" style="">The Jingle-specific error conditions are as follows. These condition elements are qualified by the 'urn:xmpp:jingle:errors:0' namespace (see <a href="#registrar-versioning">Namespace Versioning</a> regarding the possibility of incrementing the version number).</p>
  <div class="indent"><p class="caption"><a name="table-5" id="table-5"></a>Table 5: Error Conditions</p><table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Jingle Condition</th>
      <th colspan="" rowspan="">XMPP Condition</th>
      <th colspan="" rowspan="">Description</th>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">&lt;out-of-order/&gt;</td>
      <td colspan="" rowspan="">&lt;unexpected-request/&gt;</td>
      <td colspan="" rowspan="">The request cannot occur at this point in the state machine (e.g., session-initiate after session-accept).</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">&lt;tie-break/&gt;</td>
      <td colspan="" rowspan="">&lt;conflict/&gt;</td>
      <td colspan="" rowspan="">The request is rejected because it was sent while the initiator was awaiting a reply on a similar request.</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">&lt;unknown-session/&gt;</td>
      <td colspan="" rowspan="">&lt;item-not-found/&gt;</td>
      <td colspan="" rowspan="">The 'sid' attribute specifies a session that is unknown to the recipient (e.g., no longer live according to the recipient's state machine because the recipient previously terminated the session).</td>
    </tr>
    <tr class="body">
      <td colspan="" rowspan="">&lt;unsupported-info/&gt;</td>
      <td colspan="" rowspan="">&lt;feature-not-implemented/&gt;</td>
      <td colspan="" rowspan="">The recipient does not support the informational payload of a session-info action.</td>
    </tr>
  </table></div>
<h2>9.
       <a name="support" id="support">Determining Support</a></h2>
  <p class="" style="">If an entity supports Jingle, it MUST advertise that fact by returning a feature of "urn:xmpp:jingle:0" (see <a href="#registrar-versioning">Namespace Versioning</a> regarding the possibility of incrementing the version number) in response to a <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</a></span>  [<a href="#nt-id2266388">21</a>] information request. The response MUST also include features for the application formats and transport methods supported by the responding entity, as described in the relevant specifications.</p>
  <p class="caption"><a name="example-32" id="example-32"></a>Example 32. Service Discovery Information Request</p><div class="indent"><pre>
&lt;iq from='kingclaudius@shakespeare.lit/castle'
    id='disco1'
    to='laertes@shakespeare.lit/castle'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="caption"><a name="example-33" id="example-33"></a>Example 33. Service Discovery Information Response</p><div class="indent"><pre>
&lt;iq from='laertes@shakespeare.lit/castle'
    id='disco1'
    to='kingclaudius@shakespeare.lit/castle'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;feature var='urn:xmpp:jingle:0'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
  </pre></div>
  <p class="" style="">In order for an application to determine whether an entity supports this protocol, where possible it SHOULD use the dynamic, presence-based profile of service discovery defined in <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-id2266443">22</a>]. However, if an application has not received entity capabilities information from an entity, it SHOULD use explicit service discovery instead.</p>
<h2>10.
       <a name="conformance" id="conformance">Conformance by Using Protocols</a></h2>
  <div class="indent"><h3>10.1 <a name="conformance-apps" id="conformance-apps">Application Formats</a></h3>
    <p class="" style="">A document that specifies a Jingle application format (e.g., RTP sessions) MUST define:</p>
    <ol start="" class="" style="">
      <li class="" style="">How successful application format negotiation occurs.</li>
      <li class="" style="">A &lt;description/&gt; element and associated semantics for representing the application format.</li>
      <li class="" style="">If and how the application format can be mapped to the Session Description Protocol, including the appropriate SDP media type (see Section 8.2.1 of <span class="ref">RFC 4566</span>).</li>
      <li class="" style="">Whether the media data for the application format shall be sent over a streaming transport method or a datagram transport method (or, if both, which is preferred).</li>
      <li class="" style="">Exactly how the media data is to be sent and received over a streaming or datagram transport.</li>
    </ol>
  </div>
  <div class="indent"><h3>10.2 <a name="conformance-transports" id="conformance-transports">Transport Methods</a></h3>
    <p class="" style="">A document that specifies a Jingle transport method (e.g., raw UDP) MUST define:</p>
    <ol start="" class="" style="">
      <li class="" style="">How successful transport negotiation occurs.</li>
      <li class="" style="">A &lt;transport/&gt; element and associated semantics for representing the transport method.</li>
      <li class="" style="">Whether the transport is a streaming method or a datagram method.</li>
      <li class="" style="">If and how the transport handles "components" (e.g., for the Real Time Control Protocol).</li>
    </ol>
  </div>
<h2>11.
       <a name="security" id="security">Security Considerations</a></h2>
  <div class="indent"><h3>11.1 <a name="security-dos" id="security-dos">Denial of Service</a></h3>
    <p class="" style="">Jingle sessions can be resource-intensive. Therefore, it is possible to launch a denial-of-service attack against an entity by burdening it with too many Jingle sessions. Care MUST be taken to accept sessions only from known entities and only if the entity's device is able to process such sessions.</p>
  </div>
  <div class="indent"><h3>11.2 <a name="security-gateways" id="security-gateways">Communication Through Gateways</a></h3>
    <p class="" style="">Jingle communications can be enabled through gateways to non-XMPP networks, whose security characteristics can be quite different from those of XMPP networks. (For example, on some SIP networks authentication is optional and "from" addresses can be easily forged.) Care MUST be taken in communicating through such gateways.</p>
  </div>
  <div class="indent"><h3>11.3 <a name="security-info" id="security-info">Information Exposure</a></h3>
    <p class="" style="">Mere negotiation of a Jingle session can expose sensitive information about the parties (e.g., IP addresses). Care MUST be taken in communicating such information, and end-to-end encryption SHOULD be used if the parties do not trust the intermediate servers or gateways.</p>
  </div>
  <div class="indent"><h3>11.4 <a name="security-redirect" id="security-redirect">Redirection</a></h3>
    <p class="" style="">The 'initiator' and 'responder' attributes can be used to redirect a session from one JID to anther JID (i.e., the 'initiator' or 'responder' attribute might not match the 'from' or 'to' attribute of the sender). An application SHOULD NOT accept the redirection unless the bare JIDs match (i.e., the session is being redirected from one authorized resource to another authorized resource associated with the same account).</p>
  </div>
<h2>12.
       <a name="iana" id="iana">IANA Considerations</a></h2>
  <p class="" style="">This document requires no interaction with the <span class="ref" style=""><a href="http://www.iana.org/">Internet Assigned Numbers Authority (IANA)</a></span>  [<a href="#nt-id2266732">23</a>].</p>
<h2>13.
       <a name="registrar" id="registrar">XMPP Registrar Considerations</a></h2>
  <div class="indent"><h3>13.1 <a name="registrar-ns" id="registrar-ns">Protocol Namespaces</a></h3>
    <p class="" style="">This specification defines the following XML namespaces:</p>
    <ul class="" style="">
      <li class="" style="">urn:xmpp:jingle:0</li>
      <li class="" style="">urn:xmpp:jingle:errors:0</li>
    </ul>
    <p class="" style="">Upon advancement of this specification from a status of Experimental to a status of Draft, the <span class="ref" style=""><a href="http://xmpp.org/registrar/">XMPP Registrar</a></span>  [<a href="#nt-id2266818">24</a>] shall add the foregoing namespaces to the registry located at &lt;<a href="http://xmpp.org/registrar/namespaces.html">http://xmpp.org/registrar/namespaces.html</a>&gt;, as described in Section 4 of <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0053.html">XMPP Registrar Function</a></span>  [<a href="#nt-id2266861">25</a>].</p>
  </div>
  <div class="indent"><h3>13.2 <a name="registrar-versioning" id="registrar-versioning">Namespace Versioning</a></h3>
    <p class="" style="">If the protocol defined in this specification undergoes a revision that is not fully backwards-compatible with an older version, the XMPP Registrar shall increment the protocol version number found at the end of the XML namespaces defined herein, as described in Section 4 of <span class="ref">XEP-0053</span>.</p>
  </div>
  <div class="indent"><h3>13.3 <a name="registrar-apps" id="registrar-apps">Jingle Application Formats Registry</a></h3>
    <p class="" style="">The XMPP Registrar shall maintain a registry of Jingle application formats. All application format registrations shall be defined in separate specifications (not in this document). Application types defined within the XEP series MUST be registered with the XMPP Registrar, resulting in protocol URNs of the form "urn:xmpp:jingle:app:name:X" (where "name" is the registered name of the application format and "X" is a non-negative integer).</p>
    <p class="" style="">In order to submit new values to this registry, the registrant shall define an XML fragment of the following form and either include it in the relevant XMPP Extension Protocol or send it to the email address &lt;registrar@xmpp.org&gt;:</p>
    <p class="caption"></p><div class="indent"><pre>
&lt;application&gt;
  &lt;name&gt;The name of the application format.&lt;/name&gt;
  &lt;desc&gt;A natural-language summary of the application format.&lt;/desc&gt;
  &lt;transport&gt;
    Whether the media can be sent over a "streaming" transport, 
    a "datagram" transport, or "both".
  &lt;/transport&gt;
  &lt;doc&gt;The document in which the application format is specified.&lt;/doc&gt;
&lt;/application&gt;
    </pre></div>
  </div>
  <div class="indent"><h3>13.4 <a name="registrar-transports" id="registrar-transports">Jingle Transport Methods Registry</a></h3>
    <p class="" style="">The XMPP Registrar shall maintain a registry of Jingle transport methods. All transport method registrations shall be defined in separate specifications (not in this document). Transport methods defined within the XEP series MUST be registered with the XMPP Registrar, resulting in protocol URNs of the form "urn:xmpp:jingle:transport:name" (where "name" is the registered name of the transport method).</p>
    <p class="" style="">In order to submit new values to this registry, the registrant shall define an XML fragment of the following form and either include it in the relevant XMPP Extension Protocol or send it to the email address &lt;registrar@xmpp.org&gt;:</p>
    <p class="caption"></p><div class="indent"><pre>
&lt;transport&gt;
  &lt;name&gt;The name of the transport method.&lt;/name&gt;
  &lt;desc&gt;A natural-language summary of the transport method.&lt;/desc&gt;
  &lt;type&gt;
    Whether the transport method can be "streaming", "datagram", 
    or "both".
  &lt;/type&gt;
  &lt;doc&gt;The document in which this transport method is specified.&lt;/doc&gt;
&lt;/transport&gt;
    </pre></div>
  </div>
<h2>14.
       <a name="schema" id="schema">XML Schemas</a></h2>
  <div class="indent"><h3>14.1 <a name="schema-jingle" id="schema-jingle">Jingle</a></h3>
    <p class="caption"></p><div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:jingle:0'
    xmlns='urn:xmpp:jingle:0'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='jingle'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name='content' 
                    type='contentElementType'
                    minOccurs='0' 
                    maxOccurs='unbounded'/&gt;
        &lt;xs:element name='reason' 
                    type='reasonElementType'
                    minOccurs='0' 
                    maxOccurs='1'/&gt;
        &lt;xs:element name='thread' 
                    type='threadElementType'
                    minOccurs='0' 
                    maxOccurs='1'/&gt;
        &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='unbounded'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name='action' use='required'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base='xs:NCName'&gt;
            &lt;xs:enumeration value='content-accept'/&gt;
            &lt;xs:enumeration value='content-add'/&gt;
            &lt;xs:enumeration value='content-modify'/&gt;
            &lt;xs:enumeration value='content-reject'/&gt;
            &lt;xs:enumeration value='content-remove'/&gt;
            &lt;xs:enumeration value='description-info'/&gt;
            &lt;xs:enumeration value='session-accept'/&gt;
            &lt;xs:enumeration value='session-info'/&gt;
            &lt;xs:enumeration value='session-initiate'/&gt;
            &lt;xs:enumeration value='session-terminate'/&gt;
            &lt;xs:enumeration value='transport-accept'/&gt;
            &lt;xs:enumeration value='transport-info'/&gt;
            &lt;xs:enumeration value='transport-reject'/&gt;
            &lt;xs:enumeration value='transport-replace'/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
      &lt;xs:attribute name='initiator' type='xs:string' use='required'/&gt;
      &lt;xs:attribute name='responder' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='sid' type='xs:NMTOKEN' use='required'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:complexType name='alternativeSessionElementType'&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name='sid'
                  minOccurs='0'
                  maxOcccurs='1'
                  type='xs:NMTOKEN'/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name='contentElementType'&gt;
    &lt;xs:sequence&gt;
      &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='unbounded'/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name='creator'
                  use='required'
                  default='initiator'&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base='xs:NCName'&gt;
          &lt;xs:enumeration value='initiator'&gt;
          &lt;xs:enumeration value='responder'/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name='disposition'
                  use='optional'
                  type='xs:NCName'
                  default='session'/&gt;
    &lt;xs:attribute name='name'
                  use='required'
                  type='xs:string'/&gt;
    &lt;xs:attribute name='senders'
                  use='optional'
                  default='both'&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base='xs:NCName'&gt;
          &lt;xs:enumeration value='both'&gt;
          &lt;xs:enumeration value='initiator'&gt;
          &lt;xs:enumeration value='responder'/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name='reasonElementType'&gt;
    &lt;xs:sequence&gt;
      &lt;xs:choice&gt;
        &lt;xs:element name='alternative-session' 
                    type='alternativeSessionElementType'/&gt;
        &lt;xs:element name='busy' type='empty'/&gt;
        &lt;xs:element name='cancel' type='empty'/&gt;
        &lt;xs:element name='connectivity-error' type='empty'/&gt;
        &lt;xs:element name='decline' type='empty'/&gt;
        &lt;xs:element name='expired' type='empty'/&gt;
        &lt;xs:element name='general-error' type='empty'/&gt;
        &lt;xs:element name='gone' type='empty'/&gt;
        &lt;xs:element name='media-error' type='empty'/&gt;
        &lt;xs:element name='security-error' type='empty'/&gt;
        &lt;xs:element name='success' type='empty'/&gt;
        &lt;xs:element name='timeout' type='empty'/&gt;
        &lt;xs:element name='unsupported-applications' type='empty'/&gt;
        &lt;xs:element name='unsupported-transports' type='empty'/&gt;
      &lt;/xs:choice&gt;
      &lt;xs:element name='text' type='xs:string' minOccurs='0' maxOccurs='1'/&gt;
      &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='1'/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name='threadElementType'&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base='xs:NMTOKEN'&gt;
        &lt;xs:attribute name='parent'
                      type='xs:NMTOKEN'
                      use='optional'/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
  <div class="indent"><h3>14.2 <a name="schema-errors" id="schema-errors">Jingle Errors</a></h3>
    <p class="caption"></p><div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:jingle:errors:0'
    xmlns='urn:xmpp:jingle:errors:0'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='out-of-order' type='empty'/&gt;
  &lt;xs:element name='unknown-session' type='empty'/&gt;
  &lt;xs:element name='unsupported-info' type='empty'/&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
<h2>15.
       <a name="history" id="history">History</a></h2>
  <p class="" style="">Until Jingle was developed, there existed no widely-adopted standard for initiating and managing peer-to-peer interactions between XMPP entities. Although several large service providers and Jabber client teams had written and implemented their own proprietary XMPP extensions for peer-to-peer signalling (usually only for voice), those technologies were not open and did not always take into account requirements to interoperate with SIP-based technologies. The only existing open protocol was <span class="ref" style=""><a href="http://xmpp.org/extensions/xep-0111.html">A Transport for Initiating and Negotiating Sessions</a></span>  [<a href="#nt-id2267156">26</a>], which made it possible to initiate and manage peer-to-peer sessions, but which did not provide enough of the key signalling semantics to be easily implemented in Jabber/XMPP clients.  [<a href="#nt-id2267138">27</a>]</p>
  <p class="" style="">The result was an unfortunate fragmentation within the XMPP community regarding signalling protocols. Essentially, there were two possible approaches to solving the problem:</p>
  <ol start="" class="" style="">
    <li class="" style="">Recommend that all client developers implement a dual-stack (XMPP + SIP) solution.</li>
    <li class="" style="">Define a full-featured protocol for XMPP signalling.</li>
  </ol>
  <p class="" style="">Implementation experience indicates that a dual-stack approach might not be feasible on all the computing platforms for which Jabber clients have been written, or even desirable on platforms where it is feasible.  [<a href="#nt-id2267220">28</a>] Therefore, it seemed reasonable to define an XMPP signalling protocol that could provide the necessary session management semantics while also making it relatively straightforward to interoperate with existing Internet standards.</p>
  <p class="" style="">As a result of feedback received on <span class="ref">XEP-0111</span>, the original authors of this document (Joe Hildebrand and Peter Saint-Andre) began to define such a signalling protocol, code-named Jingle. Upon communication with members of the Google Talk team,  [<a href="#nt-id2267242">29</a>] it was discovered that the emerging Jingle approach was conceptually (and even syntactically) quite similar to the signalling protocol used in the Google Talk application. Therefore, in the interest of interoperability and adoption, we decided to harmonize the two approaches. The signalling protocol specified herein is, therefore, substantially equivalent to the original Google Talk protocol, with several adjustments based on feedback received from implementors as well as for publication by the XMPP Standards Foundation.</p>
<h2>16.
       <a name="ack" id="ack">Acknowledgements</a></h2>
  <p class="" style="">The authors would like to thank Rohan Mahy for his valuable input on early versions of the Jingle specifications. Thiago Camargo, Diana Cionoiu, Olivier Crête, Dafydd Harries, Antti Ijäs, Tim Julien, Lauri Kaila, Justin Karneges, Jussi Laako, Steffen Larsen, Dirk Meyer, Anthony Minessale, Akito Nozaki, Matt O'Gorman, Mike Ruprecht, Rob Taylor, Matt Tucker, Justin Uberti, Saku Vainio, Brian West, Jeff Williams, and others have also provided helpful input. Thanks also to those who have commented on the <span class="ref" style=""><a href="http://mail.jabber.org/mailman/listinfo/standards/">Standards SIG</a></span>  [<a href="#nt-id2267331">30</a>] and Jingle  [<a href="#nt-id2267306">31</a>] mailing lists.</p>
<hr /><a name="appendices" id="appendices"></a><h2>Appendices</h2><hr /><a name="appendix-docinfo" id="appendix-docinfo"></a><h3>Appendix A: Document Information</h3><p class="indent">
            Series: <a href="http://www.xmpp.org/extensions/">XEP</a><br />
            Number: 0166<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Proposed">Proposed</a><br />
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br />
            Version: 0.33<br />
            Last Updated: 2008-12-18<br />
                Approving Body: <a href="http://www.xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: jingle<br />
              Source Control: 
                <a class="standardsButton" href="http://svn.xmpp.org:18080/browse/XMPP/trunk/extensions/xep-0166.xml">HTML</a> 
                <a class="standardsButton" href="http://svn.xmpp.org:18080//changelog/~rss/XMPP/trunk/extensions/xep-0166.xml/rss.xml">RSS</a></p><hr /><a name="appendix-authorinfo" id="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3><div class="indent"><h3>Scott Ludwig</h3><p class="indent">
        Email:
        <a href="mailto:scottlu@google.com">scottlu@google.com</a><br />
        JabberID: 
        <a href="xmpp:scottlu@google.com">scottlu@google.com</a><br /></p><h3>Joe Beda</h3><p class="indent">
        Email:
        <a href="mailto:jbeda@google.com">jbeda@google.com</a><br />
        JabberID: 
        <a href="xmpp:jbeda@google.com">jbeda@google.com</a><br /></p><h3>Peter Saint-Andre</h3><p class="indent">
        JabberID: 
        <a href="xmpp:stpeter@jabber.org">stpeter@jabber.org</a><br />
        URI: 
        <a href="https://stpeter.im/">https://stpeter.im/</a><br /></p><h3>Robert McQueen</h3><p class="indent">
        Email:
        <a href="mailto:robert.mcqueen@collabora.co.uk">robert.mcqueen@collabora.co.uk</a><br />
        JabberID: 
        <a href="xmpp:robert.mcqueen@collabora.co.uk">robert.mcqueen@collabora.co.uk</a><br /></p><h3>Sean Egan</h3><p class="indent">
        Email:
        <a href="mailto:seanegan@google.com">seanegan@google.com</a><br />
        JabberID: 
        <a href="xmpp:seanegan@google.com">seanegan@google.com</a><br /></p><h3>Joe Hildebrand</h3><p class="indent">
        Email:
        <a href="mailto:jhildebrand@jabber.com">jhildebrand@jabber.com</a><br />
        JabberID: 
        <a href="xmpp:hildjj@jabber.org">hildjj@jabber.org</a><br /></p></div><hr /><a name="appendix-legal" id="appendix-legal"></a><h3>Appendix C: Legal Notices</h3><div class="indent"><h4>Copyright</h4>This XMPP Extension Protocol is copyright (c) 1999 - 2009 by the <a href="http://xmpp.org/">XMPP Standards Foundation</a> (XSF).<h4>Permissions</h4>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h4>Disclaimer of Warranty</h4><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. In no event shall the XMPP Standards Foundation or the authors of this Specification be liable for any claim, damages, or other liability, whether in an action of contract, tort, or otherwise, arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification. ##</span><h4>Limitation of Liability</h4>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising out of the use or inability to use the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h4>IPR Conformance</h4>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which may be found at &lt;<a href="http://xmpp.org/extensions/ipr-policy.shtml">http://xmpp.org/extensions/ipr-policy.shtml</a>&gt; or obtained by writing to XSF, P.O. Box 1641, Denver, CO 80201 USA).</div><hr /><a name="appendix-xmpp" id="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><hr /><a name="appendix-discuss" id="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3><p class="indent">There exists a special venue for discussion related to the technology described in this document: the &lt;<a href="http://mail.jabber.org/mailman/listinfo/jingle">jingle@xmpp.org</a>&gt; mailing list.</p><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata may be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><hr /><a name="appendix-conformance" id="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><a name="appendix-notes" id="appendix-notes"></a><h3>Appendix G: Notes</h3><div class="indent"><p><a name="nt-id2262348" id="nt-id2262348">1</a>. RFC 3550: RTP: A Transport Protocol for Real-Time Applications &lt;<a href="http://tools.ietf.org/html/rfc3550">http://tools.ietf.org/html/rfc3550</a>&gt;.</p><p><a name="nt-id2262374" id="nt-id2262374">2</a>. RFC 768: User Datagram Protocol &lt;<a href="http://tools.ietf.org/html/rfc0768">http://tools.ietf.org/html/rfc0768</a>&gt;.</p><p><a name="nt-id2262402" id="nt-id2262402">3</a>. Interactive Connectivity Establishment (ICE): A Methodology for Network Address Translator (NAT) Traversal for Offer/Answer Protocols &lt;<a href="http://tools.ietf.org/html/draft-ietf-mmusic-ice">http://tools.ietf.org/html/draft-ietf-mmusic-ice</a>&gt;. Work in progress.</p><p><a name="nt-id2262440" id="nt-id2262440">4</a>. XEP-0167: Jingle RTP Sessions &lt;<a href="http://xmpp.org/extensions/xep-0167.html">http://xmpp.org/extensions/xep-0167.html</a>&gt;.</p><p><a name="nt-id2262462" id="nt-id2262462">5</a>. RFC 3261: Session Initiation Protocol (SIP) &lt;<a href="http://tools.ietf.org/html/rfc3261">http://tools.ietf.org/html/rfc3261</a>&gt;.</p><p><a name="nt-id2262532" id="nt-id2262532">6</a>. Naturally, more complex scenarios are possible; such scenarios are described in other specifications, such as <span class="ref">XEP-0167</span> for voice and video chat.</p><p><a name="nt-id2262694" id="nt-id2262694">7</a>. XEP-0176: Jingle ICE-UDP Transport Method &lt;<a href="http://xmpp.org/extensions/xep-0176.html">http://xmpp.org/extensions/xep-0176.html</a>&gt;.</p><p><a name="nt-id2262974" id="nt-id2262974">8</a>. RFC 4566: SDP: Session Description Protocol &lt;<a href="http://tools.ietf.org/html/rfc4566">http://tools.ietf.org/html/rfc4566</a>&gt;.</p><p><a name="nt-id2263011" id="nt-id2263011">9</a>. XEP-0234: Jingle File Transfer &lt;<a href="http://xmpp.org/extensions/xep-0234.html">http://xmpp.org/extensions/xep-0234.html</a>&gt;.</p><p><a name="nt-id2263047" id="nt-id2263047">10</a>. XEP-0177: Jingle Raw UDP Transport Method &lt;<a href="http://xmpp.org/extensions/xep-0177.html">http://xmpp.org/extensions/xep-0177.html</a>&gt;.</p><p><a name="nt-id2263089" id="nt-id2263089">11</a>. ITU Recommendation H.323: Packet-based Multimedia Communications Systems (September 1999).</p><p><a name="nt-id2263105" id="nt-id2263105">12</a>. Interworking between the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP): Media Sessions &lt;<a href="http://tools.ietf.org/html/draft-saintandre-sip-xmpp-media">http://tools.ietf.org/html/draft-saintandre-sip-xmpp-media</a>&gt; (work in progress).</p><p><a name="nt-id2264142" id="nt-id2264142">13</a>. RFC 3921: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.</p><p><a name="nt-id2264983" id="nt-id2264983">14</a>. See &lt;<a href="http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken">http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken</a>&gt;</p><p><a name="nt-id2265152" id="nt-id2265152">15</a>. If the content-remove results in zero content definitions for the session, the entity that receives the content-remove SHOULD send a session-terminate action to the other party (since a session with no content definitions is void).</p><p><a name="nt-id2265406" id="nt-id2265406">16</a>. XEP-0065: SOCKS5 Bytestreams &lt;<a href="http://xmpp.org/extensions/xep-0065.html">http://xmpp.org/extensions/xep-0065.html</a>&gt;.</p><p><a name="nt-id2265432" id="nt-id2265432">17</a>. XEP-0047: In-Band Bytestreams &lt;<a href="http://xmpp.org/extensions/xep-0047.html">http://xmpp.org/extensions/xep-0047.html</a>&gt;.</p><p><a name="nt-id2265603" id="nt-id2265603">18</a>. RFC 2183: Communicating Presentation Information in Internet Messages: The Content-Disposition Header Field &lt;<a href="http://tools.ietf.org/html/rfc2183">http://tools.ietf.org/html/rfc2183</a>&gt;.</p><p><a name="nt-id2265641" id="nt-id2265641">19</a>. IANA registry of Mail Content Disposition Values and Parameters &lt;<a href="http://www.iana.org/assignments/mail-cont-disp">http://www.iana.org/assignments/mail-cont-disp</a>&gt;.</p><p><a name="nt-id2266146" id="nt-id2266146">20</a>. RFC 3921: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</a>&gt;.</p><p><a name="nt-id2266388" id="nt-id2266388">21</a>. XEP-0030: Service Discovery &lt;<a href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</a>&gt;.</p><p><a name="nt-id2266443" id="nt-id2266443">22</a>. XEP-0115: Entity Capabilities &lt;<a href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</a>&gt;.</p><p><a name="nt-id2266732" id="nt-id2266732">23</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p><p><a name="nt-id2266818" id="nt-id2266818">24</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the XMPP Standards Foundation. For further information, see &lt;<a href="http://xmpp.org/registrar/">http://xmpp.org/registrar/</a>&gt;.</p><p><a name="nt-id2266861" id="nt-id2266861">25</a>. XEP-0053: XMPP Registrar Function &lt;<a href="http://xmpp.org/extensions/xep-0053.html">http://xmpp.org/extensions/xep-0053.html</a>&gt;.</p><p><a name="nt-id2267156" id="nt-id2267156">26</a>. XEP-0111: A Transport for Initiating and Negotiating Sessions &lt;<a href="http://xmpp.org/extensions/xep-0111.html">http://xmpp.org/extensions/xep-0111.html</a>&gt;.</p><p><a name="nt-id2267138" id="nt-id2267138">27</a>. It is true that TINS made it relatively easy to implement an XMPP-to-SIP gateway; however, in line with the long-time Jabber philosophy of "simple clients, complex servers", it would be better to force complexity onto the server-side gateway and to keep the client as simple as possible.</p><p><a name="nt-id2267220" id="nt-id2267220">28</a>. For example, one large ISP decided to switch to a pure XMPP approach after having implemented and deployed a dual-stack client for several years.</p><p><a name="nt-id2267242" id="nt-id2267242">29</a>. Google Talk is an instant messaging and voice/video chat service and client provided by Google; see &lt;<a href="http://www.google.com/talk/">http://www.google.com/talk/</a>&gt;.</p><p><a name="nt-id2267331" id="nt-id2267331">30</a>. The Standards SIG is a standing Special Interest Group devoted to development of XMPP Extension Protocols. The discussion list of the Standards SIG is the primary venue for discussion of XMPP protocol extensions, as well as for announcements by the XMPP Extensions Editor and XMPP Registrar. To subscribe to the list or view the list archives, visit &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards/">http://mail.jabber.org/mailman/listinfo/standards/</a>&gt;.</p><p><a name="nt-id2267306" id="nt-id2267306">31</a>. Before this specification was formally accepted by the XMPP Standards Foundation as an XMPP Extension Protocol, it was discussed on the semi-private &lt;jingle@jabber.org&gt; mailing list. This list has since been resurrected as a special-purpose venue for discussion of Jingle protocols and implementation; interested developers can subscribe and access the archives at at &lt;<a href="http://mail.jabber.org/mailman/listinfo/jingle/">http://mail.jabber.org/mailman/listinfo/jingle/</a>&gt;.</p></div><hr /><a name="appendix-revs" id="appendix-revs"></a><h3>Appendix H: Revision History</h3><div class="indent"><h4>Version 0.33 (2008-12-18)</h4><div class="indent">
      <ul class="" style="">
        <li class="" style="">Clarified handling of session timeouts.</li>
        <li class="" style="">Added description-info action.</li>
        <li class="" style="">Added cancel, expired, gone, security-error, and timeout reason conditions.</li>
        <li class="" style="">Changed XMPP error condition for Jingle &lt;unknown-session/&gt; condition from &lt;bad-request/&gt; to &lt;item-not-found/&gt;.</li>
        <li class="" style="">Changed XMPP error condition for Jingle tie breaks from &lt;unexpected-request/&gt; to &lt;conflict/&gt; and defined Jingle-specific condition of &lt;tie-break/&gt;.</li>
        <li class="" style="">Corrected schema.</li>
      </ul>
     (psa)
    </div><h4>Version 0.32 (2008-10-07)</h4><div class="indent"><p class="" style="">Added content-reject action to mirror content-accept for replies to content-add; also added transport-reject action to mirror transport-accept for replies to transport-replace.</p> (psa)
    </div><h4>Version 0.31 (2008-09-25)</h4><div class="indent"><p class="" style="">Added disposition attribute to content element for mapping to SIP Content-Disposition header.</p> (psa)
    </div><h4>Version 0.30 (2008-09-23)</h4><div class="indent">
      <ul class="" style="">
        <li class="" style="">Allowed content-add in PENDING state.</li>
        <li class="" style="">Clarified that session-accept action accepts only the content definition(s) in the session-initiate.</li>
        <li class="" style="">Added optional thread element.</li>
        <li class="" style="">Clarified tie breaks for transport-replace.</li>
        <li class="" style="">Modified namespaces to incorporate namespace versioning.</li>
        <li class="" style="">Cleaned up XML schemas.</li>
      </ul>
     (ram/psa)
    </div><h4>Version 0.29 (2008-07-31)</h4><div class="indent">
      <ul class="" style="">
        <li class="" style="">Changed "reliable" vs. "lossy" to "streaming" vs. "datagram", since reliability or dependability is orthogonal to the streaming nature of the transport.</li>
        <li class="" style="">Deleted the "content-remove" action.</li>
        <li class="" style="">Added "transport-replace" action (answered by "transport-accept").</li>
        <li class="" style="">Removed &lt;condition/&gt; element as container for Jingle condition elements inside &lt;reason/&gt;, since it introduced an unnecessary layer of indirection.</li>
        <li class="" style="">Modified state machine to allow content removal during PENDING state.</li>
        <li class="" style="">Noted that a session can have more than one content instance of the same type.</li>
        <li class="" style="">Noted that the 'name' attribute is unique to a creator.</li>
        <li class="" style="">Changed examples to once again use voice chat instead of file transfer.</li>
      </ul>
     (psa/ram)
    </div><h4>Version 0.28 (2008-06-16)</h4><div class="indent"><p class="" style="">Modified state machine to allow content-replace during PENDING state for more seamless handling of fallback scenarios.</p> (psa)
    </div><h4>Version 0.27 (2008-06-04)</h4><div class="indent"><p class="" style="">Updated examples to track changes to XEP-0167 and retraction of XEP-0180; corrected definition of name attribute to allow semantic meaning.</p> (psa)
    </div><h4>Version 0.26 (2008-05-28)</h4><div class="indent"><p class="" style="">Corrected several errors in the state diagrams.</p> (psa)
    </div><h4>Version 0.25 (2008-02-29)</h4><div class="indent"><p class="" style="">More clearly specified the content-replace action (essentially similar to content-add); specified that content-accept shall be sent in response to content-replace; removed content-modify and content-accept from PENDING state; adjusted text regarding initial session negotiation.</p> (psa)
    </div><h4>Version 0.24 (2008-02-28)</h4><div class="indent"><p class="" style="">Added content-replace action; modified reasoncode and reasontext to use elements instead of attributes; added sid element to handle alternative-session condition; modified examples to use file transfer instead of voice chat; moved profile element to XEP-0167 and XEP-0180.</p> (ram/psa)
    </div><h4>Version 0.23 (2008-01-11)</h4><div class="indent"><p class="" style="">Removed content-accept after content-remove; removed errors for unsupported-content and unsupported-transports since they are handled via session-terminate; clarified handling of responder attribute.</p> (psa)
    </div><h4>Version 0.22 (2007-12-06)</h4><div class="indent"><p class="" style="">Modified session flows for busy, unsupported application formats, and unsupported transport methods to enable separation between Jingle core and distinct modules for applications and transports; moved resource determination recommendations to XEP-208.</p> (psa)
    </div><h4>Version 0.21 (2007-11-27)</h4><div class="indent"><p class="" style="">Further editorial review.</p> (psa)
    </div><h4>Version 0.20 (2007-11-15)</h4><div class="indent"><p class="" style="">Editorial review and consistency check; moved voice chat scenarios to XEP-0167.</p> (psa)
    </div><h4>Version 0.19 (2007-11-13)</h4><div class="indent"><p class="" style="">Added scenario for handling of busy state, including Jingle-specific error code and modified error flow (no longer an instance of decline).</p> (psa)
    </div><h4>Version 0.18 (2007-11-08)</h4><div class="indent"><p class="" style="">Added scenarios for various session flows; clarified handling of content-add, content-modify, and content-remove actions; clarified rules for codec priority.</p> (psa)
    </div><h4>Version 0.17 (2007-06-20)</h4><div class="indent"><p class="" style="">Added &lt;unsupported-info/&gt; error.</p> (psa)
    </div><h4>Version 0.16 (2007-06-06)</h4><div class="indent"><p class="" style="">Clarified resource determination process and updated text to reflect modifications to XEP-0168.</p> (psa)
    </div><h4>Version 0.15 (2007-05-25)</h4><div class="indent"><p class="" style="">Rewrote introduction and moved historical text to separate section.</p> (psa)
    </div><h4>Version 0.14 (2007-04-17)</h4><div class="indent"><p class="" style="">Clarified session lifetime; defined reason attribute and associated registry; further specified conformance requirements.</p> (psa)
    </div><h4>Version 0.13 (2007-03-23)</h4><div class="indent"><p class="" style="">Simplified signalling process and state chart; Removed session-redirect action (use redirect error instead); removed content-decline action; removed transport-* actions (except transport-info for ICE negotiation); removed description-* actions; simplified syntax to allow only one transport per content type; corrected syntax of creator attribute to be either initiator or responder (not JIDs); added profile attribute to content element in order to specify RTP profile in use.</p> (psa/ram)
    </div><h4>Version 0.12 (2006-12-21)</h4><div class="indent"><p class="" style="">Added creator attribute to content element for prevention of race condition; modified spec to use provisional namespace before advancement to Draft (per XEP-0053).</p> (psa/ram)
    </div><h4>Version 0.11 (2006-10-31)</h4><div class="indent"><p class="" style="">Completed clarifications and corrections throughout; added section on Jingle Actions.</p> (psa)
    </div><h4>Version 0.10 (2006-09-29)</h4><div class="indent"><p class="" style="">Made several corrections to the state machines and examples.</p> (ram/psa)
    </div><h4>Version 0.9 (2006-09-08)</h4><div class="indent"><p class="" style="">Further cleaned up state machines and state-related actions.</p> (ram/psa)
    </div><h4>Version 0.8 (2006-08-23)</h4><div class="indent"><p class="" style="">Changed channels to components in line with ICE; changed various action names for consistency; added session-extend and session-reduce actions to add and remove description/transport pairs; added description-modify action; added sender attribute to specify directionality.</p> (ram/psa)
    </div><h4>Version 0.7 (2006-07-17)</h4><div class="indent"><p class="" style="">Added implementation note about handling multiple content types.</p> (psa)
    </div><h4>Version 0.6 (2006-07-12)</h4><div class="indent"><p class="" style="">Changed media type to content type.</p> (se/psa)
    </div><h4>Version 0.5 (2006-03-20)</h4><div class="indent"><p class="" style="">Further clarified state machine diagrams; specified that session accept must include agreed-upon media format and transport description; moved deployment notes to appropriate transport spec.</p> (psa/jb)
    </div><h4>Version 0.4 (2006-03-01)</h4><div class="indent"><p class="" style="">Added glossary; clarified state machines; updated to reflect publication of XEP-0176 and XEP-0177.</p> (psa/jb)
    </div><h4>Version 0.3 (2006-02-24)</h4><div class="indent"><p class="" style="">Provided more detail about modify scenarios; defined media-specific and transport-specific actions and adjusted state machine accordingly.</p> (psa/jb)
    </div><h4>Version 0.2 (2006-02-13)</h4><div class="indent"><p class="" style="">Per agreement among the co-authors, moved transport definition to separate specification, simplified state machine, and made other associated changes to the text, examples, and schemas; also harmonized redirect, decline, and terminate processes.</p> (psa/jb)
    </div><h4>Version 0.1 (2005-12-15)</h4><div class="indent"><p class="" style="">Initial version.</p> (psa)
    </div><h4>Version 0.0.10 (2005-12-11)</h4><div class="indent"><p class="" style="">More fully documented burst mode, connectivity checks, error cases, etc.</p> (psa)
    </div><h4>Version 0.0.9 (2005-12-08)</h4><div class="indent"><p class="" style="">Restructured document flow; provided example of burst mode.</p> (psa)
    </div><h4>Version 0.0.8 (2005-12-05)</h4><div class="indent"><p class="" style="">Distinguished between dribble mode and burst mode, including mode attribute, service discovery features, and implementation notes; provided detailed resource discovery examples; corrected state chart; specified session termination; specified error conditions; specified semantics of informational messages; began to define security considerations; added Joe Beda as co-author.</p> (psa/sl/jb)
    </div><h4>Version 0.0.7 (2005-11-08)</h4><div class="indent"><p class="" style="">Added more detail to basic session flow; harmonized candidate negotiation process with ICE.</p> (psa)
    </div><h4>Version 0.0.6 (2005-10-27)</h4><div class="indent"><p class="" style="">Added XMPP Registrar considerations; defined schema; completed slight syntax cleanup.</p> (psa)
    </div><h4>Version 0.0.5 (2005-10-21)</h4><div class="indent"><p class="" style="">Separated method description formats from signalling protocol.</p> (psa/sl)
    </div><h4>Version 0.0.4 (2005-10-19)</h4><div class="indent"><p class="" style="">Harmonized basic session flow with Google Talk protocol; added Scott Ludwig as co-author.</p> (psa/sl)
    </div><h4>Version 0.0.3 (2005-10-10)</h4><div class="indent"><p class="" style="">Added more detail to basic session flow.</p> (psa)
    </div><h4>Version 0.0.2 (2005-10-07)</h4><div class="indent"><p class="" style="">Protocol cleanup.</p> (psa/jjh)
    </div><h4>Version 0.0.1 (2005-10-06)</h4><div class="indent"><p class="" style="">First draft.</p> (psa/jjh)
    </div></div><hr /><p>END</p></body></html>
