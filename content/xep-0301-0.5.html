<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>XEP-0301: In-Band Real Time Text</title><link rel="stylesheet" type="text/css" href="../xmpp.css" /><link href="../prettify.css" type="text/css" rel="stylesheet" /><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /><script type="text/javascript" src="../prettify.js"></script><meta name="DC.Title" content="In-Band Real Time Text" /><meta name="DC.Creator" content="Mark Rejhon" /><meta name="DC.Description" content="This is a specification for real-time text transmitted in-band over an XMPP session." /><meta name="DC.Publisher" content="XMPP Standards Foundation" /><meta name="DC.Contributor" content="XMPP Extensions Editor" /><meta name="DC.Date" content="2012-07-22" /><meta name="DC.Type" content="XMPP Extension Protocol" /><meta name="DC.Format" content="XHTML" /><meta name="DC.Identifier" content="XEP-0301" /><meta name="DC.Language" content="en" /><meta name="DC.Rights" content="This XMPP Extension Protocol is copyright &#xA9; 1999 - 2012 by the XMPP Standards Foundation (XSF)." /></head><body onload="prettyPrint()"><h1>XEP-0301: In-Band Real Time Text</h1><table><tr valign="top"><td><strong>Abstract:</strong></td><td>This is a specification for real-time text transmitted in-band over an XMPP session.</td></tr><tr valign="top"><td><strong>Author:</strong></td><td>Mark Rejhon</td></tr><tr valign="top"><td><strong>Copyright:</strong></td><td>© 1999 - 2012 XMPP Standards Foundation. <a href="#appendix-legal">SEE LEGAL NOTICES</a>.</td></tr><tr valign="top"><td><strong>Status:</strong></td><td>Experimental</td></tr><tr valign="top"><td><strong>Type:</strong></td><td>Standards Track</td></tr><tr valign="top"><td><strong>Version:</strong></td><td>0.5</td></tr><tr valign="top"><td><strong>Last Updated:</strong></td><td>2012-07-22</td></tr></table><hr /><p style="color:red">WARNING: This Standards-Track document is Experimental. Publication as an XMPP Extension Protocol does not imply approval of this proposal by the XMPP Standards Foundation. Implementation of the protocol described herein is encouraged in exploratory implementations, but production systems are advised to carefully consider whether it is appropriate to deploy implementations of this protocol before it advances to a status of Draft.</p><hr /><h2>Table of Contents</h2><div class="indent"><p><br />1.  <a href="#introduction">Introduction</a><br />2.  <a href="#requirements">Requirements</a><br />   
      2.1.  <a href="#fluid_realtime_text">Fluid Real-Time Text</a><br />   
      2.2.  <a href="#inband_transmission">In-Band Transmission</a><br />   
      2.3.  <a href="#flexible_and_interoperable">Flexible and Interoperable</a><br />   
      2.4.  <a href="#accessible">Accessible</a><br />3.  <a href="#glossary">Glossary</a><br />4.  <a href="#protocol">Protocol</a><br />   
      4.1.  <a href="#rtt_element">RTT Element</a><br />   
      4.2.  <a href="#rtt_attributes">RTT Attributes</a><br />      
      4.2.1.  <a href="#seq">seq</a><br />      
      4.2.2.  <a href="#event">event</a><br />      
      4.2.3.  <a href="#id">id</a><br />   
      4.3.  <a href="#body_element">Body Element</a><br />      
      4.3.1.  <a href="#backwards_compatible">Backwards Compatible</a><br />   
      4.4.  <a href="#transmission_interval">Transmission Interval</a><br />   
      4.5.  <a href="#realtime_text_actions">Real-Time Text Actions</a><br />      
      4.5.1.  <a href="#action_elements">Action Elements</a><br />      
      4.5.2.  <a href="#summary_of_attribute_values">Summary of Attribute Values</a><br />      
      4.5.3.  <a href="#list_of_action_elements">List of Action Elements</a><br />        
      4.5.3.1.  <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a><br />        
      4.5.3.2.  <a href="#element_e_backspace">Element &lt;e/&gt; – Backspace</a><br />        
      4.5.3.3.  <a href="#element_d_forward_delete">Element &lt;d/&gt; – Forward Delete</a><br />        
      4.5.3.4.  <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a><br />      
      4.5.4.  <a href="#accurate_processing_of_action_elements">Accurate Processing of Action Elements</a><br />        
      4.5.4.1.  <a href="#guidelines_for_senders">Guidelines for Senders</a><br />        
      4.5.4.2.  <a href="#guidelines_for_recipients">Guidelines for Recipients</a><br />        
      4.5.4.3.  <a href="#unicode_character_counting">Unicode Character Counting</a><br />   
      4.6.  <a href="#keeping_realtime_text_synchronized">Keeping Real-Time Text Synchronized</a><br />      
      4.6.1.  <a href="#staying_in_sync">Staying In Sync</a><br />      
      4.6.2.  <a href="#recovery_from_loss_of_sync">Recovery From Loss of Sync</a><br />      
      4.6.3.  <a href="#message_reset">Message Reset</a><br />5.  <a href="#determining_support">Determining Support</a><br />6.  <a href="#implementation_notes">Implementation Notes</a><br />   
      6.1.  <a href="#text_presentation">Text Presentation</a><br />      
      6.1.1.  <a href="#avoid_bursty_text_presentation">Avoid Bursty Text Presentation</a><br />      
      6.1.2.  <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a><br />      
      6.1.3.  <a href="#time_critical_and_low_latency_methods">Time Critical and Low Latency Methods</a><br />      
      6.1.4.  <a href="#lowbandwidth_and_lowprecision_text_smoothing">Low-Bandwidth and Low-Precision Text Smoothing</a><br />   
      6.2.  <a href="#activating_and_deactivating_realtime_text">Activating and Deactivating Real-Time Text</a><br />      
      6.2.1.  <a href="#activation_methods">Activation Methods</a><br />      
      6.2.2.  <a href="#deactivation_methods">Deactivation Methods</a><br />   
      6.3.  <a href="#optional_remote_cursor">Optional Remote Cursor</a><br />      
      6.3.1.  <a href="#calculating_cursor_position">Calculating Cursor Position</a><br />   
      6.4.  <a href="#sending_realtime_text">Sending Real-Time Text</a><br />      
      6.4.1.  <a href="#monitoring_message_changes_instead_of_key_presses">Monitoring Message Changes Instead Of Key Presses</a><br />      
      6.4.2.  <a href="#monitoring_key_presses_directly">Monitoring Key Presses Directly</a><br />      
      6.4.3.  <a href="#basic_realtime_text">Basic Real-Time Text</a><br />      
      6.4.4.  <a href="#appendonly_realtime_text">Append-Only Real-Time Text</a><br />   
      6.5.  <a href="#receiving_realtime_text">Receiving Real-Time Text</a><br />   
      6.6.  <a href="#other_guidelines">Other Guidelines</a><br />      
      6.6.1.  <a href="#message_length">Message Length</a><br />      
      6.6.2.  <a href="#usage_with_chat_states">Usage with Chat States</a><br />      
      6.6.3.  <a href="#usage_with_multiuser_chat_and_simultaneous_logins">Usage with Multi-User Chat and Simultaneous Logins</a><br />        
      6.6.3.1.  <a href="#multiuser_chat">Multi-User Chat</a><br />        
      6.6.3.2.  <a href="#simultaneous_logins">Simultaneous Logins</a><br />      
      6.6.4.  <a href="#stale_messages">Stale Messages</a><br />      
      6.6.5.  <a href="#performance_efficiency">Performance &amp; Efficiency</a><br />      
      6.6.6.  <a href="#total_conversation_combination_with_audio_and_video">Total Conversation – Combination with Audio and Video</a><br />7.  <a href="#use_cases">Use Cases</a><br />   
      7.1.  <a href="#example_of_simple_real_time_text">Example of Simple Real Time Text</a><br />   
      7.2.  <a href="#example_of_multiple_messages">Example of Multiple Messages</a><br />   
      7.3.  <a href="#examples_of_message_edits">Examples of Message Edits</a><br />      
      7.3.1.  <a href="#deleting_text_from_message">Deleting Text From Message</a><br />      
      7.3.2.  <a href="#inserting_text_into_message">Inserting Text Into Message</a><br />      
      7.3.3.  <a href="#deleting_and_replacing_text_in_message">Deleting and Replacing Text In Message</a><br />      
      7.3.4.  <a href="#multiple_message_edits">Multiple Message Edits</a><br />   
      7.4.  <a href="#examples_of_key_press_intervals">Examples of Key Press Intervals</a><br />      
      7.4.1.  <a href="#comparison_with_and_without_intervals">Comparison With and Without Intervals</a><br />      
      7.4.2.  <a href="#full_message_including_key_press_intervals">Full Message Including Key Press Intervals</a><br />8.  <a href="#interoperability_considerations">Interoperability Considerations</a><br />   
      8.1.  <a href="#rfc_4103_and_t140">RFC 4103 and T.140</a><br />9.  <a href="#internationalization_considerations">Internationalization Considerations</a><br />10.  <a href="#security_considerations">Security Considerations</a><br />   
      10.1.  <a href="#privacy">Privacy</a><br />   
      10.2.  <a href="#encryption">Encryption</a><br />   
      10.3.  <a href="#congestion_considerations">Congestion Considerations</a><br />11.  <a href="#iana_considerations">IANA Considerations</a><br />12.  <a href="#xmpp_registrar_considerations">XMPP Registrar Considerations</a><br />   
      12.1.  <a href="#protocol_namespaces">Protocol Namespaces</a><br />   
      12.2.  <a href="#namespace_versioning">Namespace Versioning</a><br />13.  <a href="#xml_schema">XML Schema</a><br />14.  <a href="#acknowledgments">Acknowledgments</a></p><p><a href="#appendices">Appendices</a><br />    <a href="#appendix-docinfo">A: Document Information</a><br />    <a href="#appendix-authorinfo">B: Author Information</a><br />    <a href="#appendix-legal">C: Legal Notices</a><br />    <a href="#appendix-xmpp">D: Relation to XMPP</a><br />    <a href="#appendix-discuss">E: Discussion Venue</a><br />    <a href="#appendix-conformance">F: Requirements Conformance</a><br />    <a href="#appendix-notes">G: Notes</a><br />    <a href="#appendix-revs">H: Revision History</a></p></div><hr /><h2>1.
       <a name="introduction" id="introduction">Introduction</a></h2>
    <p>This document defines a specification for real-time text transmitted in-band over an XMPP network.</p>
    <p><span class="strong">Real-time text is text transmitted instantly while it is being typed or created.</span> The recipient can immediately read the sender's text as it is written, without waiting. Text can be used conversationally, similar to a telephone conversation, where one listens while the other is speaking. It eliminates waiting times found in messaging, and is favored by deaf and hard of hearing individuals who prefer text conversation. For a visual animation of real-time text, see <span class="ref"><span class="strong"><a href="http://www.realjabber.org">RealJabber.org</a></span></span>
   [<a href="#nt-id220531">1</a>].</p>
    <p>Real-time text has been around for decades in various implementations:</p>
    <ul>
      <li>The 'talk' command on UNIX systems since the 1970's.</li>
      <li>ICQ had a peer-to-peer split screen mode from 1996-1999.</li>
      <li>TTY and text telephones for the deaf and hard of hearing.</li>
      <li>For SIP, real-time text is sent using <span class="ref"><span class="strong"><a href="http://tools.ietf.org/html/rfc4103">IETF RFC 4103</a></span></span>  [<a href="#nt-id220569">2</a>] with <span class="ref"><span class="strong"><a href="http://www.itu.int/rec/T-REC-T.140">ITU-T T.140</a></span></span>  [<a href="#nt-id227111">3</a>] presentation coding.</li>
      <li>In 2008, AOL AIM 6.8 gained the <span class="ref"><span class="strong"><a href="http://help.aol.com/help/microsites/microsite.do?cmd=displayKC&amp;externalId=223568">AOL Real-Time IM</a></span></span>  [<a href="#nt-id227134">4</a>] feature.</li>
      <li>A component within Total Conversation, used by <span class="ref"><span class="strong"><a href="http://www.reach112.eu">Reach112</a></span></span>  [<a href="#nt-id227157">5</a>] in Europe, an accessible emergency service with real-time text.</li>
    </ul>
    


    <p>Real-time text is suitable for smooth and rapid mainstream communication in text, as an all-inclusive technology to complement instant messaging. It can also allow immediate conversation in situations where speech cannot be used (e.g. quiet environments, privacy, deaf and hard of hearing). Real-time text is also beneficial in emergency situations, due to its immediacy.</p>
    <h2>2.
       <a name="requirements" id="requirements">Requirements</a></h2>
        <div class="indent"><h3>2.1 <a name="fluid_realtime_text" id="fluid_realtime_text">Fluid Real-Time Text</a></h3>
    <ol>
      <li>Allow transmission of real-time text with a low latency.</li>
      <li>Balance low latencies versus system, network and server limitations.</li>
      <li>Support message editing in real-time, including text insertions and deletions.</li>
      <li>Support transmission and reproduction of the original intervals between key presses, to preserve look-and-feel of typing independently of transmission intervals.</li>
    </ol>
    </div>
    <div class="indent"><h3>2.2 <a name="inband_transmission" id="inband_transmission">In-Band Transmission</a></h3>
    <ol>
      <li>Reliable real-time text delivery.</li>
      <li>Be backwards compatible with XMPP clients that do not support real-time text.</li>
      <li>Minimize reliance on network traversal mechanisms and/or out-of-band transmission protocols.</li>
      <li>Compatible with multi-user chat (MUC) and simultaneous logins.</li>
    </ol>
    </div>
    <div class="indent"><h3>2.3 <a name="flexible_and_interoperable" id="flexible_and_interoperable">Flexible and Interoperable</a></h3>
    <ol>
      <li>Allow use within existing instant-messaging user interfaces, with minimal UI modifications.</li>
      <li>Allow alternate optional presentations of real-time text, including split screen and/or other layouts.</li>
      <li>Protocol design ensures integrity of real-time text, and allows extensions for new features.</li>
      <li>Be interoperable with other real-time text protocols via gateways, including RFC 4103 and ITU-T T.140.</li>
    </ol>
    </div>
    <div class="indent"><h3>2.4 <a name="accessible" id="accessible">Accessible</a></h3>
    <ol>
      <li>Allow XMPP to follow the <span class="ref"><span class="strong"><a href="http://www.itu.int/rec/T-REC-F.703">ITU-T Rec. F.703</a></span></span>  [<a href="#nt-id227281">6</a>] Total Conversation standard for simultaneous voice, video, and real-time text.</li>
      <li>Be a candidate technology for use with Next Generation 9-1-1 / 1-1-2 emergency services.</li>
      <li>Be suitable for transcription services and (when coupled with voice at user's choice) for TTY/text telephone alternatives, relay services, and captioned telephone systems.</li>
      <li>Be an accessible enhancement for mobile phone text messaging and mainstream instant messaging.</li>
    </ol>
    </div>
<h2>3.
       <a name="glossary" id="glossary">Glossary</a></h2>
    <p><span class="strong">real-time</span> – A conversational latency of less than 1 second, as defined by <span class="ref"><span class="strong"><a href="http://www.itu.int/rec/T-REC-F.700">ITU-T Rec. F.700</a></span></span>  [<a href="#nt-id227330">7</a>], section 2.1.2.1.</p>
    <p><span class="strong">real-time text</span> – Text transmitted instantly while it is being typed or created.</p>
    <p><span class="strong">real-time message</span> – Recipient's real-time view of the sender's message still being typed or created.</p>
    <p><span class="strong">action element</span> – An XML element that represents a single real-time message edit, such as text insertion or deletion.</p>
    <p><span class="strong">RTT</span> – Acronym for real-time text.</p>
    <h2>4.
       <a name="protocol" id="protocol">Protocol</a></h2>
        <div class="indent"><h3>4.1 <a name="rtt_element" id="rtt_element">RTT Element</a></h3>
    <p>Real-time text is transmitted via an &lt;rtt/&gt; child element of a &lt;message/&gt; stanza. The &lt;rtt/&gt; element is transmitted at regular intervals by the sender client while a message is being composed, to allow the recipient to see the sender type the message, without waiting for the full message sent in a &lt;body/&gt; element.</p>
    <p>This is a basic example of a <span class="em"><span class="strong">real-time message</span></span> "Hello, my Juliet!” transmitted in real-time while it is being typed, before a final message delivery in a &lt;body/&gt; element (to remain <a href="#backwards_compatible">Backwards Compatible</a>):</p>
    <p><span class="strong">Example 1: Introductory Example</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='juliet@capulet.lit' from='romeo@montague.lit/orchard' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='0' event='new'&gt;
    &lt;t&gt;Hello, &lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='juliet@capulet.lit' from='romeo@montague.lit/orchard' type='chat' id='a02'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='1'&gt;
    &lt;t&gt;my &lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='juliet@capulet.lit' from='romeo@montague.lit/orchard' type='chat' id='a03'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='2'&gt;
    &lt;t&gt;Juliet!&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='juliet@capulet.lit' from='romeo@montague.lit/orchard' type='chat' id='a04'&gt;
  &lt;body&gt;Hello, my Juliet!&lt;/body&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>The &lt;rtt/&gt; element contains a series of one or more child elements called <span class="em"><span class="strong">action elements</span></span> that represent <a href="#realtime_text_actions">Real-Time Text Actions</a> such as text being appended, inserted, or deleted. Example 1 illustrates only the &lt;t/&gt; action element, which appends text to the end of a message.</p>
    <p>Transmission of the &lt;rtt/&gt; element occurs at a regular <a href="#transmission_interval">Transmission Interval</a> whenever the sender is actively composing a message. If there are no changes to the message since the last transmission, no transmission occurs.</p>
    <p>There MUST NOT be more than one &lt;rtt/&gt; element per &lt;message/&gt; stanza.</p>
    <p>The namespace of the &lt;rtt/&gt; element is “urn:xmpp:rtt:0”.</p>
    </div>
    <div class="indent"><h3>4.2 <a name="rtt_attributes" id="rtt_attributes">RTT Attributes</a></h3>
        <div class="indent"><h3>4.2.1 <a name="seq" id="seq">seq</a></h3>
    <p>This REQUIRED attribute is a counter to maintain the integrity of real-time text. (The bounds of <span class="strong">seq</span> is 31-bits, the range of positive values of a signed integer.)</p>
    <p>Senders MUST increment the <span class="strong">seq</span> attribute by 1 in each subsequent &lt;rtt/&gt; transmitted without an <a href="#event">event</a> attribute. When an &lt;rtt/&gt; element has an <a href="#event">event</a> attribute, senders MAY instead use any value as the new starting value for <span class="strong">seq</span>. A random starting <span class="strong">seq</span> value is RECOMMENDED for best integrity during <a href="#usage_with_multiuser_chat_and_simultaneous_logins">Usage with Multi-User Chat and Simultaneous Logins</a>. Senders MAY limit the size of the new starting <span class="strong">seq</span> value, to keep &lt;rtt/&gt; compact while allowing plenty of incrementing room without overflow.</p>
    <p>Recipients MUST monitor the <span class="strong">seq</span> value to verify the integrity of real-time text. See <a href="#keeping_realtime_text_synchronized">Keeping Real-Time Text Synchronized</a>.</p>
    </div>
    <div class="indent"><h3>4.2.2 <a name="event" id="event">event</a></h3>
    <p>This attribute signals events for real-time text, such as the start of a new real-time message. The <span class="strong">event</span> attribute MAY be omitted from the &lt;rtt/&gt; element during regular real-time text transmission. Recipients MUST ignore &lt;rtt/&gt; containing unsupported <span class="strong">event</span> values.</p>
        <div class="indent"><p class="caption"><a name="table-1" id="table-1"></a>Table 1: </p><table border="1" cellpadding="3" cellspacing="0">
          <tr class="body">
            <th>event</th>
            <th>Description</th>
            <th>Sender Support</th>
            <th>Recipient Support</th>
          </tr>
          <tr class="body">
            <td>new</td>
            <td>Begin a new real-time message.</td>
            <td><span class="strong">REQUIRED</span></td>
            <td><span class="strong">REQUIRED</span></td>
          </tr>
          <tr class="body">
            <td>reset</td>
            <td>Reset the current real-time message.</td>
            <td><span class="strong">RECOMMENDED</span></td>
            <td><span class="strong">REQUIRED</span></td>
          </tr>
          <tr class="body">
            <td>init</td>
            <td>Initiate a real-time text session.</td>
            <td>OPTIONAL</td>
            <td>OPTIONAL</td>
          </tr>
          <tr class="body">
            <td>cancel</td>
            <td>End a real-time text session.</td>
            <td>OPTIONAL</td>
            <td>OPTIONAL</td>
          </tr>
        </table></div>
    <p><span class="strong">event='new'</span><br />
    Senders MUST use this value when transmitting the first &lt;rtt/&gt; element containing <a href="#action_elements">Action Elements</a> (i.e. the first character(s) of a new message). Recipient clients MUST initialize a new real-time message for display, and then process action elements within the &lt;rtt/&gt; element. If a real-time message already exists in the same chat session, its content MUST be replaced (i.e. cleared prior to processing action elements). Senders MAY send subsequent &lt;rtt/&gt; elements that do not contain an <span class="strong">event</span> attribute.</p>
    <p><span class="strong">event='reset'</span><br />
    Recipients MUST treat <span class="strong">'reset'</span> the same as <span class="strong">'new'</span>. Senders MUST use <span class="strong">'new'</span> only when the sender has started composing a new message, and use '<span class="strong">reset'</span> when re-transmitting a real-time message. See <a href="#message_reset">Message Reset</a>, used for <a href="#keeping_realtime_text_synchronized">Keeping Real-Time Text Synchronized</a> and <a href="#basic_realtime_text">Basic Real-Time Text</a>.</p>
    <p><span class="strong">event='init'</span><br />
    Clients MAY use this value to signal the other end that real-time text is being activated. If used, this &lt;rtt/&gt; element MUST be empty with no action elements. See <a href="#activating_and_deactivating_realtime_text">Activating and Deactivating Real-Time Text</a>.</p>
    <p><span class="strong">event='cancel'</span><br />
    Clients MAY use this value to signal the other end to stop transmitting real-time text. If used, this &lt;rtt/&gt; element MUST be empty with no action elements. Recipients SHOULD discontinue sending back &lt;rtt/&gt; elements for the remainder of the same chat session (or unless <span class="strong">'init'</span> is used again). See <a href="#activating_and_deactivating_realtime_text">Activating and Deactivating Real-Time Text</a>.</p>
    </div>
    <div class="indent"><h3>4.2.3 <a name="id" id="id">id</a></h3>
    <p>This OPTIONAL attribute is used only if <span class="ref"><a href="http://xmpp.org/extensions/xep-0308.html">Last Message Correction</a></span>  [<a href="#nt-id227763">8</a>] (XEP-0308) is implemented. Sender clients MAY use this attribute to allow recipient clients to have improved presentation of real-time text during message correction (e.g. shown as in-place editing of previous message).</p>
    <p>This <span class="strong">id</span> attribute refers to the &lt;message/&gt; stanza containing the &lt;body/&gt; that is being edited (See 'Business Rules' in XEP-0308). If used at all, then <span class="strong">id</span> MUST be included in all &lt;rtt/&gt; elements transmitted during message correction of the previous message. When switching messages being edited (i.e. editing the current message versus editing the previous message), the first &lt;rtt/&gt; element MUST contain an <a href="#event">event</a> attribute value, such as 'reset' (See <a href="#message_reset">Message Reset</a>).</p>
    </div>
</div>
    <div class="indent"><h3>4.3 <a name="body_element" id="body_element">Body Element</a></h3>
    <p>The real-time message is considered complete upon receipt of a &lt;body/&gt; element in a message stanza. The delivered message in the &lt;body/&gt; element is displayed instead of the real-time message. In the ideal case, the message from &lt;body/&gt; is redundant since this delivered message is identical to the final contents of the real-time message.</p>
    <p>Senders MUST include an <a href="#event">event</a> attribute in the next &lt;rtt/&gt; element that is transmitted after a message stanza containing a &lt;body/&gt; element.</p>
        <div class="indent"><h3>4.3.1 <a name="backwards_compatible" id="backwards_compatible">Backwards Compatible</a></h3>
    <p>The real-time text standard simply provides early delivery of text before the &lt;body/&gt; element. The &lt;body/&gt; element continues to follow the <span class="ref"><a href="http://tools.ietf.org/html/rfc6120">XMPP Core</a></span>  [<a href="#nt-id227852">9</a>] specification. In particular, XMPP implementations need to ignore XML elements they do not understand. Clients, that do not support real-time text, will continue to behave normally, displaying complete lines of messages as they are delivered.</p>
    </div>
</div>
    <div class="indent"><h3>4.4 <a name="transmission_interval" id="transmission_interval">Transmission Interval</a></h3>
    <p>For the best balance between interoperability and usability, the default transmission interval of &lt;rtt/&gt; elements for a continuously-changing message SHOULD be approximately <span class="strong">0.7 second</span>. This interval meets ITU-T Rec. F.700 Section A.3.2.1 for good quality real-time conversation. If a different transmission interval needs to be used, the interval SHOULD be <span class="strong">between 0.3 second and 1 second</span>.</p>
    <p>A longer interval will lead to a less optimal user experience in most network conditions. Conversely, a much shorter interval may more frequently trigger throttling or flooding protection algorithms in public XMPP servers, leading to dropped &lt;message/&gt; elements and/or <a href="#congestion_considerations">Congestion Considerations</a>.</p>
    <p>To provide fluid real-time text, one or more of the following methods can be used:</p>
    <ul>
      <li><a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a> for natural typing display, independently of the transmission interval.</li>
      <li>Use of <a href="#time_critical_and_low_latency_methods">Time Critical and Low Latency Methods</a>, for real-time captioning/transcription.</li>
      <li>For other options or reduced-precision options, see <a href="#lowbandwidth_and_lowprecision_text_smoothing">Low-Bandwidth and Low-Precision Text Smoothing</a>.</li>
    </ul>
    </div>
    <div class="indent"><h3>4.5 <a name="realtime_text_actions" id="realtime_text_actions">Real-Time Text Actions</a></h3>
    <p>The &lt;rtt/&gt; element MAY contain one or more <span class="em"><span class="strong">action elements</span></span> representing real-time text operations, including text being appended, inserted, or deleted.</p>
    <p>Many chat clients allow a sender to edit their message before sending (via a Send button, or pressing Enter). The inclusion of real-time text functionality, in existing client software, needs to preserve the sender's existing expectation of being able to edit their messages. In a chat session with real-time text, the recipient can watch the sender compose and edit their message before it is completed.</p>
        <div class="indent"><h3>4.5.1 <a name="action_elements" id="action_elements">Action Elements</a></h3>
    <p>This is a short summary of action elements that operate on a real-time message. For detailed information, see <a href="#list_of_action_elements">List of Action Elements</a>.</p>
        <div class="indent"><p class="caption"><a name="table-2" id="table-2"></a>Table 2: </p><table border="1" cellpadding="3" cellspacing="0">
          <tr class="body">
            <th>Action</th>
            <th>Element</th>
            <th>Description</th>
            <th>Sender Support</th>
            <th>Recipient Support</th>
          </tr>
          <tr class="body">
            <td>Insert Text</td>
            <td>&lt;t p='#'&gt;text&lt;/t&gt;</td>
            <td>Insert specified <span class="em"><span class="strong">text</span></span> at position <span class="em"><span class="strong">p</span></span> in message.</td>
            <td><span class="strong">REQUIRED</span></td>
            <td><span class="strong">REQUIRED</span></td>
          </tr>
          <tr class="body">
            <td>Backspace</td>
            <td>&lt;e p='#' n='#'/&gt;</td>
            <td>Remove <span class="em"><span class="strong">n</span></span> characters before position <span class="em"><span class="strong">p</span></span> in message<span class="em">.</span></td>
            <td>RECOMMENDED</td>
            <td><span class="strong">REQUIRED</span></td>
          </tr>
          <tr class="body">
            <td>Forward Delete</td>
            <td>&lt;d p='#' n='#'/&gt;</td>
            <td>Remove <span class="em"><span class="strong">n</span></span> characters starting at position <span class="em"><span class="strong">p</span></span> in message.</td>
            <td>RECOMMENDED</td>
            <td><span class="strong">REQUIRED</span></td>
          </tr>
          <tr class="body">
            <td>Wait Interval</td>
            <td>&lt;w n='#'/&gt;</td>
            <td>Wait <span class="em"><span class="strong">n</span></span> thousandths of a second.</td>
            <td>RECOMMENDED</td>
            <td>RECOMMENDED</td>
          </tr>
        </table></div>
    </div>
    <div class="indent"><h3>4.5.2 <a name="summary_of_attribute_values" id="summary_of_attribute_values">Summary of Attribute Values</a></h3>
    <ul>
      <li><p>The <span class="em"><span class="strong">n</span></span> attribute is a length value.<br />
        If <span class="em"><span class="strong">n</span></span> is omitted, the default value of <span class="em"><span class="strong">n</span></span> MUST be 1.</p></li>
      <li><p>The <span class="em"><span class="strong">p</span></span> attribute is an absolute position value, as a 0-based index (0 represents beginning of message).<br />
        If <span class="em"><span class="strong">p</span></span> is omitted, the default value of <span class="em"><span class="strong">p</span></span> MUST be the current message length (<span class="em"><span class="strong">p</span></span> defaults to end of message).</p></li>
      <li><p>For text modifications, length and position (<span class="em"><span class="strong">n</span></span> and <span class="em"><span class="strong">p</span></span>) is based on <a href="#unicode_character_counting">Unicode Character Counting</a>.<br />
        Also see <a href="#accurate_processing_of_action_elements">Accurate Processing of Action Elements</a>.</p></li>
      <li><p>Senders MUST NOT use negative values for any attribute, nor use <span class="em"><span class="strong">p</span></span> values beyond the current message length. However, recipients receiving such values MUST clip negative values to 0, and clip excessively high <span class="em"><span class="strong">p</span></span> values to the current length of the real-time message. Modifications only occur within the boundaries of the current real-time message, and not in other delivered messages.</p></li>
    </ul>
    </div>
    <div class="indent"><h3>4.5.3 <a name="list_of_action_elements" id="list_of_action_elements">List of Action Elements</a></h3>
    <p>Recipients MUST be able to process all &lt;t/&gt;, &lt;e/&gt; and &lt;d/&gt; action elements for incoming &lt;rtt/&gt; transmissions, even if senders do not use all of these for outgoing &lt;rtt/&gt; transmissions (e.g. <a href="#basic_realtime_text">Basic Real-Time Text</a>). Support for &lt;w/&gt; is RECOMMENDED for both senders and recipients, in order to accommodate <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>. Recipients MUST ignore unexpected or unsupported elements within &lt;rtt/&gt;, while continuing to process subsequent action elements (Compatibility is ensured via <a href="#namespace_versioning">Namespace Versioning</a>). Action elements are immediate child elements of the &lt;rtt/&gt; element, and are never nested. See examples in <a href="#use_cases">Use Cases</a>.</p>
        <div class="indent"><h3>4.5.3.1 <a name="element_t_insert_text" id="element_t_insert_text">Element &lt;t/&gt; – Insert Text</a></h3>
    <p>Support the transmission of text, including key presses, and text block inserts.<br />
    <span class="em">Note: Text can be any</span> <span class="em">subset of text allowed in the &lt;body/&gt; element of a &lt;message/&gt;. If &lt;t/&gt; is empty, no text modification takes place.</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;t&gt;text&lt;/t&gt;</pre></div></p>
    <p>Append specified <span class="em"><span class="strong">text</span></span> at the end of message. (<span class="em"><span class="strong">p</span></span> defaults to message length).<br />
    <span class="em">Note: This action element is the minimum sender support REQUIRED for <a href="#basic_realtime_text">Basic Real-Time Text</a>.</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;t p='#'&gt;text&lt;/t&gt;</pre></div></p>
    <p>Inserts specified <span class="em"><span class="strong">text</span></span> at position <span class="em"><span class="strong">p</span></span> in the message text.</p>
    


    </div>
    <div class="indent"><h3>4.5.3.2 <a name="element_e_backspace" id="element_e_backspace">Element &lt;e/&gt; – Backspace</a></h3>
    <p>Support the behavior of Backspace key presses. Text is removed towards beginning of the message.<br />
    <span class="em">Note: Excess backspaces MUST be ignored, with text being backspaced only to the beginning of the message in this case.</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;e/&gt;</pre></div></p>
    <p>Remove 1 character from end of message. (Both <span class="em"><span class="strong">n</span></span> and <span class="em"><span class="strong">p</span></span> at default values)</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;e p='#'/&gt;</pre></div></p>
    <p>Remove 1 character before position <span class="em"><span class="strong">p</span></span> in message. (<span class="em"><span class="strong">n</span></span> defaults to 1)</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;e n='#'/&gt;</pre></div></p>
    <p>Remove <span class="em"><span class="strong">n</span></span> characters from end of message. (<span class="em"><span class="strong">p</span></span> defaults to message length)</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;e n='#' p='#'/&gt;</pre></div></p>
    <p>Remove <span class="em"><span class="strong">n</span></span> characters before position <span class="em"><span class="strong">p</span></span> in message.</p>
    


    </div>
    <div class="indent"><h3>4.5.3.3 <a name="element_d_forward_delete" id="element_d_forward_delete">Element &lt;d/&gt; – Forward Delete</a></h3>
    <p>Support the behavior of Delete key presses, and text block deletes. Text is removed towards end of the message.<br />
    <span class="em">Note: Excess deletes MUST be ignored, with text being deleted only to the end of the message in this case.</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;d p='#'/&gt;</pre></div></p>
    <p>Remove 1 character beginning at position <span class="em"><span class="strong">p</span></span> in message. (<span class="em"><span class="strong">n</span></span> defaults to 1)</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;d p='#' n='#'/&gt;</pre></div></p>
    <p>Remove <span class="em"><span class="strong">n</span></span> characters beginning at position <span class="em"><span class="strong">p</span></span> in message.</p>
    </div>
    <div class="indent"><h3>4.5.3.4 <a name="element_w_wait_interval" id="element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a></h3>
    <p>Allow the transmission of intervals, between real-time text actions, to support the pauses between key presses. See <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;w n='#'/&gt;</pre></div></p>
    <p>Wait <span class="em"><span class="strong">n</span></span> thousandths of a second before processing the next action element. This pause MAY be approximate, and not necessarily be of millisecond precision. The <span class="em"><span class="strong">n</span></span> value SHOULD NOT exceed the <a href="#transmission_interval">Transmission Interval</a>. Also, if a <a href="#body_element">Body Element</a> arrives, pauses SHOULD be interrupted to prevent a delay in message delivery.</p>
    </div>
</div>
    <div class="indent"><h3>4.5.4 <a name="accurate_processing_of_action_elements" id="accurate_processing_of_action_elements">Accurate Processing of Action Elements</a></h3>
    <p>Real-time text is generated based on text normally allowed to be transmitted within the &lt;body/&gt; element.</p>
    <p>Incorrectly generated action elements may lead to inconsistencies between the sender and recipient during real-time editing. The Unicode characters of the real-time text needs to make it transparently from the sender to the recipient, without further Unicode character modifications. This is the chain between the sender's creation of real-time text, to the recipient's processing of real-time text. Transparent transmission of Unicode characters is possible with sender pre-processing, as long as the transmission from the sender to the recipient remains standards-compliant, including compliant XML processors and compliant XMPP servers.</p>
    <p>Any inconsistencies that occur during real-time message editing (i.e. non-compliant XMPP server that modifies messages) will recover during the next <a href="#message_reset">Message Reset</a>, and also via <a href="#basic_realtime_text">Basic Real-Time Text</a>.</p>
        <div class="indent"><h3>4.5.4.1 <a name="guidelines_for_senders" id="guidelines_for_senders">Guidelines for Senders</a></h3>
    <p>Senders MUST generate real-time text based on the plain text version of the sender's message with all processing already completed. Processing include Unicode normalization, conversion of emoticons graphics to text, removal of illegal characters, line-break conversion, and all other Unicode character modifications. This is done concurrently to the displayed version of the same message (which may continue to have formatting, emoticon graphics, <span class="ref"><a href="http://xmpp.org/extensions/xep-0071.html">XHTML-IM</a></span>  [<a href="#nt-id228533">10</a>], etc.).</p>
    <p>For the purpose of calculating <span class="em"><span class="strong">n</span></span> and <span class="em"><span class="strong">p</span></span> values, line breaks MUST be treated as a single character, if line breaks are used within real-time text. Conversion of line breaks into a single LINE FEED U+000A is REQUIRED for XML processors, according to section 2.11 of <span class="ref"><span class="strong"><a href="http://www.w3.org/TR/xml/">XML</a></span></span>  [<a href="#nt-id228555">11</a>].</p>
    </div>
    <div class="indent"><h3>4.5.4.2 <a name="guidelines_for_recipients" id="guidelines_for_recipients">Guidelines for Recipients</a></h3>
    <p>For recipients, <span class="em"><span class="strong">p</span></span> and <span class="em"><span class="strong">n</span></span> are calculated relative to real-time text obtained from a compliant XML processor, before any further Unicode character modifications. Recipients MUST NOT do Unicode normalization (or any other code point modifications) on their copy of the real-time message. This is to allow accurate processing of subsequent action elements (For display purposes, the recipient client can separately process/normalize a copy of the same real-time message text).</p>
    <p>Note that <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a> is allowed to contain any subset sequence of Unicode characters from the real-time message. This may result in certain situations where the text transmitted in &lt;t/&gt; elements is allowed to be temporarily an incorrectly-formed Unicode string (e.g. incompletely formed glyphs, non-spacing characters, orphaned diacritic character, standalone control character including direction-change character for bidirectional Unicode) but becomes correct when inserted into the middle of the recipient's real-time message, and consequently passes recipient validation/normalization with no character modifications. Note that a compliant XML processor does not modify or fix Unicode errors caused by taking only a subset of characters from correctly-formed Unicode text. One alternative way for implementers to visualize this, is to visualize the Unicode text as an array of individual code points, and treat the <span class="em"><span class="strong">p</span></span> and <span class="em"><span class="strong">n</span></span> values accordingly.</p>
    </div>
    <div class="indent"><h3>4.5.4.3 <a name="unicode_character_counting" id="unicode_character_counting">Unicode Character Counting</a></h3>
    <p>For platform-independent interoperability, calculations of length and position values (<span class="em"><span class="strong">p</span></span> and <span class="em"><span class="strong">n</span></span>) MUST be based on Unicode code points. A single UTF-8 encoded character equals one code point. However, many platforms use different internal encodings (i.e. string formats) that is different from the transmission encoding (UTF-8). Consider these factors:</p>
    <ul>
      <li><p>Multiple Unicode code points (e.g. combining marks) may combine into one displayable character.<br />
        <span class="em">Action elements operate on individual Unicode code points, not on displayable characters.</span></p></li>
      <li><p>Unicode code points for characters U+10000 through U+10FFFF are represented as a surrogate pair in some Unicode encodings (e.g. UTF-16).<br />
        <span class="em">Action elements operate on individual Unicode code points, not on the separate components of a surrogate pair.</span></p></li>
      <li><p>Some Unicode encodings use a variable number of bytes per Unicode code point (e.g. UTF-8).<br /><span class="em">Action elements operate on individual Unicode code points, not on individual bytes.</span></p></li>
    </ul>
    <p>Incorrectly calculated length and position values (<span class="em"><span class="strong">p</span></span> and <span class="em"><span class="strong">n</span></span>) can result in inconsistencies in the real-time message, such as scrambled text. If this happens, this situation can recover during the <a href="#message_reset">Message Reset</a>.</p>
    <p>Length and position values (<span class="em"><span class="strong">p</span></span> and <span class="em"><span class="strong">n</span></span>) are relative to the internal Unicode text of the real-time message, independently of the directionality of actual displayed text. As a result, any valid Unicode text direction can be used with real-time text (right-to-left, left-to-right, and bidirectional).</p>
    </div>
</div>
</div>
    <div class="indent"><h3>4.6 <a name="keeping_realtime_text_synchronized" id="keeping_realtime_text_synchronized">Keeping Real-Time Text Synchronized</a></h3>
    <p>In a chat session, it is important that real-time text stays identical on both the sender and recipient ends. The loss of a single &lt;rtt/&gt; transmission could represent missing text or missing edits. Also, recipients can connect after the sender has already started composing a message. Recovery of in-progress real-time message via <a href="#message_reset">Message Reset</a> is useful in several situations:</p>
    <ul>
      <li>Resuming after connecting (e.g. wireless reception, recipient restarted software, participants joining).</li>
      <li>Resuming after recipient discarded <a href="#stale_messages">Stale Messages</a> (e.g. sender resumes composing hours later).</li>
      <li>XMPP servers may drop &lt;message/&gt; elements (e.g. flooding protection).</li>
      <li>Multiple <a href="#simultaneous_logins">Simultaneous Logins</a> (e.g. switching systems, switching windows, simultaneous typing).</li>
    </ul>
        <div class="indent"><h3>4.6.1 <a name="staying_in_sync" id="staying_in_sync">Staying In Sync</a></h3>
    <p>For &lt;rtt/&gt; elements that do not contain an <a href="#event">event</a> attribute:</p>
    <ol>
      <li>Senders MUST increment the <a href="#seq">seq</a> attribute for consecutively transmitted &lt;rtt/&gt; elements.</li>
      <li>Recipients MUST monitor the <a href="#seq">seq</a> attribute value of received &lt;rtt/&gt; elements, to verify that it is incrementing.</li>
    </ol>
    <p>Recipients MUST keep track of separate real-time messages per sender, including maintaining independent <a href="#seq">seq</a> values. Recipients MAY also use additional methods to distinguish <a href="#simultaneous_logins">Simultaneous Logins</a>, including using the full JID and/or &lt;thread/&gt;. </p>
    </div>
    <div class="indent"><h3>4.6.2 <a name="recovery_from_loss_of_sync" id="recovery_from_loss_of_sync">Recovery From Loss of Sync</a></h3>
    <p>Loss of sync occurs if the <a href="#seq">seq</a> attribute do not increment as expected when <a href="#staying_in_sync">Staying In Sync</a>. In this case:</p>
    <ul>
      <li>Recipients MUST freeze the current real-time message; and</li>
      <li>Recipients MUST ignore action elements within the current and subsequent &lt;rtt/&gt; elements; and</li>
      <li>An indication can be used to show the loss of sync (e.g. color coding, modified chat state message).</li>
    </ul>
    <p>Recovery occurs when the recipient receives the following:</p>
    <ul>
      <li>A &lt;body/&gt; element. The <a href="#body_element">Body Element</a> supersedes the real-time message.</li>
      <li>An &lt;rtt/&gt; element containing an <a href="#event">event</a> attribute (e.g. new message, or <a href="#message_reset">Message Reset</a>).</li>
    </ul>
    </div>
    <div class="indent"><h3>4.6.3 <a name="message_reset" id="message_reset">Message Reset</a></h3>
    <p>A message reset is a retransmission of the sender's partially composed text. The recipient can redisplay the real-time message as a result. It allows real-time text conversation to resume quickly, without waiting for senders to start a new message.</p>
    <p>Retransmission SHOULD be done at an average interval of 10 seconds during active typing or composing. This interval is frequent enough to minimize user waiting time, while being infrequent enough to reduce bandwidth overhead. This interval MAY vary in order to reduce average bandwidth requirements for minor message changes and/or for long messages. For quicker recovery, senders MAY adjust the timing of the message retransmissions to occur right after any of the following additional events: </p>
    <ul>
      <li>When the recipient starts sending messages from a different full JID (e.g. switched systems);</li>
      <li>When the recipient sends a presence update (e.g. from offline to online);</li>
      <li>When the sender resumes composing after an extended pause (e.g. recovery from <a href="#stale_messages">Stale Messages</a> handling);</li>
      <li>When the conversation is unlocked (e.g. section 5.1 of <span class="ref"><a href="http://tools.ietf.org/html/rfc6121">XMPP IM</a></span>  [<a href="#nt-id229027">12</a>]);</li>
    </ul>
    <p>A message reset is done using the &lt;rtt/&gt; attribute <a href="#event">event</a> value of <span class="strong">'reset'</span> (see <a href="#rtt_attributes">RTT Attributes</a>).</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;rtt event='reset' seq='#' xmlns='urn:xmpp:rtt:0'&gt;
  &lt;t&gt;This is a retransmission of the entire real-time message.&lt;/t&gt;
&lt;/rtt&gt;</pre></div></p>
    <p>Note: That there are no restrictions on using multiple <a href="#action_elements">Action Elements</a> during a message reset. (e.g. typing or backspacing occurring at the end of a retransmitted message.)</p>
    </div>
</div>
<h2>5.
       <a name="determining_support" id="determining_support">Determining Support</a></h2>
    <p>If a client supports this real-time text protocol, it MUST advertise that fact in its responses to <span class="ref"><a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</a></span>  [<a href="#nt-id229097">13</a>] information requests ("disco#info") by returning a feature of <span class="strong">urn:xmpp:rtt:0</span></p>
    <p><span class="strong">Example 1. A disco#info query</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;iq from='romeo@montague.lit/orchard'
    id='disco1'
    to='juliet@capulet.lit/balcony'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;

</pre></div></p>
    <p><span class="strong">Example 2. A disco#info response</span></p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;iq from='juliet@capulet.lit/balcony'
    id='disco1'
    to='romeo@montague.lit/orchard'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;feature var='urn:xmpp:rtt:0'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;

</pre></div></p>
    <p>In order for an application to determine whether an entity supports this protocol, where possible it SHOULD use the dynamic, presence-based profile of service discovery defined in <span class="ref"><a href="http://xmpp.org/extensions/xep-0115.html">Entity Capabilities</a></span>  [<a href="#nt-id229147">14</a>]. However, if an application has not received entity capabilities information from an entity, it SHOULD use explicit service discovery instead.</p>
    <p>See <a href="#activating_and_deactivating_realtime_text">Activating and Deactivating Real-Time Text</a> for more information, including implicit discovery.</p>
    <h2>6.
       <a name="implementation_notes" id="implementation_notes">Implementation Notes</a></h2>
        <div class="indent"><h3>6.1 <a name="text_presentation" id="text_presentation">Text Presentation</a></h3>
        <div class="indent"><h3>6.1.1 <a name="avoid_bursty_text_presentation" id="avoid_bursty_text_presentation">Avoid Bursty Text Presentation</a></h3>
    <p>If a long <a href="#transmission_interval">Transmission Interval</a> is used without <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>, then incoming text will appear in intermittent bursts if the display of text is not smoothed. This hurts user experience of real-time text.</p>
    </div>
    <div class="indent"><h3>6.1.2 <a name="preserving_key_press_intervals" id="preserving_key_press_intervals">Preserving Key Press Intervals</a></h3>
    <p>For high quality presentation of real-time text, the original look-and-feel of typing can be preserved independently of the transmission interval. This is achieved using <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> between other <a href="#action_elements">Action Elements</a>. Sender clients can transmit the length of pauses between key presses, and send multiple key presses in a single &lt;message/&gt; stanza. Recipient clients that process &lt;w/&gt; elements are able to display the sender's typing smoothly, without sudden bursts of text. See <a href="#examples_of_key_press_intervals">Examples of Key Press Intervals</a>.</p>
    <p>When key press intervals are preserved at high precision, all subtleties of typing are preserved, including the 'mood' (calm typing versus panicked or emphatic typing, etc.). Much as VoIP allows accurate packet transmission of sound, this spec allows accurate packet transmission of original typing look-and-feel. This enables the real-time feel of typing over virtually any network connection, without requiring frequent transmission intervals. Look and feel of typing is also preserved over variable latency connections including <span class="ref"><a href="http://xmpp.org/extensions/xep-0206.html">XMPP Over BOSH</a></span>  [<a href="#nt-id229253">15</a>], mobile phone, satellite and long international connections with heavy packet-bursting tendencies.</p>
    </div>
    <div class="indent"><h3>6.1.3 <a name="time_critical_and_low_latency_methods" id="time_critical_and_low_latency_methods">Time Critical and Low Latency Methods</a></h3>
    <p>There are specialized situations such as live transcriptions and captioning (e.g. transcription service, closed captioning provider, captioned telephone, Communication Access Realtime Translation (CART), relay services) that demands low latency transmission. Such systems typically use voice recognition and/or stenotype machines, which output text in word bursts rather than a character at a time. It is acceptable for senders with bursty output to immediately transmit word bursts of text without buffering. This eliminates any lag caused by the <a href="#transmission_interval">Transmission Interval</a>. It is not necessary to transmit <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> for real-time transcription.</p>
    </div>
    <div class="indent"><h3>6.1.4 <a name="lowbandwidth_and_lowprecision_text_smoothing" id="lowbandwidth_and_lowprecision_text_smoothing">Low-Bandwidth and Low-Precision Text Smoothing</a></h3>
    <p>Some software platforms (e.g. JavaScript, BOSH, mobile devices) may have low-precision timers that impact <a href="#transmission_interval">Transmission Interval</a> and/or <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>. Clients can optimize for bandwidth, performance and/or screen repaints by eliminating, merging, or ignoring <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> selectively, especially those containing shorter intervals. In addition, it is acceptable for the transmission interval of &lt;rtt/&gt; to vary, either intentionally for optimizations, or due to precision limitation. <span class="ref"><a href="http://xmpp.org/extensions/xep-0138.html">Stream Compression</a></span>  [<a href="#nt-id229342">16</a>] can also be used.</p>
    <p>Clients can choose to implement alternate text-smoothing methods, such as adaptive-rate character-at-a-time output, and/or word buffering for incoming real-time text. Word buffering prevents most typing mistakes from being displayed, which can be a useful mode of operation for certain recipients who may dislike watching the sender's typing mistakes.</p>
    </div>
</div>
    <div class="indent"><h3>6.2 <a name="activating_and_deactivating_realtime_text" id="activating_and_deactivating_realtime_text">Activating and Deactivating Real-Time Text</a></h3>
    <p>Implementers can choose a preferred activation method for real-time text. For example, clients in the assistive market can choose to do immediate activation of real-time text. Popular mainstream clients might do user-initiated activation/confirmation of real-time text. The confirmation process could be similar to common activation methods used for audio/video. It is also beneficial for senders and recipients to easily synchronize the enabling/disabling of real-time text.</p>
        <div class="indent"><h3>6.2.1 <a name="activation_methods" id="activation_methods">Activation Methods</a></h3>
    <p>Activation of real-time text in a chat session (immediate or user-initiated) can be done by:</p>
    <ul>
      <li>Immediately transmitting real-time text (if allowed after <a href="#determining_support">Determining Support</a>); or</li>
      <li>Signaling first (by transmitting a single &lt;rtt <a href="#event">event</a>='init'/&gt; and waiting for response).</li>
    </ul>
    <p>Recipient clients can respond to incoming real-time text with an appropriate response, such as:</p>
    <ul>
      <li>Accepting immediately (by activating in response); or</li>
      <li>Accepting after recipient confirmation (by also activating in response, after a user confirmation prompt); or</li>
      <li>Deny (by transmitting &lt;rtt event='cancel'/&gt; which is used in <a href="#deactivation_methods">Deactivation Methods</a>); or</li>
      <li>Ignoring (by discarding incoming &lt;rtt/&gt; as a last resort, without using <a href="#deactivation_methods">Deactivation Methods</a>).</li>
      <li>Other appropriate responses (e.g. only display incoming real-time text during <a href="#multiuser_chat">Multi-User Chat</a>).</li>
    </ul>
    <p>If <a href="#determining_support">Determining Support</a> allows, then it is not necessary for senders or recipients to transmit &lt;rtt event='init'/&gt; first, as any incoming <a href="#rtt_element">RTT Element</a> (other than &lt;rtt event='cancel'/&gt;) signals the start of incoming real time text. However, it allows signaling of activation before the sender begins typing.</p>
    <p>In the absence of <a href="#determining_support">Determining Support</a>, sender clients can send a single &lt;rtt event='init'/&gt; element to attempt to activate real-time text. It is inappropriate for sender clients to send any further &lt;rtt/&gt; elements unless support is confirmed by discovery, or when the recipient client responds with incoming &lt;rtt/&gt; elements during the same chat session.</p>
    <p>It can be acceptable for software to display incoming real-time text without activating outgoing real-time text. Displaying incoming real-time text while waiting for user confirmation, can be educational to users unfamiliar with real-time text. Care needs to be taken to prevent this situation from becoming confusing to the user. Implementers can add other additional behaviors that are appropriate, such as an introductory note upon first activation, for <a href="#privacy">Privacy</a> considerations.</p>
    </div>
    <div class="indent"><h3>6.2.2 <a name="deactivation_methods" id="deactivation_methods">Deactivation Methods</a></h3>
    <p>Real-time text can be deactivated by any of:</p>
    <ul>
      <li>Sending a signal (using &lt;rtt <a href="#event">event</a>='cancel'/&gt; upon deactivation, deny, or end of chat session); or</li>
      <li>Simply ending the chat session (without transmitting any further &lt;rtt/&gt; elements).</li>
    </ul>
    <p>Recipient clients can respond to deactivation with appropriate responses, such as:</p>
    <ul>
      <li>Discontinue transmission of &lt;rtt/&gt; elements as well (not applicable to <a href="#multiuser_chat">Multi-User Chat</a>); and</li>
      <li>Handle the sender's unfinished incoming real-time message (such as clearing it and/or saving it); and</li>
      <li>Inform the recipient user that sender ended real-time text (or denied/cancelled, if no real-time text was received).</li>
    </ul>
    <p>Sending an &lt;rtt event='cancel'/&gt; is useful in situations where the user closes a chat window, and ends the chat session. It is useful when the user wants to deactivate real-time text, while still continuing the chat session. After deactivation, any client can reactivate real-time text again in accordance to <a href="#activation_methods">Activation Methods</a>.</p>
    </div>
</div>
    <div class="indent"><h3>6.3 <a name="optional_remote_cursor" id="optional_remote_cursor">Optional Remote Cursor</a></h3>
    <p>Recipient clients might choose to display a cursor (or caret) within incoming real-time messages. This enhances usability of real-time text further, since it becomes easier for a recipient to observe the sender's real-time message edits.</p>
    <p>If a remote cursor is not used, then clients can simply ignore calculating a cursor position and skip this section. All action elements only have absolute positioning, and positioning does not depend on previous action elements, so clients do not need to remember the previous cursor position.</p>
        <div class="indent"><h3>6.3.1 <a name="calculating_cursor_position" id="calculating_cursor_position">Calculating Cursor Position</a></h3>
    <p>When &lt;t/&gt;, &lt;e/&gt;, or &lt;d/&gt; action elements are processed in incoming real-time text, the beginning value for the cursor position calculation is the absolute position value of the <span class="em"><span class="strong">p</span></span> attribute, according to <a href="#summary_of_attribute_values">Summary of Attribute Values</a>. The recipient can calculate the cursor position as follows:</p>
    <ul>
      <li><p>After <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a>, the cursor position is the <span class="em"><span class="strong">p</span></span> attribute plus the length of the text being inserted. The cursor position is put at the end of inserted text.<br />
        <span class="em">This is the normal forward cursor movement during text insertion.</span></p></li>
      <li><p>After <a href="#element_e_backspace">Element &lt;e/&gt; – Backspace</a>, the cursor position is the <span class="em"><span class="strong">p</span></span> attribute minus the <span class="em"><span class="strong">n</span></span> attribute.<br />
        <span class="em">This is the normal backwards cursor movement to a Backspace key.</span></p></li>
      <li><p>After <a href="#element_d_forward_delete">Element &lt;d/&gt; – Forward Delete</a>, the cursor position is the <span class="em"><span class="strong">p</span></span> attribute, unaffected by the <span class="em"><span class="strong">n</span></span> attribute.<br />
        <span class="em">This is the normal stationary cursor response to a Delete key.</span></p></li>
      <li><p>After an empty <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a> (in the format of <span class="strong">&lt;t p='#'/&gt;</span> with no text to insert), the cursor position is the <span class="strong">p</span> attribute, and no text modification is done.<br />
        <span class="em">This allows cursor response to arrow keys and/or mouse repositioning the cursor.</span></p></li>
    </ul>
    <p>The remote cursor needs to be clearly distinguishable from the sender's real local cursor. One example is to use a non-blinking cursor, easily emulated with a Unicode character or the vertical bar character '|'.</p>
    <p>It is acceptable for the sender to transmit <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a> as empty elements (with the cursor position in the <span class="em"><span class="strong">p</span></span> attribute) whenever the cursor position is changing without any text modifications (i.e. via arrow keys or mouse). This allows recipients supporting a remote cursor, to show the cursor movements. These extra elements are ignored by recipients that do not support a remote cursor.</p>
    </div>
</div>
    <div class="indent"><h3>6.4 <a name="sending_realtime_text" id="sending_realtime_text">Sending Real-Time Text</a></h3>
    <p>This section lists several possible methods of generating real-time text for transmission. For most situations, the preferred methodology is <a href="#monitoring_message_changes_instead_of_key_presses">Monitoring Message Changes Instead Of Key Presses</a>.</p>
        <div class="indent"><h3>6.4.1 <a name="monitoring_message_changes_instead_of_key_presses" id="monitoring_message_changes_instead_of_key_presses">Monitoring Message Changes Instead Of Key Presses</a></h3>
    <p>Experience has found that the most reliable method for generating real-time text, is to monitor for <span class="strong">text changes</span> to the sender’s message entry field, instead of key press events. Text change events have the following advantages:</p>
    <ul>
      <li>It captures all typing, including edits and deletes.</li>
      <li>It captures copy &amp; paste operations, as well as edits made via a pointing device.</li>
      <li>It captures all automatic text changes (e.g. spell checker, auto-correct, macros, transcription, assistive devices).</li>
      <li>It captures characters requiring multiple key presses to compose (e.g. accents, combining marks).</li>
      <li>It makes no assumptions about different keyboards or input method editors (e.g. Chinese).</li>
      <li>Text change events are more portable across platforms, including on mobile phones.</li>
    </ul>
    <p>During a text change event, the sender’s current message text can be compared to the old message text (from before the text change event). In order to calculate what text changes took place, the first changed character and the last changed character is determined. From this, it is possible to generate <a href="#action_elements">Action Elements</a> for any text insertion and deletions. In addition, if <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a> is supported, then <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> records the time elapsed between text change events.</p>
    <p>Sender software can do the following:</p>
    <ol>
      <li><p>Monitor for text changes in the sender’s message. Whenever a text change event occurs, compute action elements and append these action elements to a buffer. This is equivalent to recording a small sequence of typing.</p></li>
      <li><p>During every <a href="#transmission_interval">Transmission Interval</a>, all buffered action elements are transmitted in &lt;rtt/&gt; element in a &lt;message/&gt; stanza. This is equivalent to transmitting a small sequence of typing at a time.</p></li>
      <li><p>If there are no message changes occurring, no unnecessary transmission takes place.</p></li>
    </ol>
    </div>
    <div class="indent"><h3>6.4.2 <a name="monitoring_key_presses_directly" id="monitoring_key_presses_directly">Monitoring Key Presses Directly</a></h3>
    <p>Real-time text can be generated via monitoring key presses. However, this does not have the advantages of <a href="#monitoring_message_changes_instead_of_key_presses">Monitoring Message Changes Instead Of Key Presses</a>. Care needs be taken with automatic changes to the message, generated by means other than key presses. This includes spell check auto-correct, copy and pastes, transcription, input method editors, and multiple key presses required to compose a character (i.e. accents). Key press events do not capture these text changes, and this can cause real-time text to go out of sync between the sender and the recipient.</p>
    </div>
    <div class="indent"><h3>6.4.3 <a name="basic_realtime_text" id="basic_realtime_text">Basic Real-Time Text</a></h3>
    <p>Sender clients may choose to implement <a href="#message_reset">Message Reset</a> as the only method of transmitting changes to real-time message. The entire message is simply retransmitted every <a href="#transmission_interval">Transmission Interval</a> whenever there are any text changes. The below is a transmission of the real-time message “<span class="strong">Hello there!</span>” at regular intervals while the sender is typing.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;Hel&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='b02'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='456002' event='reset'&gt;
    &lt;t&gt;Hello th&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='c03'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='789003' event='reset'&gt;
    &lt;t&gt;Hello there!&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    <p>The advantage is very simple implementation. However, disadvantages include the lack of <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>, and extra bandwidth consumption that can occur with longer messages, unless stream compression is used.</p>
    </div>
    <div class="indent"><h3>6.4.4 <a name="appendonly_realtime_text" id="appendonly_realtime_text">Append-Only Real-Time Text</a></h3>
    <p>The use of <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a> without any attributes, simply appends text to the end of a message, while the use of <a href="#element_e_backspace">Element &lt;e/&gt; – Backspace</a> without any attributes, simply erases text from the end of the message. These simple action elements are useful if mid-message editing capabilities are not used (e.g. simple transcription, news tickers, relay services, captioned telephone).</p>
    <p>If editing is needed in the middle of a message, without adding sender support for other <a href="#action_elements">Action Elements</a>, the use of <a href="#message_reset">Message Reset</a> supports situations where mid-message editing takes place. In this situation, the disadvantages include the lack of <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>, and extra bandwidth consumption that can occur with longer messages, unless stream compression is used.</p>
    </div>
</div>
    <div class="indent"><h3>6.5 <a name="receiving_realtime_text" id="receiving_realtime_text">Receiving Real-Time Text</a></h3>
    <p>In order to allow <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a> in incoming real-time text, recipient clients can do the following:</p>
    <ol>
      <li><p>Upon receiving <a href="#action_elements">Action Elements</a> in incoming &lt;rtt/&gt; elements, they are added to a queue in the order they are received. This provides immunity to variable network conditions, since the queueing action smooth out the latency fluctuations of incoming transmission.</p></li>
      <li><p>The recipient client processes action elements in the queue in sequential order, including pauses from <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a>. This is equivalent to playing back the sender's original typing.</p></li>
      <li><p>Upon receiving a <a href="#body_element">Body Element</a> indicating a completed message, the full message text from &lt;body/&gt; can be displayed immediately in place of the real-time message, and unprocessed action elements can be cleared from the queue. This ensures final message delivery is not delayed by late processing of action elements.</p></li>
    </ol>
    <p>In processing <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a>, excess lag in incoming real-time text might occur if multiple delayed &lt;rtt/&gt; elements suddenly get delivered (e.g. congestion, intermittent wireless reception). Recipients can avoid excess lag by monitoring the queue for excess &lt;w/&gt; action elements (e.g. unprocessed &lt;w/&gt; elements from two &lt;rtt/&gt; elements ago) and then ignoring or shortening the intervals in &lt;w/&gt; elements. This allows lagged real-time text to "catch up" more quickly. In addition, it is best to process &lt;w/&gt; elements using non-blocking programming techniques.</p>
    </div>
    <div class="indent"><h3>6.6 <a name="other_guidelines" id="other_guidelines">Other Guidelines</a></h3>
    <p><a href=""></a>There are other special basic considerations for real-time message transmissions that need to be considered by implementers.</p>
        <div class="indent"><h3>6.6.1 <a name="message_length" id="message_length">Message Length</a></h3>
    <p>A large sequence of action elements can result in an &lt;rtt/&gt; larger than the size of a message &lt;body/&gt;. This can occur normally during fast typing when <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a> during small messages. However, if the &lt;rtt/&gt; element becomes unusually huge (e.g. macros, multiple copy and pastes, leading to an &lt;rtt/&gt; exceeding one kilobyte) a <a href="#message_reset">Message Reset</a> can instead be used, in order to save bandwidth. (Stream compression is another approach.)</p>
    <p>Clients can limit the length of the text input for the sender's message, in order to keep the size of &lt;message/&gt; stanzas reasonable, including during <a href="#message_reset">Message Reset</a>. Also, large &lt;rtt/&gt; elements may occur in situations such as large copy and pastes. To keep message stanza sizes reasonable, &lt;rtt/&gt; can be transmitted in a separate &lt;message/&gt; than the one containing &lt;body/&gt;.</p>
    <p>For specialized clients that send continuous real-time text (e.g. news ticker, captioning, transcription, TTY gateway), a <a href="#body_element">Body Element</a> can be automatically sent when messages reach a certain length. This allows continuous real-time text without real-time messages becoming excessively large.</p>
    </div>
    <div class="indent"><h3>6.6.2 <a name="usage_with_chat_states" id="usage_with_chat_states">Usage with Chat States</a></h3>
    <p>Real-time text can be used in conjunction with XEP-0085 <span class="ref"><a href="http://xmpp.org/extensions/xep-0085.html">Chat State Notifications</a></span>  [<a href="#nt-id230151">17</a>]. These are simple guidelines for &lt;message/&gt; stanzas that include an &lt;rtt/&gt; element:</p>
    <ul>
      <li>For &lt;rtt/&gt; transmitted without an accompanying &lt;body/&gt;, include &lt;composing/&gt; chat state.</li>
      <li>For &lt;rtt/&gt; transmitted with an accompanying &lt;body/&gt;, include the &lt;active/&gt; chat state.</li>
      <li>Other chat states are handled as specified by XEP-0085 Chat States.</li>
    </ul>
    </div>
    <div class="indent"><h3>6.6.3 <a name="usage_with_multiuser_chat_and_simultaneous_logins" id="usage_with_multiuser_chat_and_simultaneous_logins">Usage with Multi-User Chat and Simultaneous Logins</a></h3>
    <p>The in-band nature of this real-time text standard allows one-to-many situations. Thus, real-time text is appropriate for use with <span class="ref"><a href="http://xmpp.org/extensions/xep-0045.html">Multi-User Chat</a></span>  [<a href="#nt-id230240">18</a>] (MUC), as well as concurrent simultaneous logins.</p>
        <div class="indent"><h3>6.6.3.1 <a name="multiuser_chat" id="multiuser_chat">Multi-User Chat</a></h3>
    <p>For simplicity, clients can implement real-time text only for one-on-one chat, and not for MUC. However, it can be appropriate to support &lt;rtt/&gt; elements in MUC, even if not all participants support real-time text. Participants that enable real-time text during group chat need to keep track of multiple concurrent real-time messages on a per-participant basis. Participants, with real-time text, will see real-time text coming from each participant that has real-time text enabled. Participant clients without real-time text (whether unsupported or turned off) will simply see group chat function normally on a line-by-line basis, since it is <a href="#backwards_compatible">Backwards Compatible</a>.</p>
    <p>Participants that turn off real-time text for themselves, can simply ignore incoming &lt;rtt/&gt; and not transmit outgoing &lt;rtt/&gt;. Participant clients in MUC receiving an incoming &lt;rtt <a href="#event">event</a>=’cancel’/&gt; needs to keep outgoing transmission unaffected during <a href="#deactivation_methods">Deactivation Methods</a> (otherwise, one participant could deny real-time text between other willing participants).</p>
    <p>To minimize on-screen clutter of multiple idle real-time messages, clients can hide idle messages, clear old <a href="#stale_messages">Stale Messages</a>, and/or prioritize the display of the most useful real-time messages. Prominent visibility of real-time text can be assigned to recent typists and/or moderators (e.g. classroom teacher, convention speaker). For the same participant logged in multiple times in the same room, see <a href="#simultaneous_logins">Simultaneous Logins</a>. In situations of simultaneous typing by a large number of participants, see <a href="#congestion_considerations">Congestion Considerations</a>.</p>
    </div>
    <div class="indent"><h3>6.6.3.2 <a name="simultaneous_logins" id="simultaneous_logins">Simultaneous Logins</a></h3>
    <p>In simultaneous login situations, transmitting of &lt;rtt/&gt; works in one-to-many situations without any special software support. For many-to-one situations where there is incoming &lt;rtt/&gt; from more than one simultaneous login, <a href="#keeping_realtime_text_synchronized">Keeping Real-Time Text Synchronized</a> will pause the real-time message upon conflicting &lt;rtt/&gt;, and resume during the next <a href="#message_reset">Message Reset</a>, presumably from the active login. This provides a seamless system-switching experience. A good implementation of <a href="#message_reset">Message Reset</a> will improve user experience, regardless of whether or not the client follows Best Practices For Resource Locking (XEP-0296). Clients can choose to distinguish the &lt;rtt/&gt; streams (via full JID and/or via &lt;thread/&gt;) and keep multiple concurrent real-time messages similar in manner to <a href="#multiuser_chat">Multi-User Chat</a>, with the <a href="#stale_messages">Stale Messages</a> being timed-out.</p>
    </div>
</div>
    <div class="indent"><h3>6.6.4 <a name="stale_messages" id="stale_messages">Stale Messages</a></h3>
    <p>There are situations where senders pause typing indefinitely. This can result in recipients displaying a real-time message for an extended time period. It may also be a screen clutter concern during <a href="#multiuser_chat">Multi-User Chat</a>. In addition, it may be a resource-consumption concern, as part of <a href="#congestion_considerations">Congestion Considerations</a>.</p>
    <p>It is acceptable for recipients to clear (and/or save) incoming real-time messages that have been idle for an extended time period. There is no specific time-out period defined by this specification. For <a href="#multiuser_chat">Multi-User Chat</a>, the time-out period might be shorter because of the need to reduce screen clutter. For normal chat sessions, the time-out period might need to be longer to allow reasonable interruptions (i.e. sender pausing during a long phone call).</p>
    <p>Senders that resume composing a message (i.e. continues a partially-composed message hours later) can transmit a <a href="#message_reset">Message Reset</a>, which allows recipients to redisplay the real-time message.</p>
    </div>
    <div class="indent"><h3>6.6.5 <a name="performance_efficiency" id="performance_efficiency">Performance &amp; Efficiency</a></h3>
    <p>With real-time text, frequent screen updates can occur. Screen updates are a potential performance bottleneck, since fast typists type many key presses per second. Optimizing screen updates becomes especially important for slower platforms. Real-time messages need to be redisplayed efficiently in a flicker-free manner. The real-time message might be implemented as a separate window or separate display element.</p>
    <p>Battery life considerations are closely related to performance, as the addition of real-time text may impact battery life. If <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a> are supported, then the implementation of <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> needs to be implemented in a battery-efficient manner. The <a href="#transmission_interval">Transmission Interval</a> may vary dynamically to optimize for battery life and wireless reception. For devices where screen updates are an unavoidable inefficient bottleneck, see <a href="#lowbandwidth_and_lowprecision_text_smoothing">Low-Bandwidth and Low-Precision Text Smoothing</a> to reduce the number of screen updates per second.</p>
    </div>
    <div class="indent"><h3>6.6.6 <a name="total_conversation_combination_with_audio_and_video" id="total_conversation_combination_with_audio_and_video">Total Conversation – Combination with Audio and Video</a></h3>
    <p>According to ITU-T Rec. F.703, the “Total Conversation” accessibility standard defines the simultaneous use of audio, video, and real-time text. For convenience, messaging applications may be designed to have automatic negotiation of as many as possible of the three media preferred by the users.</p>
    <p>In the XMPP session environment, the Jingle protocol (<span class="ref"><a href="http://xmpp.org/extensions/xep-0166.html">Jingle</a></span>  [<a href="#nt-id230462">19</a>]) is available for negotiation and transport of the more time-critical, real-time audio and video media. Any combination of audio, video, and real-time text can be used together simultaneously.</p>
    </div>
</div>
<h2>7.
       <a name="use_cases" id="use_cases">Use Cases</a></h2>
    <p>Most of these examples are deliberately kept simple. In complete software implementations supporting key press intervals, transmissions will most resemble the last example, <a href="#full_message_including_key_press_intervals">Full Message Including Key Press Intervals</a>.</p>
        <div class="indent"><h3>7.1 <a name="example_of_simple_real_time_text" id="example_of_simple_real_time_text">Example of Simple Real Time Text</a></h3>
    <p>All three examples shown below result in the same real-time message "<span class="strong">HELLO</span>" created by writing "<span class="strong">HLL</span>", backspacing two times, and then "<span class="strong">ELLO</span>". The action elements are <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a> and <a href="#element_e_backspace">Element &lt;e/&gt; – Backspace</a>.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;HLL&lt;/t&gt;
    &lt;e/&gt;&lt;e/&gt;
    &lt;t&gt;ELLO&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>The example above sends the misspelled "<span class="strong">HLL</span>", then <span class="strong">&lt;e/&gt;&lt;e/&gt;</span> backspaces 2 times, then sends "<span class="strong">HELLO</span>".</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;HLL&lt;/t&gt;
    &lt;e n='2'/&gt;
    &lt;t&gt;ELLO&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>The example above shows that <span class="strong">&lt;e n='2'/&gt;</span> does the same thing as <span class="strong">&lt;e/&gt;&lt;e/&gt;</span>.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;HLL&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='b02'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123002'&gt;
    &lt;e n='2'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='c03'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123003'&gt;
    &lt;t&gt;ELLO&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>The example above splits the same real-time text over multiple &lt;message/&gt; stanzas, which would occur if the typing was occurring more slowly, over several <a href="#transmission_interval">Transmission Interval</a> cycles.</p>
    </div>
    <div class="indent"><h3>7.2 <a name="example_of_multiple_messages" id="example_of_multiple_messages">Example of Multiple Messages</a></h3>
    <p>The example below represents a short chat session of three separate messages:<br />
    Bob says: "Hello Alice"<br />
    Bob says: "This is Bob"<br />
    Bob says: "How are you?"</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;Hello&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;composing/&gt;
&lt;/message&gt;
 
&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='b02'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123002'&gt;
    &lt;t&gt; Alice&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;body&gt;Hello Alice&lt;/body&gt;
  &lt;active/&gt;
&lt;/message&gt;
 
 
&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='c03'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='456001' event='new'&gt;
    &lt;t&gt;This i&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;composing/&gt;
&lt;/message&gt;
 
&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='d04'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='456002'&gt;
    &lt;t&gt;s Bob&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;body&gt;This is Bob&lt;/body&gt;
  &lt;active/&gt;
&lt;/message&gt;
 
 
&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='e05'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='789001' event='new'&gt;
    &lt;t&gt;How a&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;composing/&gt;
&lt;/message&gt;
 
&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='f06'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='789002'&gt;
    &lt;t&gt;re yo&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;composing/&gt;
&lt;/message&gt;
 
&lt;message to='alice@example.com' from='bob@example.com/home' type='chat' id='g07'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='789003'&gt;
    &lt;t&gt;u?&lt;/t&gt;
  &lt;/rtt&gt;
  &lt;body&gt;How are you?&lt;/body&gt;
  &lt;active/&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>The example above represents moderate typing speed during a normal <a href="#transmission_interval">Transmission Interval</a>, such as 0.7 seconds between &lt;message/&gt; stanzas for continuous typing. It illustrates the following:</p>
    <ul>
      <li>The <span class="strong"><a href="#event">event</a></span> attribute equals 'new' for the start of every new message.</li>
      <li>The <span class="strong"><a href="#seq">seq</a></span> attribute increments within the same message.</li>
      <li>The <span class="strong"><a href="#seq">seq</a></span> attribute randomizes when beginning of a new message.</li>
      <li>This shows <a href="#usage_with_chat_states">Usage with Chat States</a>.</li>
    </ul>
    </div>
    <div class="indent"><h3>7.3 <a name="examples_of_message_edits" id="examples_of_message_edits">Examples of Message Edits</a></h3>
    <p>These examples illustrate real-time message editing via <a href="#action_elements">Action Elements</a>.<br />
    Note: In most situations, during normal human typing speeds at a normal <a href="#transmission_interval">Transmission Interval</a>, smaller fragments of text will be spread over multiple &lt;rtt/&gt;, than these demonstration &lt;rtt/&gt; examples below. See <a href="#sending_realtime_text">Sending Real-Time Text</a>.</p>
        <div class="indent"><h3>7.3.1 <a name="deleting_text_from_message" id="deleting_text_from_message">Deleting Text From Message</a></h3>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;Hello Bob, this is Alice!&lt;/t&gt;
    &lt;d n='4' p='5'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>Final result of real-time message: "<span class="strong">Hello, this is Alice!</span>"<br />
    This example outputs "<span class="strong">Hello Bob, this is Alice!</span>" then <span class="strong">&lt;d n='4' p='5'/&gt;</span> deletes 4 characters from position 5. The <a href="#element_d_forward_delete">Element &lt;d/&gt; – Forward Delete</a> removes the text " <span class="strong">Bob</span>" including the preceding space character.</p>
    </div>
    <div class="indent"><h3>7.3.2 <a name="inserting_text_into_message" id="inserting_text_into_message">Inserting Text Into Message</a></h3>
    


    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;Hello, this is Alice!&lt;/t&gt;
    &lt;t p='5'&gt; Bob&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>Final result of real-time message: "<span class="strong">Hello Bob, this is Alice!</span>"<br />
    This is because this example outputs "<span class="strong">Hello, this is Alice!</span>" then the <span class="strong">&lt;t p='5'&gt;</span> inserts the specified text " <span class="strong">Bob</span>" at position 5, using <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a>.</p>
    </div>
    <div class="indent"><h3>7.3.3 <a name="deleting_and_replacing_text_in_message" id="deleting_and_replacing_text_in_message">Deleting and Replacing Text In Message</a></h3>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;Hello Bob, tihsd is Alice!&lt;/t&gt;
    &lt;d p='11' n='5'/&gt;
    &lt;t p='11'&gt;this&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>Final result of real-time message: "<span class="strong">Hello Bob, this is Alice!</span>"<br />
    This example outputs "<span class="strong">Hello Bob, tihsd is Alice!</span>", then <span class="strong">&lt;d p='11' n='5'/&gt;</span> deletes 5 characters at position 11 in the string of text (which erases the mistyped word "<span class="strong">tihsd</span>"). Finally, <span class="strong">&lt;t p='11'&gt;this&lt;/t&gt;</span> inserts the text "<span class="strong">this</span>" place of the original misspelled word.</p>
    </div>
    <div class="indent"><h3>7.3.4 <a name="multiple_message_edits" id="multiple_message_edits">Multiple Message Edits</a></h3>
    <p>This is an example message containing multiple consecutive real-time message edits. This illustrates valid use of the &lt;rtt/&gt; element.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;Helo&lt;/t&gt;
    &lt;e/&gt;
    &lt;t&gt;lo...planet&lt;/t&gt;
    &lt;e n='6'/&gt;
    &lt;t&gt; World&lt;/t&gt;
    &lt;d n='3' p='5'/&gt;
    &lt;t p='5'&gt; there,&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>Resulting real-time message: "<span class="strong">Hello there, World</span>", completed in the following series of action elements:</p>
        <div class="indent"><p class="caption"><a name="table-3" id="table-3"></a>Table 3: </p><table border="1" cellpadding="3" cellspacing="0">
          <tr class="body">
            <th>Element</th>
            <th>Action</th>
            <th>Real -Time Message</th>
            <th>Cursor Position*</th>
          </tr>
          <tr class="body">
            <td>&lt;t&gt;Helo&lt;/t&gt;</td>
            <td>Output "Helo"</td>
            <td>Helo</td>
            <td>4</td>
          </tr>
          <tr class="body">
            <td>&lt;e/&gt;</td>
            <td>Backspace 1 character from end of line.</td>
            <td>Hel</td>
            <td>3</td>
          </tr>
          <tr class="body">
            <td>&lt;t&gt;lo...planet&lt;/t&gt;</td>
            <td>Output "lo...planet" at end of line.</td>
            <td>Hello...planet</td>
            <td>14</td>
          </tr>
          <tr class="body">
            <td>&lt;e n='6'/&gt;</td>
            <td>Backspace 6 characters from end of line</td>
            <td>Hello...</td>
            <td>8</td>
          </tr>
          <tr class="body">
            <td>&lt;t&gt; World&lt;/t&gt;</td>
            <td>Output " World" at end of line.</td>
            <td>Hello... World</td>
            <td>14</td>
          </tr>
          <tr class="body">
            <td>&lt;d n='3' p='5'/&gt;</td>
            <td>Delete 3 characters at position 5</td>
            <td>Hello World</td>
            <td>5</td>
          </tr>
          <tr class="body">
            <td>&lt;t p='5'&gt; there,&lt;/t&gt;</td>
            <td>Output " there," at position 5</td>
            <td>Hello there, World</td>
            <td>12</td>
          </tr>
        </table></div>
    <p>*The Cursor Position column is only relevant if the <a href="#optional_remote_cursor">Optional Remote Cursor</a> is implemented.</p>
    <p>This example does not illustrate <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>. Also, it is noted that most situations, during normal typing speeds at a normal <a href="#transmission_interval">Transmission Interval</a>, the series of <a href="#action_elements">Action Elements</a> will typically be spread over multiple separate &lt;rtt/&gt; elements.</p>
    </div>
</div>
    <div class="indent"><h3>7.4 <a name="examples_of_key_press_intervals" id="examples_of_key_press_intervals">Examples of Key Press Intervals</a></h3>
        <div class="indent"><h3>7.4.1 <a name="comparison_with_and_without_intervals" id="comparison_with_and_without_intervals">Comparison With and Without Intervals</a></h3>
    <p>All examples shown below, result in the same real-time message “<span class="strong">HELLO</span>”. Only the last example follows <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;HELLO&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    <p>The above example outputs “<span class="strong">HELLO</span>” in a single action element (<a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a>).</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;H&lt;/t&gt;
    &lt;t&gt;E&lt;/t&gt;
    &lt;t&gt;L&lt;/t&gt;
    &lt;t&gt;L&lt;/t&gt;
    &lt;t&gt;O&lt;/t&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    <p>The above example outputs “<span class="strong">HELLO</span>” in separate action elements for each key press.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;H&lt;/t&gt;&lt;w n='101'/&gt;
    &lt;t&gt;E&lt;/t&gt;&lt;w n='110'/&gt;
    &lt;t&gt;L&lt;/t&gt;&lt;w n='125'/&gt;
    &lt;t&gt;L&lt;/t&gt;&lt;w n='103'/&gt;
    &lt;t&gt;O&lt;/t&gt;&lt;w n='110'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;</pre></div></p>
    <p>The above example outputs “<span class="strong">HELLO</span>” in separate action elements for each key press, while also <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>. The <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> specifies the number of milliseconds between key presses, to allow smooth presentation in recipient clients that support &lt;w/&gt; action elements.</p>
    </div>
    <div class="indent"><h3>7.4.2 <a name="full_message_including_key_press_intervals" id="full_message_including_key_press_intervals">Full Message Including Key Press Intervals</a></h3>
    <p>This example is a transmission of “Hello there!” while <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>. It illustrates a four-second typing sequence:</p>
    <ul>
      <li>The misspelled phrase “Hello tehre!” is typed;</li>
      <li>Optional transmission of cursor movements towards the typing mistake;</li>
      <li>Two backspaces to delete the typing mistake;</li>
      <li>Two correct key presses to correctly spell the word “there”.</li>
    </ul>
    <p>The use <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a>, between key presses, allows the receiving client execute a small pause between action elements. This allows recipient clients to play back the sender's typing fluidly.</p>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='a01'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123001' event='new'&gt;
    &lt;t&gt;H&lt;/t&gt;
    &lt;w n='115'/&gt;&lt;t&gt;e&lt;/t&gt;
    &lt;w n='154'/&gt;&lt;t&gt;l&lt;/t&gt;
    &lt;w n='151'/&gt;&lt;t&gt;l&lt;/t&gt;
    &lt;w n='115'/&gt;&lt;t&gt;o&lt;/t&gt;
    &lt;w n='165'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='b02'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123002'&gt;
    &lt;w n='40'/&gt;&lt;t&gt; &lt;/t&gt;
    &lt;w n='161'/&gt;&lt;t&gt;t&lt;/t&gt;
    &lt;w n='137'/&gt;&lt;t&gt;e&lt;/t&gt;
    &lt;w n='135'/&gt;&lt;t&gt;h&lt;/t&gt;
    &lt;w n='134'/&gt;&lt;t&gt;r&lt;/t&gt;
    &lt;w n='93'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='c03'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123003'&gt;
    &lt;w n='109'/&gt;&lt;t&gt;e&lt;/t&gt;
    &lt;w n='115'/&gt;&lt;t&gt;!&lt;/t&gt;
    &lt;w n='330'/&gt;&lt;t p='11'/&gt;
    &lt;w n='108'/&gt;&lt;t p='10'/&gt;
    &lt;w n='38'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='d04'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123004'&gt;
    &lt;w n='109'/&gt;&lt;t p='9'/&gt;
    &lt;w n='111'/&gt;&lt;e p='9'/&gt;
    &lt;w n='106'/&gt;&lt;e p='8'/&gt;
    &lt;w n='138'/&gt;&lt;t p='7'&gt;h&lt;/t&gt;
    &lt;w n='209'/&gt;&lt;t p='8'&gt;e&lt;/t&gt;
    &lt;w n='27'/&gt;
  &lt;/rtt&gt;
&lt;/message&gt;

&lt;message to='bob@example.com' from='alice@example.com/home' type='chat' id='d04'&gt;
  &lt;rtt xmlns='urn:xmpp:rtt:0' seq='123005'&gt;
    &lt;w n='445'/&gt;&lt;t p='12'/&gt;
  &lt;/rtt&gt;
  &lt;body&gt;Hello there!&lt;/body&gt;
&lt;/message&gt;</pre></div></p>
    


    <p>This example also illustrates the following:</p>
    <ul>
      <li>Typing is done via <a href="#element_t_insert_text">Element &lt;t/&gt; – Insert Text</a>.</li>
      <li>Backspaces are done via <a href="#element_e_backspace">Element &lt;e/&gt; – Backspace</a>.</li>
      <li>There is a final transmission with a <a href="#body_element">Body Element</a>, when the message is finished.</li>
      <li>Intervals between key presses are done via <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a>.</li>
      <li>Each &lt;message/&gt; is delivered at a regular <a href="#transmission_interval">Transmission Interval</a>, typically 0.7 seconds.</li>
      <li>Cursor movements via empty &lt;t/&gt; elements. Sender transmission is not essential, but can be desirable for recipient clients supporting an <a href="#optional_remote_cursor">Optional Remote Cursor</a>.</li>
      <li>Recipient clients that do not support <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a> and/or <a href="#optional_remote_cursor">Optional Remote Cursor</a>, will still display this message normally.</li>
      <li>The total sum of all values in <a href="#element_w_wait_interval">Element &lt;w/&gt; – Wait Interval</a> in one &lt;message/&gt; equal the <a href="#transmission_interval">Transmission Interval</a> during periods of continuous typing. This also results in some &lt;w/&gt; interval elements being split between consecutive messages. Although not critical, it can further improve the fluidity of <a href="#receiving_realtime_text">Receiving Real-Time Text</a>.</li>
      <li>See <a href="#monitoring_message_changes_instead_of_key_presses">Monitoring Message Changes Instead Of Key Presses</a> for more info.</li>
    </ul>
    </div>
</div>
<h2>8.
       <a name="interoperability_considerations" id="interoperability_considerations">Interoperability Considerations</a></h2>
    <p>There are other real-time text formats with interoperability considerations relating to the session setup level, the media transport level, and presentation level. Interoperability specifications between multiple real-time text formats can be found in the Interoperability section of <span class="ref"><span class="strong"><a href="http://www.realtimetext.org">Real-Time Text Taskforce</a></span></span>
   [<a href="#nt-id231334">20</a>].</p>
    <p>It is appropriate for implementers to choose the most appropriate real-time text standard for the session control standard in use during a particular session. Clients that use XMPP (e.g. Google Talk) would utilize this XEP-0301 specification. Clients that use SIP can utilize IETF RFC 4103, <span class="ref"><span class="strong"><a href="http://tools.ietf.org/html/rfc5194">IETF RFC 5194</a></span></span>  [<a href="#nt-id231361">21</a>] and ITU-T T.140. Clients that run on multiple networks, may need to utilize multiple real-time text standards. To interoperate between incompatible real-time text standards, gateway servers can transcode between different real-time text standards, along with other media such as audio and video. This can include TTY and textphones. Also, see <a href="#total_conversation_combination_with_audio_and_video">Total Conversation – Combination with Audio and Video</a>.</p>
        <div class="indent"><h3>8.1 <a name="rfc_4103_and_t140" id="rfc_4103_and_t140">RFC 4103 and T.140</a></h3>
    <p>In the SIP environment, real-time text is specified in IETF RFC 4103 and ITU-T T.140. SIP is a popular real-time session control protocol, and there are many implementations of real-time text controlled by SIP. This includes some emergency service organizations (e.g. Reach 112).</p>
    <p>Interoperability considerations include addressing translation, media negotiation and translation, and media transcoding. Transcoding is straightforward between this specification and T.140/RFC4103, except for editing in the middle of messages. Text insertions or deletions, occurring far back in the message, can cause a large number of erase operations in T.140 that consume time and bandwidth. T.140 specifies the use of ISO 6429 control codes for presentation characteristics, such as text color, that are not supported by this specification. During transcoding, these control codes needs to be filtered off in order to not disturb the presentation of text.</p>
    </div>
<h2>9.
       <a name="internationalization_considerations" id="internationalization_considerations">Internationalization Considerations</a></h2>
    <p>The primary internationalization consideration involve real-time message editing via <a href="#action_elements">Action Elements</a>, where text is inserted and deleted using index and position values. In particular, correct <a href="#unicode_character_counting">Unicode Character Counting</a> needs to be followed, due to the existence of variable-length encodings and right-to-left text. Also, <a href="#accurate_processing_of_action_elements">Accurate Processing of Action Elements</a> will ensure that all possible valid Unicode text can be used via this protocol. This can include text containing multiple scripts/languages, ideographic symbols (e.g. Chinese), right-to-left text (e.g. Arabic), and bidirectional text.</p>
    <p>For accessibility considerations, there is an <span class="ref"><span class="strong"><a href="http://www.fasttext.org">International Symbol of Real-Time Text</a></span></span>
   [<a href="#nt-id231451">22</a>] to alert users to the existence of this feature.</p>
    <h2>10.
       <a name="security_considerations" id="security_considerations">Security Considerations</a></h2>
        <div class="indent"><h3>10.1 <a name="privacy" id="privacy">Privacy</a></h3>
    <p>It is important for implementers of real-time text to educate users about real-time text. Users of real-time text needs to be aware that their typing is now visible in real-time to everyone in the current chat conversation. This may have security implications if users copy &amp; paste private information into their chat entry buffer (e.g. a shopping invoice) before editing out the private parts of the pasted text (e.g. a credit card number) before they send the message. With real-time message editing, recipients can watch all text changes that occur in the sender's text, before the sender sends the final message. Implementation behaviors and improved education can be added to reduce privacy issues. Examples include showing an introduction upon first activation of feature, special handling for copy and pastes (i.e. preventing them, or prompting for confirmation), recipient confirmation of real-time text via <a href="#activating_and_deactivating_realtime_text">Activating and Deactivating Real-Time Text</a>, etc.</p>
    </div>
    <div class="indent"><h3>10.2 <a name="encryption" id="encryption">Encryption</a></h3>
    <p>Real-time text (&lt;rtt/&gt; elements) transmit the content contained within messages. Therefore, a client that encrypts &lt;body/&gt;, also needs to also encrypt &lt;rtt/&gt; as well:</p>
    <ul>
      <li><p>Encryption at the stream level (e.g. TLS) can be used normally with this specification. Stream-level encryption is the most common form of encryption.</p></li>
      <li><p>Encryption at the &lt;message/&gt; stanza level (e.g. deferred XEP-0200) can be used for all stanzas containing either &lt;rtt/&gt; or &lt;body/&gt;. It is worth noting that stanza-level encryption produces significantly more overhead, due to the increased number of stanzas that real-time text causes, leading to <a href="#congestion_considerations">Congestion Considerations</a>.</p></li>
      <li><p>Encryption at the &lt;body/&gt; level (e.g. deprecated XEP-0027) do not encrypt &lt;rtt/&gt;. In this case, &lt;rtt/&gt; needs to be encrypted separately. It is preferable to use a broader level of encryption, where possible.</p></li>
    </ul>
    </div>
    <div class="indent"><h3>10.3 <a name="congestion_considerations" id="congestion_considerations">Congestion Considerations</a></h3>
    <p>The nature of real-time text result in more frequent transmission of &lt;message/&gt; stanzas than may otherwise happen in a non-real-time text conversation. This may lead to increased network and server loading of XMPP networks.</p>
    <p>Transmission of real-time text can be throttled temporarily during poor network conditions. It is appropriate to use latency monitoring mechanisms (e.g. <span class="ref"><a href="http://xmpp.org/extensions/xep-0184.html">Message Delivery Receipts </a></span>  [<a href="#nt-id231596">23</a>] or <span class="ref"><a href="http://xmpp.org/extensions/xep-0198.html">Stream Management</a></span>  [<a href="#nt-id231619">24</a>]) in order to temporarily adjust the <a href="#transmission_interval">Transmission Interval</a> of real-time text beyond the recommended range. This results in lagged text (less real-time) but is better than failure during poor network conditions. The use of <a href="#message_reset">Message Reset</a> can also retransmit real-time text lost by poor network conditions, including stanzas dropped by an overloaded server. This is also useful for mission-critical applications such as Next Generation 9-1-1 emergency services.</p>
    <p>Excess numbers of real-time messages (e.g. during DoS scenario in <a href="#multiuser_chat">Multi-User Chat</a>) might cause local resource-consumption issues, which can be mitigated by accelerated time-out of <a href="#stale_messages">Stale Messages</a>.</p>
    <p>Use of this specification in the recommended way will cause a load that is only marginally higher than a user communicating without this specification. Bandwidth overhead of real-time text is very low compared to many other activities possible on XMPP networks including in-band file transfers and audio. Bandwidth can also be further mitigated using stream compression, to benefit bandwidth-constrained networks (e.g. GPRS, 3G, satellite).</p>
    </div>
<h2>11.
       <a name="iana_considerations" id="iana_considerations">IANA Considerations</a></h2>
    <p>This document requires no interaction with the Internet Assigned Numbers Authority (IANA).</p>
    <h2>12.
       <a name="xmpp_registrar_considerations" id="xmpp_registrar_considerations">XMPP Registrar Considerations</a></h2>
        <div class="indent"><h3>12.1 <a name="protocol_namespaces" id="protocol_namespaces">Protocol Namespaces</a></h3>
    <p>The XMPP Registrar should include "urn:xmpp:rtt:0" in its registry of protocol namespaces (see &lt;<a href="http://xmpp.org/registrar/namespaces.html">http://xmpp.org/registrar/namespaces.html</a>&gt;).</p>
    </div>
    <div class="indent"><h3>12.2 <a name="namespace_versioning" id="namespace_versioning">Namespace Versioning</a></h3>
    <p>If the protocol defined in this specification undergoes a revision that is not fully backwards-compatible with an older version, the XMPP Registrar shall increment the protocol version number found at the end of the XML namespaces defined herein, as described in Section 4 of XEP-0053.</p>
    </div>
<h2>13.
       <a name="xml_schema" id="xml_schema">XML Schema</a></h2>
    <p><p class="caption"></p><div class="indent"><pre class="prettyprint">&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:rtt:0'
    xmlns='urn:xmpp:rtt:0'
    elementFormDefault='qualified'&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      The protocol documented by this schema is defined in
      XEP-0301: http://www.xmpp.org/extensions/xep-0301.html
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;

  &lt;xs:element name='rtt'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:attribute name='seq' type='xs:unsignedInt' use='required'/&gt;
      &lt;xs:attribute name='event' use='optional'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base="xs:string"&gt;
            &lt;xs:enumeration value="new"/&gt;
            &lt;xs:enumeration value="reset"/&gt;
            &lt;xs:enumeration value="cancel"/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
      &lt;xs:attribute name='id' type='xs:string' use='optional'&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element ref='t' minOccurs='0' maxOccurs='unbounded'/&gt;
        &lt;xs:element ref='e' minOccurs='0' maxOccurs='unbounded'/&gt;
        &lt;xs:element ref='d' minOccurs='0' maxOccurs='unbounded'/&gt;
        &lt;xs:element ref='w' minOccurs='0' maxOccurs='unbounded'/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='t' type='xs:string'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:attribute name='p' type='xs:nonNegativeInteger' use='optional'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='e' type='empty'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:attribute name='p' type='xs:nonNegativeInteger' use='optional'/&gt;
      &lt;xs:attribute name='n' type='xs:nonNegativeInteger' use='optional' default='1'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='d' type='empty'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:attribute name='p' type='xs:nonNegativeInteger' use='required'/&gt;
      &lt;xs:attribute name='n' type='xs:nonNegativeInteger' use='optional' default='1'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='w' type='empty'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:attribute name='n' type='xs:nonNegativeInteger' use='required'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;</pre></div></p>
    <h2>14.
       <a name="acknowledgments" id="acknowledgments">Acknowledgments</a></h2>
    <p>The author would like to thank Real-Time Text Taskforce (R3TF) at <a href="">www.realtimetext.org</a> for their contribution to the technology documented in this specification. Mark Rejhon leads the Jabber/XMPP Taskgroup at R3TF. Members of R3TF who have contributed to this document include Gunnar Hellstrom (Omnitor), Paul E. Jones (Cisco), Gregg Vanderheiden (Trace R&amp;D Center, University of Wisconsin), Barry Dingle (Interopability Leader, R3TF), and Arnoud van Wijk (Founder, R3TF). Others contributors include Bernard Aboba (Microsoft), Darren Sturman (Teligent Telecom), Christian Vogler (Gallaudet University), Norm Williams (Gallaudet University), and several members from the XMPP Standards Mailing List, including Kevin Smith (XSF), Peter Saint Andre (XSF), and many others.</p>
    <p>“Natural Typing”, the technique of <a href="#preserving_key_press_intervals">Preserving Key Press Intervals</a>, is acknowledged as an invention by Mark Rejhon, who is deaf. This technology is provided to XMPP.org as part of this specification in compliance of the XSF's Intellectual Property Rights Policy at <a href="">http://xmpp.org/extensions/ipr-policy.shtml</a>.</p>
    

<hr /><a name="appendices" id="appendices"></a><h2>Appendices</h2><hr /><a name="appendix-docinfo" id="appendix-docinfo"></a><h3>Appendix A: Document Information</h3><p class="indent">
            Series: <a href="http://xmpp.org/extensions/">XEP</a><br />
            Number: 0301<br />
            Publisher: <a href="/xsf/">XMPP Standards Foundation</a><br />
            Status: 
            <a href="http://xmpp.org/extensions/xep-0001.html#states-Experimental">Experimental</a><br />
            Type:
            <a href="http://xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards Track</a><br />
            Version: 0.5<br />
            Last Updated: 2012-07-22<br />
                Approving Body: <a href="http://xmpp.org/council/">XMPP Council</a><br />Dependencies: XMPP Core, XEP-0020<br />
                Supersedes: None<br />
                Superseded By: None<br />
            Short Name: NOT_YET_ASSIGNED<br />
              Source Control: 
                <a class="standardsButton" href="http://gitorious.org/xmpp/xmpp/blobs/master/extensions/xep-0301.xml">HTML</a><br />
            This document in other formats: 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-0301.xml">XML</a> 
                <a class="standardsButton" href="http://xmpp.org/extensions/xep-0301.pdf">PDF</a></p><hr /><a name="appendix-authorinfo" id="appendix-authorinfo"></a><h3>Appendix B: Author Information</h3><div class="indent"><h3>Mark Rejhon</h3><p class="indent">
        Organization: RealJabber.org and Rejhon Technologies Inc.<br />
        Email:
        <a href="mailto:mark@realjabber.org">mark@realjabber.org</a><br />
        JabberID: 
        <a href="xmpp:markybox@gmail.com">markybox@gmail.com</a><br />
        URI: 
        <a href="http://www.realjabber.com">http://www.realjabber.com</a><br /></p></div><hr /><a name="appendix-legal" id="appendix-legal"></a><h3>Appendix C: Legal Notices</h3><div class="indent"><h4>Copyright</h4>This XMPP Extension Protocol is copyright © 1999 - 2012 by the <a href="http://xmpp.org/">XMPP Standards Foundation</a> (XSF).<h4>Permissions</h4>Permission is hereby granted, free of charge, to any person obtaining a copy of this specification (the "Specification"), to make use of the Specification without restriction, including without limitation the rights to implement the Specification in a software program, deploy the Specification in a network service, and copy, modify, merge, publish, translate, distribute, sublicense, or sell copies of the Specification, and to permit persons to whom the Specification is furnished to do so, subject to the condition that the foregoing copyright notice and this permission notice shall be included in all copies or substantial portions of the Specification. Unless separate permission is granted, modified works that are redistributed shall not contain misleading information regarding the authors, title, number, or publisher of the Specification, and shall not claim endorsement of the modified works by the authors, any organization or project to which the authors belong, or the XMPP Standards Foundation.<h4>Disclaimer of Warranty</h4><span style="font-weight: bold">## NOTE WELL: This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, express or implied, including, without limitation, any warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A PARTICULAR PURPOSE. ##</span><h4>Limitation of Liability</h4>In no event and under no legal theory, whether in tort (including negligence), contract, or otherwise, unless required by applicable law (such as deliberate and grossly negligent acts) or agreed to in writing, shall the XMPP Standards Foundation or any author of this Specification be liable for damages, including any direct, indirect, special, incidental, or consequential damages of any character arising from, out of, or in connection with the Specification or the implementation, deployment, or other use of the Specification (including but not limited to damages for loss of goodwill, work stoppage, computer failure or malfunction, or any and all other commercial damages or losses), even if the XMPP Standards Foundation or such author has been advised of the possibility of such damages.<h4>IPR Conformance</h4>This XMPP Extension Protocol has been contributed in full conformance with the XSF's Intellectual Property Rights Policy (a copy of which can be found at &lt;<a href="http://xmpp.org/about-xmpp/xsf/xsf-ipr-policy/">http://xmpp.org/about-xmpp/xsf/xsf-ipr-policy/</a>&gt; or obtained by writing to XMPP Standards Foundation, 1899 Wynkoop Street, Suite 600, Denver, CO 80202 USA).</div><hr /><a name="appendix-xmpp" id="appendix-xmpp"></a><h3>Appendix D: Relation to XMPP</h3><p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the XMPP Standards Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p><hr /><a name="appendix-discuss" id="appendix-discuss"></a><h3>Appendix E: Discussion Venue</h3><p class="indent">The primary venue for discussion of XMPP Extension Protocols is the &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards">standards@xmpp.org</a>&gt; discussion list.</p><p class="indent">Discussion on other xmpp.org discussion lists might also be appropriate; see &lt;<a href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</a>&gt; for a complete list.</p><p class="indent">Errata can be sent to &lt;<a href="mailto:editor@xmpp.org">editor@xmpp.org</a>&gt;.</p><hr /><a name="appendix-conformance" id="appendix-conformance"></a><h3>Appendix F: Requirements Conformance</h3><p class="indent">The following requirements keywords as used in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p><hr /><a name="appendix-notes" id="appendix-notes"></a><h3>Appendix G: Notes</h3><div class="indent"><p><a name="nt-id220531" id="nt-id220531">1</a>. RealJabber.org, the author's website covering this specification, including animation examples of what real time text looks like. &lt;<a href="http://www.realjabber.org">http://www.realjabber.org</a>&gt;.</p><p><a name="nt-id220569" id="nt-id220569">2</a>. IETF RFC 4103: RTP Payload for Text Conversation. &lt;<a href="http://tools.ietf.org/html/rfc4103">http://tools.ietf.org/html/rfc4103</a>&gt;.</p><p><a name="nt-id227111" id="nt-id227111">3</a>. ITU-T T.140: Protocol for multimedia application text conversation. &lt;<a href="http://www.itu.int/rec/T-REC-T.140">http://www.itu.int/rec/T-REC-T.140</a>&gt;.</p><p><a name="nt-id227134" id="nt-id227134">4</a>. AOL AIM Real Time Text: &lt;<a href="http://help.aol.com/help/microsites/microsite.do?cmd=displayKC&amp;externalId=223568">http://help.aol.com/help/microsites/microsite.do?cmd=displayKC&amp;externalId=223568</a>&gt;.</p><p><a name="nt-id227157" id="nt-id227157">5</a>. Reach112: European emergency service with real-time text. &lt;<a href="http://www.reach112.eu">http://www.reach112.eu</a>&gt;.</p><p><a name="nt-id227281" id="nt-id227281">6</a>. ITU-T Rec. F.703: Multimedia conversational services. &lt;<a href="http://www.itu.int/rec/T-REC-F.703">http://www.itu.int/rec/T-REC-F.703</a>&gt;.</p><p><a name="nt-id227330" id="nt-id227330">7</a>. ITU-T Rec. F.700: Framework Recommendation for multimedia services &lt;<a href="http://www.itu.int/rec/T-REC-F.700">http://www.itu.int/rec/T-REC-F.700</a>&gt;.</p><p><a name="nt-id227763" id="nt-id227763">8</a>. XEP-0308: Last Message Correction &lt;<a href="http://xmpp.org/extensions/xep-0308.html">http://xmpp.org/extensions/xep-0308.html</a>&gt;.</p><p><a name="nt-id227852" id="nt-id227852">9</a>. RFC 6120: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://tools.ietf.org/html/rfc6120">http://tools.ietf.org/html/rfc6120</a>&gt;.</p><p><a name="nt-id228533" id="nt-id228533">10</a>. XEP-0071: XHTML-IM &lt;<a href="http://xmpp.org/extensions/xep-0071.html">http://xmpp.org/extensions/xep-0071.html</a>&gt;.</p><p><a name="nt-id228555" id="nt-id228555">11</a>. XML: Extensible Markup Language 1.0 (Fifth Edition). &lt;<a href="http://www.w3.org/TR/xml/">http://www.w3.org/TR/xml/</a>&gt;.</p><p><a name="nt-id229027" id="nt-id229027">12</a>. RFC 6121: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://tools.ietf.org/html/rfc6121">http://tools.ietf.org/html/rfc6121</a>&gt;.</p><p><a name="nt-id229097" id="nt-id229097">13</a>. XEP-0030: Service Discovery &lt;<a href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</a>&gt;.</p><p><a name="nt-id229147" id="nt-id229147">14</a>. XEP-0115: Entity Capabilities &lt;<a href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</a>&gt;.</p><p><a name="nt-id229253" id="nt-id229253">15</a>. XEP-0206: XMPP Over BOSH &lt;<a href="http://xmpp.org/extensions/xep-0206.html">http://xmpp.org/extensions/xep-0206.html</a>&gt;.</p><p><a name="nt-id229342" id="nt-id229342">16</a>. XEP-0138: Stream Compression &lt;<a href="http://xmpp.org/extensions/xep-0138.html">http://xmpp.org/extensions/xep-0138.html</a>&gt;.</p><p><a name="nt-id230151" id="nt-id230151">17</a>. XEP-0085: Chat State Notifications &lt;<a href="http://xmpp.org/extensions/xep-0085.html">http://xmpp.org/extensions/xep-0085.html</a>&gt;.</p><p><a name="nt-id230240" id="nt-id230240">18</a>. XEP-0045: Multi-User Chat &lt;<a href="http://xmpp.org/extensions/xep-0045.html">http://xmpp.org/extensions/xep-0045.html</a>&gt;.</p><p><a name="nt-id230462" id="nt-id230462">19</a>. XEP-0166: Jingle &lt;<a href="http://xmpp.org/extensions/xep-0166.html">http://xmpp.org/extensions/xep-0166.html</a>&gt;.</p><p><a name="nt-id231334" id="nt-id231334">20</a>. Real-Time Text Taskforce, a foundation for real-time text standardization &lt;<a href="http://www.realtimetext.org">http://www.realtimetext.org</a>&gt;.</p><p><a name="nt-id231361" id="nt-id231361">21</a>. IETF RFC 5194: Framework for Real-Time Text over IP Using the Session Initiation Protocol (SIP). &lt;<a href="http://tools.ietf.org/html/rfc5194">http://tools.ietf.org/html/rfc5194</a>&gt;.</p><p><a name="nt-id231451" id="nt-id231451">22</a>. The International Symbol of Real-Time Text &lt;<a href="http://www.fasttext.org">http://www.fasttext.org</a>&gt;.</p><p><a name="nt-id231596" id="nt-id231596">23</a>. XEP-0184: Message Delivery Receipts &lt;<a href="http://xmpp.org/extensions/xep-0184.html">http://xmpp.org/extensions/xep-0184.html</a>&gt;.</p><p><a name="nt-id231619" id="nt-id231619">24</a>. XEP-0198: Stream Management &lt;<a href="http://xmpp.org/extensions/xep-0198.html">http://xmpp.org/extensions/xep-0198.html</a>&gt;.</p></div><hr /><a name="appendix-revs" id="appendix-revs"></a><h3>Appendix H: Revision History</h3><p>Note: Older versions of this specification might be available at <a href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</a></p><div class="indent"><h4>Version 0.5 (2012-07-22)</h4><div class="indent"><p>Minor corrections and clarifications.</p> (MDR)
    </div><h4>Version 0.4 (2012-07-20)</h4><div class="indent"><p>Spelling, grammar, and clarification edits, including section clarifications recommended from public discussion. Interop with XEP-0308 message correction.</p> (MDR)
    </div><h4>Version 0.3 (2012-06-07)</h4><div class="indent"><p>Edits recommended from public discussion.</p> (MDR)
    </div><h4>Version 0.2 (2012-03-18)</h4><div class="indent"><p>Lots of edits. Simplifications, improvements and corrections. Forward and backward compatible with version 0.1.</p> (MDR)
    </div><h4>Version 0.1 (2011-06-29)</h4><div class="indent"><p>Initial published version.</p> (psa)
    </div><h4>Version 0.0.3 (2011-06-25)</h4><div class="indent"><p>Third draft, recommended edits.</p> (MDR)
    </div><h4>Version 0.0.2 (2011-06-15)</h4><div class="indent"><p>Second draft.</p> (MDR)
    </div><h4>Version 0.0.1 (2011-02-21)</h4><div class="indent"><p>First draft.</p> (MDR)
    </div></div><hr /><p>END</p></body></html>
