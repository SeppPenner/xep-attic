<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JEP-0166: Jingle Signalling</title>
<link rel="stylesheet" type="text/css" href="jep.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<meta name="DC.Title" content="Jingle Signalling">
<meta name="DC.Creator" content="Scott Ludwig">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Creator" content="Joe Beda">
<meta name="DC.Creator" content="Joe Hildebrand">
<meta name="DC.Description" content="This document defines signalling methods for initiating and managing peer-to-peer sessions (e.g., voice and video exchanges) between XMPP clients in a way that is interoperable with existing Internet standards.">
<meta name="DC.Publisher" content="Jabber Software Foundation">
<meta name="DC.Contributor" content="JEP Editor">
<meta name="DC.Date" content="2005-12-15">
<meta name="DC.Type" content="Jabber Enhancement Proposal">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="JEP-0166">
<meta name="DC.Language" content="en">
<meta name="DC.Rights" content="This Jabber Enhancement Proposal is copyright 1999 - 2005 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;http://www.jabber.org/jsf/ipr-policy.shtml&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;http://creativecommons.org/licenses/by/2.5/&gt;).">
</head>
<body>
<h1>JEP-0166: Jingle Signalling</h1>
<p>This document defines signalling methods for initiating and managing peer-to-peer sessions (e.g., voice and video exchanges) between XMPP clients in a way that is interoperable with existing Internet standards.</p>
<p><hr></p>
<p style="color:red">WARNING: This Standards-Track JEP is Experimental. Publication as a Jabber Enhancement Proposal does not imply approval of this proposal by the Jabber Software Foundation. Implementation of the protocol described herein is encouraged in exploratory implementations, but production systems should not deploy implementations of this protocol until it advances to a status of Draft.</p>
<p><hr></p>
<h2>JEP Information</h2>
<p class="indent">
            Status: Experimental<br>
            Type: Standards Track<br>
            Number: 0166<br>
            Version: 0.1<br>
            Last Updated: 2005-12-15<br>
            JIG: Standards JIG<br>
                Approving Body: Jabber Council<br>Dependencies: XMPP Core<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: jingle<br>
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Jingle%20Signalling%20(JEP-0166)">http://wiki.jabber.org/index.php/Jingle Signalling (JEP-0166)</a>&gt;
            </p>
<h2>Author Information</h2>
<div class="indent">
<h3>Scott Ludwig</h3>
<p class="indent">
        Email: scottlu@google.com<br>
        JID: scottlu@google.com</p>
<h3>Peter Saint-Andre</h3>
<p class="indent">
        Email: stpeter@jabber.org<br>
        JID: stpeter@jabber.org</p>
<h3>Joe Beda</h3>
<p class="indent">
        Email: jbeda@google.com<br>
        JID: jbeda@google.com</p>
<h3>Joe Hildebrand</h3>
<p class="indent">
        Email: jhildebrand@jabber.com<br>
        JID: hildjj@jabber.org</p>
</div>
<h2>Legal Notice</h2>
<p class="indent">This Jabber Enhancement Proposal is copyright 1999 - 2005 by the <a href="http://www.jabber.org/jsf/">Jabber Software Foundation</a> (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;<a href="http://www.jabber.org/jsf/ipr-policy.shtml">http://www.jabber.org/jsf/ipr-policy.shtml</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;<a href="http://creativecommons.org/licenses/by/2.5/">http://creativecommons.org/licenses/by/2.5/</a>&gt;).</p>
<h2>Discussion Venue</h2>
<p class="indent">The preferred venue for discussion of this document is the Standards-JIG discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig">http://mail.jabber.org/mailman/listinfo/standards-jig</a>&gt;.</p>
<h2>Relation to XMPP</h2>
<p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the Jabber Software Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this JEP has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
<h2>Conformance Terms</h2>
<p class="indent">The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.</p>
<p><hr></p>
<h2>Table of Contents</h2>
<div class="indent"><dl>
<dt>1.  <a href="#intro">Introduction</a>
</dt>
<dt>2.  <a href="#reqs">Requirements</a>
</dt>
<dt>3.  <a href="#glossary">Glossary</a>
</dt>
<dt>4.  <a href="#concepts">Concepts and Approach</a>
</dt>
<dl>
<dt>4.1.  <a href="#concepts-state">Session Management State Machine</a>
</dt>
<dt>4.2.  <a href="#concepts-desc">Session Descriptions</a>
</dt>
</dl>
<dt>5.  <a href="#explain">Explanatory Example: Basic One-to-One Signalling</a>
</dt>
<dl>
<dt>5.1.  <a href="#explain-resource">Resource Determination (Example)</a>
</dt>
<dt>5.2.  <a href="#explain-initiate">Initiation (Example)</a>
</dt>
<dt>5.3.  <a href="#explain-negotiate">Negotiation (Example)</a>
</dt>
<dt>5.4.  <a href="#explain-accept">Acceptance (Example)</a>
</dt>
<dt>5.5.  <a href="#explain-term">Termination (Example)</a>
</dt>
</dl>
<dt>6.  <a href="#protocol">Protocol Description</a>
</dt>
<dl>
<dt>6.1.  <a href="#protocol-resource">Resource Determination</a>
</dt>
<dt>6.2.  <a href="#protocol-actions">Required and Optional Actions</a>
</dt>
<dt>6.3.  <a href="#protocol-initiate">Initiation</a>
</dt>
<dt>6.4.  <a href="#protocol-redirect">Redirection</a>
</dt>
<dt>6.5.  <a href="#protocol-negotiate">Negotiation</a>
</dt>
<dl>
<dt>6.5.1.  <a href="#protocol-negotiate-candidate">Candidate Format</a>
</dt>
<dt>6.5.2.  <a href="#protocol-negotiate-modes">Negotiation Modes</a>
</dt>
<dl>
<dt>6.5.2.1.  <a href="#protocol-negotiate-modes-dribble">Dribble Mode</a>
</dt>
<dt>6.5.2.2.  <a href="#protocol-negotiate-modes-burst">Burst Mode</a>
</dt>
</dl>
<dt>6.5.3.  <a href="#protocol-negotiate-check">Checking Connectivity</a>
</dt>
</dl>
<dt>6.6.  <a href="#protocol-acceptance">Acceptance</a>
</dt>
<dt>6.7.  <a href="#protocol-terminate">Termination</a>
</dt>
<dt>6.8.  <a href="#protocol-info">Informational Messages</a>
</dt>
</dl>
<dt>7.  <a href="#errors">Error Handling</a>
</dt>
<dl>
<dt>7.1.  <a href="#errors-initiate">Initiation-Related Error Conditions</a>
</dt>
<dt>7.2.  <a href="#errors-other">Other Error Conditions</a>
</dt>
</dl>
<dt>8.  <a href="#security">Security Considerations</a>
</dt>
<dl>
<dt>8.1.  <a href="#security-dos">Denial of Service</a>
</dt>
<dt>8.2.  <a href="#security-gateways">Communication Through Gateways</a>
</dt>
</dl>
<dt>9.  <a href="#iana">IANA Considerations</a>
</dt>
<dt>10.  <a href="#registrar">Jabber Registrar Considerations</a>
</dt>
<dl>
<dt>10.1.  <a href="#registrar-ns">Protocol Namespaces</a>
</dt>
<dt>10.2.  <a href="#registrar-features">Service Discovery Features</a>
</dt>
<dt>10.3.  <a href="#registrar-jingle">Jingle Session Types Registry</a>
</dt>
<dl><dt>10.3.1.  <a href="#registrar-jingle-process">Registration Process</a>
</dt></dl>
</dl>
<dt>11.  <a href="#schema">XML Schemas</a>
</dt>
<dl>
<dt>11.1.  <a href="#schema-signalling">Signalling</a>
</dt>
<dt>11.2.  <a href="#schema-errors">Errors</a>
</dt>
</dl>
<dt>12.  <a href="#issues">Open Issues</a>
</dt>
<dt>13.  <a href="#ack">Acknowledgements</a>
</dt>
<dt><a href="#notes">Notes</a></dt>
<dt><a href="#revs">Revision History</a></dt>
</dl></div>
<p><hr></p>
<h2>1.
       <a name="intro">Introduction</a>
</h2>
  <p class="" style="">There exists no widely-adopted standard for initiating and managing peer-to-peer (p2p) multimedia interactions (such as voice and video exchanges) from within Jabber/XMPP clients. Although several large service providers and Jabber/XMPP clients have written and implemented their own proprietary XMPP extensions for p2p signalling (usually only for voice), those technologies are not open and do not always take into account requirements to interoperate with the Public Switched Telephone Network (PSTN) or emerging SIP-based Internet voice networks. By contrast, the only existing open protocol has been <span class="ref" style="">A Transport for Initiating and Negotiating Sessions (TINS)</span>  [<a href="#nt-id2250674">1</a>], which made it possible to initiate and manage p2p sessions, but which did not provide enough of the key signalling semantics to be easily implemented in Jabber/XMPP clients.  [<a href="#nt-id2250656">2</a>]</p>
  <p class="" style="">The result has been an unfortunate fragmentation within the XMPP community regarding signalling protocols. There are, essentially, two approaches to solving the problem:</p>
  <ol start="" type="">
    <li>Recommend that all client developers implement a dual-stack (XMPP + SIP) solution.</li>
    <li>Define a full-featured protocol for XMPP signalling.</li>
  </ol>
  <p class="" style="">Implementation experience indicates that a dual-stack approach may not be feasible on all the computing platforms for which Jabber clients have been written, or even desirable on platforms where it is feasible.  [<a href="#nt-id2250722">3</a>] Therefore, it seems reasonable to define an XMPP signalling protocol that can provide the necessary signalling semantics while also making it possible to interoperate with existing Internet standards.</p>
  <p class="" style="">As a result of feedback received on <span style="font-weight: bold">JEP-0111</span>, the second and fourth authors of this document began to define such a signalling protocol, code-named Jingle. Upon communication with members of the Google Talk team, it was discovered that the emerging Jingle approach was conceptually (and even syntactically) quite similar to the signalling protocol used in the Google Talk application. Therefore, in the interest of interoperability and adoption, we decided to harmonize the two approaches. The signalling protocol specified therein is, therefore, substantially equivalent to the existing Google Talk protocol, with several adjustments based on feedback received from implementors as well as for publication within the Jabber Software Foundation's standards process.</p>
<h2>2.
       <a name="reqs">Requirements</a>
</h2>
  <p class="" style="">The protocol defined herein is designed to meet the following requirements:</p>
  <ol start="" type="">
    <li>Make it possible to manage a wide variety of peer-to-peer sessions (not limited to voice and video) within XMPP.  [<a href="#nt-id2250781">4</a>]</li>
    <li>Make it relatively easy to implement support for the protocol in standard Jabber/XMPP clients.</li>
    <li>Where communication with non-XMPP entities is needed, push as much complexity as possible onto server-side gateways between the XMPP network and the non-XMPP network.</li>
  </ol>
  <p class="" style="">This document defines the signalling protocol only. Additional documents will specify the following:</p>
  <ul>
    <li>Formats for describing various session types (audio, video, etc.) and, where possible, mapping those types to the Session Description Protocol (SDP; see <span class="ref" style="">RFC 2327</span>  [<a href="#nt-id2256357">5</a>]).</li>
    <li>Procedures for mapping the Jingle signalling protocol to existing signalling standards such as the IETF's Session Initiation Protocol (SIP; see <span class="ref" style="">RFC 3261</span>  [<a href="#nt-id2256382">6</a>]) and the ITU's H.323 protocol (see <span class="ref" style="">H.323</span>  [<a href="#nt-id2256404">7</a>]).</li>
  </ul>
<h2>3.
       <a name="glossary">Glossary</a>
</h2>
  <p class="" style="">The following terminology is used in this document.</p>
  <p class="caption">Table 1: Terminology</p>
<table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Term</th>
      <th colspan="" rowspan="">Definition</th>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Session</td>
      <td align="" colspan="" rowspan="">A set of 1+ negotiated channels between endpoints for the purpose of exchanging data related to 1+ session types, delimited in time by a session initiation request and session ending event.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Session Type</td>
      <td align="" colspan="" rowspan="">A formal description of the purpose of the session. Common session types are voice, voice+video, and file sharing. A session consists of one and only one session type, for which 1+ channels will be negotiated and used.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Channel</td>
      <td align="" colspan="" rowspan="">A direct communication channel in the context of a session. The channel is ideally a peer-to-peer connection. A channel ends when the session ends.</td>
    </tr>
  </table>
<h2>4.
       <a name="concepts">Concepts and Approach</a>
</h2>
  <div class="indent">
<h3>4.1 <a name="concepts-state">Session Management State Machine</a>
</h3>
    <p class="" style="">A simplified state machine for basic session management is shown below:</p>
    <p class="caption"></p>
<div class="indent"><pre>
         START
           o  
           |   
           | initiate
           |   
           |  _____________________
           | /                     \
[PENDING]  o________                |
           |  |     | info,         |
           |  |_____| negotiate     | 
           |                        |
           | accept                 | decline,
           |                        | redirect,
 [ACTIVE]  o________                | terminate
           |  |     | info,         |
           |  |     | modify,       |
           |  |     | join,         |
           |  |     | replace,      |
           |  |_____| transfer      |
           |                        |
            \_______________________o [ENDED]
                  decline, 
                  redirect, 
                  terminate
    </pre></div>
    <p class="" style="">There are three basic states:</p>
    <ol start="" type="">
      <li>PENDING</li>
      <li>ACTIVE</li>
      <li>ENDED</li>
    </ol>
    <p class="" style="">There are ten basic "verbs" or actions:</p>
    <ol start="" type="">
      <li>accept</li>
      <li>info</li>
      <li>initiate</li>
      <li>join</li>
      <li>modify</li>
      <li>negotiate</li>
      <li>redirect</li>
      <li>replace</li>
      <li>terminate</li>
      <li>transfer</li>
    </ol>
    <p class="" style="">Many of these states and actions correspond to (or can be mapped to) the states and actions defined in the Session Initiation Protocol (SIP), but such a mapping is out of scope here and will be provided in a separate specification.</p>
  </div>
  <div class="indent">
<h3>4.2 <a name="concepts-desc">Session Descriptions</a>
</h3>
    <p class="" style="">Parallel to the signalling flows outlined above, the entities involved in the session need to exchange descriptions of the desired session. While it is possible to send raw Session Description Protocol (SDP) data for the session descriptions (the approach taken in TINS), this is not necessarily helpful, since in practice (1) not all SDP data is needed or used in the most common use cases and (2) SDP has been heavily extended in several useful directions, especially for NAT traversal (see <span class="ref" style="">RFC 3489</span>  [<a href="#nt-id2256670">8</a>] and <span class="ref" style="">Interactive Connectivity Establishment (ICE)</span>  [<a href="#nt-id2256697">9</a>]). The approach taken herein is to specify pure session-description information in separate documents, one for each session type (audio, video, etc.). However, we include the NAT traversal semantics as a native part of Jingle signalling, since they are necessary for any kind of peer-to-peer session (no matter what the session description is).</p>
  </div>
<h2>5.
       <a name="explain">Explanatory Example: Basic One-to-One Signalling</a>
</h2>
  <div class="indent">
<h3>5.1 <a name="explain-resource">Resource Determination (Example)</a>
</h3>
    <p class="" style="">To illustrate the basic concepts, we use our standard characters Romeo and Juliet and assume that Romeo wants to initiate a one-to-one audio session with Juliet. (See the <a href="#protocol">Protocol Description</a> section of this document for a more formal description.)</p>
    <p class="" style="">First Romeo must discover which of Juliet's XMPP resources is best for audio interaction. If a Juliet has only one XMPP resource, this task is best completed using <span class="ref" style="">Service Discovery</span>  [<a href="#nt-id2256772">10</a>] or the presence-based profile of service discovery specified in <span class="ref" style="">Entity Capabilities</span>  [<a href="#nt-id2256795">11</a>]:</p>
    <p class="caption">Example 1. Romeo Requests Service Discovery Information</p>
<div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard' 
    id='disco1'
    to='juliet@capulet.com/balcony' 
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 2. Juliet Provides Service Discovery Information</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' 
    id='disco1'
    to='romeo@montague.net/orchard' 
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    ...
    &lt;feature var='http://jabber.org/protocol/jingle'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle/sessions/audio'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?mode=dribble'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?mode=burst'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?stun=inline'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?action=initiate'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?action=redirect'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?action=accept'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?action=negotiate'/&gt;
    &lt;feature var='http://jabber.org/protocol/jingle?action=terminate'/&gt;
    ...
  &lt;/query&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">If Juliet has more than one XMPP resource, it may be that only one of the resources supports Jingle and the audio session type, in which case Romeo would initiate Jingle signalling with that resource.</p>
    <p class="" style="">If Juliet has more than one XMPP resource that supports Jingle and the audio session type, Romeo's client should use <span class="ref" style="">Resource Application Priority</span>  [<a href="#nt-id2256865">12</a>] in order to determine the best resource with which to initiate a Jingle audio session.</p>
  </div>
  <div class="indent">
<h3>5.2 <a name="explain-initiate">Initiation (Example)</a>
</h3>
    <p class="" style="">Once Romeo has discovered which of Juliet's XMPP resources is ideal for audio interaction, he sends a session initiation request to Juliet and specifies an audio session (see <span class="ref" style="">Jingle Audio</span>  [<a href="#nt-id2256904">13</a>]):</p>
    <p class="caption">Example 3. Romeo Initiates Call</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='jingle1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='initiate' 
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;description xmlns='http://jabber.org/protocol/jingle/sessions/audio'&gt;
      &lt;payload-type id='18' name='G729'/&gt;
      &lt;payload-type id='97' name='IPCMWB'/&gt;
      &lt;payload-type id='98' name='L16'/&gt;
      &lt;payload-type id='103' name='ISAC'/&gt;
      &lt;payload-type id='102' name='iLBC'/&gt;
      &lt;payload-type id='4' name='G723'/&gt;
      &lt;payload-type id='100' name='EG711U'/&gt;
      &lt;payload-type id='101' name='EG711A'/&gt;
      &lt;payload-type id='0' name='PCMU'/&gt;
      &lt;payload-type id='8' name='PCMA'/&gt;
      &lt;payload-type id='13' name='CN'/&gt;
    &lt;/description&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">At this point, Juliet can do one of three things:</p>
    <ul>
      <li>Decline the session initiation request.</li>
      <li>Redirect the request to another resource.</li>
      <li>Provisionally accept the session.</li>
    </ul>
    <p class="" style="">Here we assume that Juliet provisionally accepts the session:</p>
    <p class="caption">Example 4. Juliet Provisionally Accepts the Session Request</p>
<div class="indent"><pre>
&lt;iq type='result' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'/&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>5.3 <a name="explain-negotiate">Negotiation (Example)</a>
</h3>
    <p class="" style="">As soon as Juliet provisionally accepts the session initiation request, the next phase of the session flow begins: negotiation of connectivity. Here we assume that both Romeo and Juliet support dribble mode for connectivity negotation (for burst mode, see the <a href="#protocol-negotiate-modes-burst">Burst Mode</a> section of this document) and that therefore their clients immediately begin sending candidate transport mechanisms to each other.</p>
    <p class="caption">Example 5. Romeo Sends a Candidate Transport</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='candidate1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='negotiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='1.0'
               username='/38UHtocC941jdS4' 
               password='pcd+Z/WmsthSFIcz'
               type='local'
               network='0'
               generation='0' 
               ip='10.1.1.104' 
               port='13540'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">If Juliet successfully receives the candidate, she returns an IQ-result (if not, for example because the candidate data is improperly formatted, she returns an error):</p>
    <p class="caption">Example 6. Juliet Indicates Receipt of the First Candidate</p>
<div class="indent"><pre>
&lt;iq type='result' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='candidate1'/&gt;
    </pre></div>
    <p class="" style="">Note well that Juliet is only indicating receipt of the candidate, not telling Romeo that the candidate will be used.</p>
    <p class="" style="">Romeo keeps sending candidates, one after the other (without stopping to receive an acknowledgement of receipt from the target entity for each candidate) until he has exhausted his supply of possible or desirable candidate transports:</p>
    <p class="caption">Example 7. Romeo Sends a Second Candidate Transport</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='candidate2' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='negotiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='0.8'
               type='stun'
               username='ld6Hi+PfVtnmU8cf'
               password='gzoufy3aMXBRtiWs'
               network='1'
               generation='0' 
               ip='1.2.3.4' 
               port='6459'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 8. Romeo Sends a Third Candidate Transport</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='candidate2' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='negotiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='0.1'
               type='relay'
               username='XKqUmqiftjPUYAbF'
               password='G4116MkgTzb8+1N/'
               network='2'
               generation='0' 
               ip='5.6.7.8' 
               port='9823'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">As above, Juliet keeps acknowledging receipt of the candidates:</p>
    <p class="caption">Example 9. Juliet Indicates Receipt of the Second and Third Candidates</p>
<div class="indent"><pre>
&lt;iq type='result' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='candidate2'/&gt;

&lt;iq type='result' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='candidate3'/&gt;
    </pre></div>
    <p class="" style="">At the same time (i.e., immediately after provisionally accepting the session, not waiting for Romeo to begin or finish sending candidates), Juliet also begins sending candidates that may work for her:</p>
    <p class="caption">Example 10. Juliet Sends a First Candidate</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='can1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='negotiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='0.7'
               type='stun'
               username='5ilRe0u+EF17aUQU'
               password='VXrUejbQILvnEMIJ'
               network='0'
               generation='0' 
               ip='3.4.5.6' 
               port='7676'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="caption">Example 11. Juliet Sends a Second Candidate</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='can2' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='negotiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='0.3'
               type='relay'
               username='ph+H8epib3+I8aB8'
               password='o+bUsKt+SzkBPlOF'
               network='0'
               generation='0' 
               ip='4.5.6.7' 
               port='8135'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">As above, Romeo acknowledges receipt of the candidates:</p>
    <p class="caption">Example 12. Romeo Indicates Receipt of Candidates from Juliet</p>
<div class="indent"><pre>
&lt;iq type='result' from='romeo@montague.net/orchard' to='juliet@capulet.com/balcony' id='can1'/&gt;

&lt;iq type='result' from='romeo@montague.net/orchard' to='juliet@capulet.com/balcony' id='can2'/&gt;
    </pre></div>
    <p class="" style="">As Romeo and Juliet receive candidates, they probe the various candidate transports for connectivity. (This process is described in the <a href="#protocol-negotiate-check">Checking Connectivity</a> section of this document.)</p>
  </div>
  <div class="indent">
<h3>5.4 <a name="explain-accept">Acceptance (Example)</a>
</h3>
    <p class="" style="">If, based on the connectivity checks, Juliet determines that she will be able to establish a connection, she sends a definitive acceptance to Romeo:</p>
    <p class="caption">Example 13. Juliet Definitively Accepts the Call</p>
<div class="indent"><pre>
&lt;iq type='set' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='accept1'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='accept' 
          initiator='romeo@montague.net/orchard'
          responder='juliet@capulet.com/balcony'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Romeo then acknowledges Juliet's definitive acceptance:</p>
    <p class="caption">Example 14. Romeo Acknowledges Definitive Acceptance</p>
<div class="indent"><pre>
&lt;iq type='result' to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='accept1'/&gt;
    </pre></div>
    <p class="" style="">Now Romeo and Juliet can begin sending media over the negotiated connection.</p>
  </div>
  <div class="indent">
<h3>5.5 <a name="explain-term">Termination (Example)</a>
</h3>
    <p class="" style="">We assume that after a pleasant voice chat, Juliet decides to gracefully end the session, so she sends a "terminate" action to Romeo:</p>
    <p class="caption">Example 15. Juliet Terminates the Session</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' 
    id='term1' 
    to='romeo@montague.net/orchard' 
    type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='terminate' 
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Romeo then acknowledges termination of the session:</p>
    <p class="caption">Example 16. Romeo Acknowledges Termination</p>
<div class="indent"><pre>
&lt;iq type='result' to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='term1'/&gt;
    </pre></div>
  </div>
<h2>6.
       <a name="protocol">Protocol Description</a>
</h2>
  <div class="indent">
<h3>6.1 <a name="protocol-resource">Resource Determination</a>
</h3>
    <p class="" style="">In order to initiate a Jingle session, the initiating entity must determine which of the target entity's XMPP resources is best for the desired session type. If a contact has only one XMPP resource, this task MUST be completed using <span style="font-weight: bold">Service Discovery</span> or the presence-based profile of service discovery specified in <span style="font-weight: bold">Entity Capabilities</span> (see example above).</p>
    <p class="" style="">Naturally, instead of sending service discovery requests to every contact in a user's roster, it is more efficient to use <span style="font-weight: bold">Entity Capabilities</span>, whereby support for the Jingle protocol (including negotiation mode and STUN style as described below) and various Jingle session types is determined for a client version in general (rather than on a per-JID basis) and then cached. Refer to <span style="font-weight: bold">JEP-0115</span> for details.</p>
    <p class="" style="">If a contact has more than one XMPP resource, it may be that only one of the resources supports Jingle and the desired session type, in which case the user MUST initiate the Jingle signalling with that resource.</p>
    <p class="" style="">If a contact has more than one XMPP resource that supports Jingle and the desired session type, it is RECOMMENDED for a client to use <span style="font-weight: bold">Resource Application Priority (RAP)</span> in order to determine which is the best resource with which to initiate the desired Jingle session.</p>
  </div>
  <div class="indent">
<h3>6.2 <a name="protocol-actions">Required and Optional Actions</a>
</h3>
    <p class="" style="">Support for the 'accept', 'info', 'initiate', 'negotiate', 'redirect', and 'terminate' actions is REQUIRED.</p>
    <p class="" style="">Support for the 'join', 'modify', 'replace', and 'transfer' actions is OPTIONAL.</p>
    <p class="" style="">An entity MUST disclose which actions it supports in its response to service discovery information requests via the following features:</p>
    <ul>
      <li>http://jabber.org/protocol/jingle?action=accept</li>
      <li>http://jabber.org/protocol/jingle?action=info</li>
      <li>http://jabber.org/protocol/jingle?action=initiate</li>
      <li>http://jabber.org/protocol/jingle?action=join</li>
      <li>http://jabber.org/protocol/jingle?action=initiate</li>
      <li>http://jabber.org/protocol/jingle?action=negotiate</li>
      <li>http://jabber.org/protocol/jingle?action=modify</li>
      <li>http://jabber.org/protocol/jingle?action=redirect</li>
      <li>http://jabber.org/protocol/jingle?action=replace</li>
      <li>http://jabber.org/protocol/jingle?action=terminate</li>
      <li>http://jabber.org/protocol/jingle?action=transfer</li>
    </ul>
  </div>
  <div class="indent">
<h3>6.3 <a name="protocol-initiate">Initiation</a>
</h3>
    <p class="" style="">Once the initiating entity has discovered which of the target entity's XMPP resources is ideal for audio interaction, it sends a session initiation request to the target entity. This request is an IQ-set containing a &lt;jingle/&gt; element qualified by the 'http://jabber.org/protocol/jingle' namespace; the &lt;jingle/&gt; element MUST possess the 'action', 'initiator', and 'sid' attributes as described below; for initiation the 'action' attribute MUST have a value of "initiate", the 'mode' attribute SHOULD be included (if not, its value defaults to "dribble"), the 'stun' attribute SHOULD be included (if not, its value defaults to "inline"), and the &lt;jingle/&gt; element MUST contain one and only one child element that describes desired session (different elements will be defined for different session types). Here is an example:</p>
    <p class="caption">Example 17. Initiation Example</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='jingle1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='initiate' 
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;description xmlns='http://jabber.org/protocol/jingle/sessions/audio'&gt;
      ...
    &lt;/description&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The attributes of the &lt;jingle/&gt; element are as follows:</p>
    <ul>
      <li>The 'action' attribute is a Jingle action as listed in this document (in this case, "initiate").</li>
      <li>The 'initiator' attribute is the full JID of the entity that has initiated the session flow (which may be different from the 'from' address on the IQ-set).</li>
      <li>The 'mode' attribute specifies whether candidates for session negotiation are provided all at once ("burst" mode) or one at a time ("dribble" mode); the default value is "dribble".</li>
      <li>The 'sid' attribute is a random session identifier generated by the initiator; this SHOULD match the XML Nmtoken production  [<a href="#nt-id2257665">14</a>] so that XML character escaping is not needed for characters such as &amp;. (Note: the 'sid' attribute effectively maps to the SIP "Call-ID" parameter.)</li>
      <li>The 'stun' attribute specifies whether STUN packets are mixed into the channel to determine connectivity, provided in some other fashion (e.g., outside the channel), or not provided at all; the allowable values are "inline", "none", and "upfront", and the default value is "inline".</li>
    </ul>
    <p class="" style="">At this point, the target entity can do one of three things:</p>
    <ul>
      <li>Decline the session initiation request (e.g., because Juliet is busy).</li>
      <li>Redirect the request to another resource.</li>
      <li>Provisionally accept the session.</li>
    </ul>
    <p class="" style="">To decline the session initiation request, the target entity MUST return an XMPP &lt;not-acceptable/&gt; error. There are five defined error cases:</p>
    <ul>
      <li>&lt;busy/&gt; -- The target entity or principal is busy with other sessions or tasks and therefore is unable or unwilling to accept the session; this maps to SIP codes 486 and 600.</li>
      <li>&lt;unsupported-media/&gt; -- The target entity does not support any of the payload-types (e.g., codecs) offered by the initiating entity; this maps to SIP code 415.</li>
      <li>&lt;unsupported-negotiation-mode/&gt; -- The target entity does not support the session negotiation mode (dribble or burst) specified in the session initiation request.</li>
      <li>&lt;unsupported-session-type/&gt; -- The target entity does not support the session type specified in the session initiation request.</li>
      <li>&lt;unsupported-stun-method/&gt; -- The target entity does not support the STUN testing method (inline or none) specified in the session initiation request.</li>
    </ul>
    <p class="caption">Example 18. Juliet Declines the Session Request</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1' type='error'&gt;
  &lt;error code='406' type='modify'&gt;
    &lt;not-acceptable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;busy xmlns='http://jabber.org/protocol/jingle#errors'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">To immediately redirect the session initiation request to another address (e.g., because of a change in resource application priority generated right before the session initiation request was received), the target entity returns an XMPP &lt;redirect/&gt; error:</p>
    <p class="caption">Example 19. Juliet Redirects the Session Request</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1' type='error'&gt;
  &lt;error code='302' type='modify'&gt;
    &lt;redirect xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'&gt;xmpp:juliet@capulet.com/chamber&lt;/redirect&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">(Note: <span style="font-weight: bold">RFC 3920</span> specifies that the optional XML character data of the XMPP &lt;redirect/&gt; error shall be an XMPP address (JID) rather than a full URI/IRI; however, since it is possible for an XMPP entity to desire redirection to a non-XMPP address (e.g., a SIP address or telephone number), in this specification we recommend inclusion of a full URI/IRI such as a sip: or sips: URI, a tel: URI or an XMPP URI/IRI that is consistent with <span class="ref" style="">XMPP URI Scheme</span>  [<a href="#nt-id2257853">15</a>].)</p>
    <p class="" style="">If the session initiation request is declined or redirected, the original session MUST be considered in the ENDED state and the new session initiation request (if any) sent to the target entity or redirected entity MUST possess a newly-generated session ID.</p>
    <p class="" style="">To provisionally accept the session initiation request, the target entity returns an IQ-result:</p>
    <p class="caption">Example 20. Juliet Provisionally Accepts the Session Request</p>
<div class="indent"><pre>
&lt;iq type='result' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'/&gt;
      </pre></div>
  </div>
  <div class="indent">
<h3>6.4 <a name="protocol-redirect">Redirection</a>
</h3>
    <p class="" style="">After provisionally accepting the session, the target entity MAY redirect the session to another address (e.g., because the principal is not answering at the original resource). This is done by sending a Jingle redirect action to the initiating entity:</p>
    <p class="caption">Example 21. Juliet Redirects the Session</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' 
    id='jingle2' 
    to='romeo@montague.net/orchard' 
    type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='redirect' 
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;redirect&gt;xmpp:voicemail@capulet.com&lt;/redirect&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The recipient then acknowledges the redirection:</p>
    <p class="caption">Example 22. Romeo Acknowledges Redirection</p>
<div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard' 
    id='jingle2' 
    to='juliet@capulet.com/balcony' 
    type='result'/&gt;
    </pre></div>
    <p class="" style="">Both entities MUST now consider the original session to be in the ENDED state, and if the initiating entity wishes to initiate a session with the redirected address it MUST do so by sending a session initiation request to that address with a new session ID.</p>
  </div>
  <div class="indent">
<h3>6.5 <a name="protocol-negotiate">Negotiation</a>
</h3>
    <p class="" style="">As soon as the target entity provisionally accepts the session initiation request, the next phase of the session flow begins: negotiation of connectivity by exchanging XML-formatted candidate transports for the channel. The process for this negotiation is largely the same in Jingle as it is in <span style="font-weight: bold">Interactive Connectivity Establishment (ICE)</span>. The main exception is that, when operating in dribble mode, Jingle takes advantage of the request-response semantics of the XMPP &lt;iq/&gt; stanza type by sending each candidate transport in a separate IQ exchange. Jingle burst negotiation is more similar to ICE in this respect. The candidate format and negotiation modes are described below.</p>
    <div class="indent">
<h3>6.5.1 <a name="protocol-negotiate-candidate">Candidate Format</a>
</h3>
      <p class="" style="">In contrast to <span style="font-weight: bold">ICE</span>, in Jingle candidates are encoded into XML rather than into SDP. In addition, in Jingle a candidate is a single XML element (rather than the candidate pairs recommended in <span style="font-weight: bold">ICE</span>) to save bandwidth.</p>
      <p class="" style="">The following is an example of the candidate format:</p>
      <p class="caption">Example 23. Romeo Sends a Candidate Transport</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='candidate1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='negotiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='1.0'
               username='/38UHtocC941jdS4' 
               password='pcd+Z/WmsthSFIcz'
               type='local'
               network='0'
               generation='0' 
               ip='10.1.1.104' 
               port='13540'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
      </pre></div>
      <p class="" style="">The attributes of the &lt;candidate/&gt; element are as follows:</p>
      <ul>
        <li>The 'name' attribute identifies a channel within the context of the specified session type; possible values might include 'rtp' (for Real-time Transfer Protocol) and 'rtcp' (for Real-Time Control Protocol).</li>
        <li>The allowable values for the 'protocol' attribute are "udp", "tcp", and "ssltcp" as described below.</li>
        <li>The 'username', 'password', and 'preference' attributes directly map to the same entities in <span style="font-weight: bold">ICE</span>.</li>
        <li>The 'type' attribute is used for diagnostics; the allowable values are "local", "stun" (see <span class="ref" style="">RFC 3489</span>  [<a href="#nt-id2258071">16</a>]), and "relay".</li>
        <li>The 'network' attribute is also used for diagnostics; it is an index, starting at 0, referencing which network this candidate is on for a given peer (useful if the calling hardware has more than one Network Interface Card or NIC).</li>
        <li>The 'generation' attribute is an index, starting at 0, that enables the parties to keep track of updates to the candidate throughout the life of the session (see below).</li>
        <li>The 'ip' attribute specifies the Internet Protocol (IP) address for the candidate transport mechanism; this may be either an IPv4 address or an IPv6 address.</li>
        <li>The 'port' attribute specifies the port at the candidate IP address.</li>
      </ul>
    </div>
    <div class="indent">
<h3>6.5.2 <a name="protocol-negotiate-modes">Negotiation Modes</a>
</h3>
      <p class="" style="">An implementation SHOULD support both modes: dribble and burst. An entity MUST disclose which mode(s) it supports in its response to service discovery information requests via the "http://jabber.org/protocol/jingle?mode=dribble" and "http://jabber.org/protocol/jingle?mode=burst" features. If the target entity supports both modes, the initiating entity MUST specify its desired mode in the session initiation request, either explicitly by including the 'mode' attribute with a value of "burst" or "dribble", or implicitly specifying dribble mode by not including the 'mode' attribute (since the default value of the 'mode' attribute is "dribble"). If the target entity supports only one mode, then the initiating entity MUST specify that mode in the session initiation request; however, if the only mode supported by the target entity is not supported by the initiating entity, then the initiating MUST NOT send a session initiation request. An intermediary such as a SIP-to-XMPP gateway MUST insert its supported negotiation mode or modes (both in service discovery responses and session initiation requests) on behalf of entities it represents on the XMPP network.</p>
      <div class="indent">
<h3>6.5.2.1 <a name="protocol-negotiate-modes-dribble">Dribble Mode</a>
</h3>
        <p class="" style="">In dribble mode, each candidate is sent in a separate IQ stanza and acknowledged by the other party.</p>
        <p class="" style="">If dribble mode is used, the first step in negotiating connectivity is for each client to immediately begin sending candidate transport mechanisms to the other client. These candidates SHOULD be gathered by following the procedure specified in Section 7.1 of <span style="font-weight: bold">ICE</span> and prioritied by following the procedure specified in Section 7.2 of <span style="font-weight: bold">ICE</span>.</p>
        <p class="" style="">If the target entity successfully receives the candidate, it returns an IQ-result (if not, for example because the candidate data is improperly formatted, it returns an error).</p>
        <p class="" style="">Note well that the target entity is only indicating receipt of the candidate, not telling the initiating entity that the candidate will be used.</p>
        <p class="" style="">The initiating entity keeps sending candidates, one after the other (without stopping to receive an acknowledgement of receipt from the target entity for each candidate) until it has exhausted its supply of possible or desirable candidate transports:  [<a href="#nt-id2258212">17</a>] For each candidate, the target entity acknowledges receipt.</p>
        <p class="" style="">At the same time (i.e., immediately after provisionally accepting the session, not waiting for the initiating entity to begin or finish sending candidates), the target entity also begins sending candidates that may work for it. As above, the initiating entity acknowledges receipt of the candidates.</p>
        <p class="" style="">As the initiating entity and target entity receive candidates, they probe the various candidate transports for connectivity. In performing these connectivity checks, client SHOULD follow the procedure specified in Section 7.6 of <span style="font-weight: bold">ICE</span>.</p>
      </div>
      <div class="indent">
<h3>6.5.2.2 <a name="protocol-negotiate-modes-burst">Burst Mode</a>
</h3>
        <p class="" style="">Burst mode closely follows the offer-answer model specified in <span class="ref" style="">RFC 3264</span>  [<a href="#nt-id2258286">18</a>]. In particular, the initiating entity MUST send a complete set of candidate transports in the session initiation request, as in the following example:</p>
        <p class="caption">Example 24. Romeo Initiates Call (Burst Mode)</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='jingle1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle' 
          action='initiate' 
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='1.0'
               username='/38UHtocC941jdS4' 
               password='pcd+Z/WmsthSFIcz'
               type='local'
               network='0'
               generation='0' 
               ip='10.1.1.104' 
               port='13540'/&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='0.8'
               type='stun'
               username='ld6Hi+PfVtnmU8cf'
               password='gzoufy3aMXBRtiWs'
               network='1'
               generation='0' 
               ip='1.2.3.4' 
               port='6459'/&gt;
    &lt;candidate name='rtp'
               protocol='udp'
               preference='0.1'
               type='relay'
               username='XKqUmqiftjPUYAbF'
               password='G4116MkgTzb8+1N/'
               network='2'
               generation='0' 
               ip='5.6.7.8' 
               port='9823'/&gt;
    &lt;description xmlns='http://jabber.org/protocol/jingle/sessions/audio'&gt;
      &lt;payload-type id='18' name='G729'/&gt;
      &lt;payload-type id='97' name='IPCMWB'/&gt;
      &lt;payload-type id='98' name='L16'/&gt;
      &lt;payload-type id='103' name='ISAC'/&gt;
      &lt;payload-type id='102' name='iLBC'/&gt;
      &lt;payload-type id='4' name='G723'/&gt;
      &lt;payload-type id='100' name='EG711U'/&gt;
      &lt;payload-type id='101' name='EG711A'/&gt;
      &lt;payload-type id='0' name='PCMU'/&gt;
      &lt;payload-type id='8' name='PCMA'/&gt;
      &lt;payload-type id='13' name='CN'/&gt;
    &lt;/description&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
        </pre></div>
      </div>
    </div>
    <div class="indent">
<h3>6.5.3 <a name="protocol-negotiate-check">Checking Connectivity</a>
</h3>
      <p class="" style="">It is possible to check connectivity via STUN only "upfront" before the session is negotiated or also "inline" during the life of the session (e.g., to determine if a connectivity method other than that chosen initially is now more efficient); it is also possible to perform no STUN connectivity checking at all (e.g., this may be true of older SIP implementations that do no support STUN). An implementation SHOULD support inline STUN checking but MAY support only upfront STUN checking or no STUN checking at all. An entity MUST disclose which method(s) of connectivity checking it supports in its response to service discovery information requests via the "http://jabber.org/protocol/jingle?stun=inline", "http://jabber.org/protocol/jingle?stun=none", and "http://jabber.org/protocol/jingle?stun=upfront" features. If the target entity supports both upfront and inline STUN checking, the initiating entity MUST specify its desired mode in the session initiation request, either explicitly by including the 'stun' attribute with a value of "inline" or "upfront", or implicitly specifying inline checking by not including the 'stun' attribute (since the default value of the 'stun' attribute is "inline"). If the target entity supports only one of upfront or inline, then the initiating entity MUST specify that checking method in the session initiation request; however, if the only method supported by the target entity is not supported by the initiating entity, then the initiating MUST fall back to no STUN checking at all. An intermediary such as a SIP-to-XMPP gateway MUST insert its supported STUN checking method or methods (both in service discovery responses and session initiation requests) on behalf of entities it represents on the XMPP network.</p>
    </div>
  </div>
  <div class="indent">
<h3>6.6 <a name="protocol-acceptance">Acceptance</a>
</h3>
    <p class="" style="">If, based on the connectivity checks, the target entity determines that it will be able to establish a connection, it sends a definitive acceptance to the initiating entity:</p>
    <p class="caption">Example 25. Juliet Definitively Accepts the Call</p>
<div class="indent"><pre>
&lt;iq type='set' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='accept1'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='accept' 
          initiator='romeo@montague.net/orchard'
          responder='juliet@capulet.com/balcony'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The &lt;jingle/&gt; element in the accept stanza MAY contain a &lt;description/&gt; element that specifies the supported codecs (and other session description details) and SHOULD possess a 'responder' attribute that explicitly specifies the full JID of the responding entity. If provided, all future commmunications SHOULD be sent to the JID provided in the 'responder' attribute.</p> 
    <p class="" style="">The initiating entity then acknowledges the target entity's definitive acceptance:</p>
    <p class="caption">Example 26. Romeo Acknowledges Definitive Acceptance</p>
<div class="indent"><pre>
&lt;iq type='result' to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='accept1'/&gt;
    </pre></div>
    <p class="" style="">Now the initiating entity and target entity can begin sending media over the negotiated connection.</p>
    <p class="" style="">In the unlikely event that the target entity cannot find a suitable candidate transport, it SHOULD terminate the session as described below.</p>
  </div>
  <div class="indent">
<h3>6.7 <a name="protocol-terminate">Termination</a>
</h3>
    <p class="" style="">In order to gracefully end the session, either the target entity or the initiating entity MUST a send a "terminate" action to the other party:</p>
    <p class="caption">Example 27. Juliet Terminates the Session</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' 
    id='term1' 
    to='romeo@montague.net/orchard' 
    type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='terminate' 
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The initiating entity then acknowledges termination of the session:</p>
    <p class="caption">Example 28. Romeo Acknowledges Termination</p>
<div class="indent"><pre>
&lt;iq type='result' to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='term1'/&gt;
    </pre></div>
    <p class="" style="">Unfortunately, not all sessions end gracefully. The following events MUST be considered session-ending events, and any further communication for the session type MUST be completed through negotiation of a new session:</p>
    <ul>
      <li>Receipt of a 'redirect' or 'terminate' action from the other party.</li>
      <li>Receipt of &lt;presence type='unavailable'/&gt; from the other party.</li>
    </ul>
    <p class="" style="">In particular, one party MUST consider the session to be in the ENDED state if it receives presence of type "unavailable" from the other party:</p>
    <p class="caption">Example 29. Juliet Goes Offline</p>
<div class="indent"><pre>
&lt;presence from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' type='unavailable'/&gt;
    </pre></div>
    <p class="" style="">Naturally, in this case there is nothing for the initiating entity to acknowledge.</p>
  </div>
  <div class="indent">
<h3>6.8 <a name="protocol-info">Informational Messages</a>
</h3>
    <p class="" style="">At any point after initiation of a Jingle session, either entity MAY send an informational message to the other party, for example to inform the other party that a session initiation request is queued, that a device is ringing, or that a scheduled event has occurred or will occur. An information message takes the form of an IQ-set containing a &lt;jingle/&gt; element whose 'action' attribute is set to a value of "info"; the &lt;jingle/&gt; element MUST further contain a "payload" child element that specifies the information being communicated. The syntax of this payload element is undefined in this signalling specification and shall be defined by the appropriate session type specification.</p>
  </div>
<h2>7.
       <a name="errors">Error Handling</a>
</h2>
  <p class="" style="">The following sections describe error handling related to Jingle signalling. For general information regarding XMPP error handling, refer to <span style="font-weight: bold">RFC 3920</span> and <span class="ref" style="">Error Condition Mappings</span>  [<a href="#nt-id2258632">19</a>].</p>
  <div class="indent">
<h3>7.1 <a name="errors-initiate">Initiation-Related Error Conditions</a>
</h3>
    <p class="" style="">There are several possible reasons why the target entity might specify an error of &lt;not-acceptable/&gt; in response to the session initiation request. The target entity SHOULD specify the precise reason for not accepting the session by including an appropriate error condition element qualified by the 'http://jabber.org/protocol/jingle#errors' namespace along with the &lt;not-acceptable/&gt; error.  [<a href="#nt-id2258644">20</a>] The defined initiation-related error conditions are:</p>
    <p class="caption">Table 2: Initiation-Related Error Conditions</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Jingle Condition</th>
        <th colspan="" rowspan="">XMPP Condition</th>
        <th colspan="" rowspan="">Description</th>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;busy/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
        <td align="" colspan="" rowspan="">The target entity or principal is busy with other sessions or tasks and therefore is unable or unwilling to accept the session; this maps to SIP codes 486 and 600.  [<a href="#nt-id2258726">21</a>]</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;unsupported-media/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
        <td align="" colspan="" rowspan="">The target entity does not support any of the payload-types (e.g., codecs) offered by the initiating entity; this maps to SIP code 415.</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;unsupported-negotiation-mode/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
        <td align="" colspan="" rowspan="">The target entity does not support the session negotiation mode (dribble or burst) specified in the session initiation request.</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;unsupported-session-type/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
        <td align="" colspan="" rowspan="">The target entity does not support the session type specified in the session initiation request.</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;unsupported-stun-method/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
        <td align="" colspan="" rowspan="">The target entity does not support the STUN testing method (inline or none) specified in the session initiation request.</td>
      </tr>
    </table>
  </div>
  <div class="indent">
<h3>7.2 <a name="errors-other">Other Error Conditions</a>
</h3>
    <p class="" style="">At any point during a session, one of the entities may send a faulty signalling stanza to the other party. The error conditions defined for such cases are:</p>
    <p class="caption">Table 3: Other Error Conditions</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Jingle Condition</th>
        <th colspan="" rowspan="">XMPP Condition</th>
        <th colspan="" rowspan="">Description</th>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;out-of-order/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;unexpected-request/&gt;</td>
        <td align="" colspan="" rowspan="">The request cannot be at this point in the state machine (e.g., initiate after accept).</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;unknown-session/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;bad-request/&gt;</td>
        <td align="" colspan="" rowspan="">The 'sid' attribute specifies a session that is unknown to the recipient.</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;unsupported-action/&gt;</td>
        <td align="" colspan="" rowspan="">&lt;feature-not-implemented/&gt;</td>
        <td align="" colspan="" rowspan="">The 'action' attribute specifies an action that is not supported by the recipient.</td>
      </tr>
    </table>
  </div>
<h2>8.
       <a name="security">Security Considerations</a>
</h2>
  <p class="" style=""><span style="font-style: italic">Note: This section is not yet complete.</span></p>
  <div class="indent">
<h3>8.1 <a name="security-dos">Denial of Service</a>
</h3>
    <p class="" style="">Media sessions are resource-intensive. Therefore, it is possible to launch a denial-of-service attack against an entity by burdening it with too many media sessions. Care must be taken to accept media sessions only from known entities.</p>
  </div>
  <div class="indent">
<h3>8.2 <a name="security-gateways">Communication Through Gateways</a>
</h3>
    <p class="" style="">Jingle communications may be enabled through gateways to non-XMPP networks, whose security characteristics may be quite different from those of XMPP networks. (For example, on some SIP networks authentication is optional and "from" addresses can be easily forged.) Care must be taken in communicating through such gateways.</p>
  </div>
<h2>9.
       <a name="iana">IANA Considerations</a>
</h2>
  <p class="" style="">This JEP requires no interaction with the <span class="ref" style="">Internet Assigned Numbers Authority (IANA)</span>  [<a href="#nt-id2259097">22</a>].</p>
<h2>10.
       <a name="registrar">Jabber Registrar Considerations</a>
</h2>
  <div class="indent">
<h3>10.1 <a name="registrar-ns">Protocol Namespaces</a>
</h3>
    <p class="" style="">The <span class="ref" style="">Jabber Registrar</span>  [<a href="#nt-id2259142">23</a>] shall include 'http://jabber.org/protocol/jingle' in its registry of protocol namespaces.</p>
  </div>
  <div class="indent">
<h3>10.2 <a name="registrar-features">Service Discovery Features</a>
</h3>
    <p class="" style="">The Jabber Registrar shall include the following values in its registry of service discovery features.</p>
    <ul>
      <li>http://jabber.org/protocol/jingle?action=accept</li>
      <li>http://jabber.org/protocol/jingle?action=info</li>
      <li>http://jabber.org/protocol/jingle?action=initiate</li>
      <li>http://jabber.org/protocol/jingle?action=join</li>
      <li>http://jabber.org/protocol/jingle?action=initiate</li>
      <li>http://jabber.org/protocol/jingle?action=negotiate</li>
      <li>http://jabber.org/protocol/jingle?action=modify</li>
      <li>http://jabber.org/protocol/jingle?action=redirect</li>
      <li>http://jabber.org/protocol/jingle?action=replace</li>
      <li>http://jabber.org/protocol/jingle?action=terminate</li>
      <li>http://jabber.org/protocol/jingle?action=transfer</li>
      <li>http://jabber.org/protocol/jingle?mode=burst</li>
      <li>http://jabber.org/protocol/jingle?mode=dribble</li>
      <li>http://jabber.org/protocol/jingle?stun=inline</li>
      <li>http://jabber.org/protocol/jingle?stun=none</li>
      <li>http://jabber.org/protocol/jingle?stun=upfront</li>
    </ul>
  </div>
  <div class="indent">
<h3>10.3 <a name="registrar-jingle">Jingle Session Types Registry</a>
</h3>
    <p class="" style="">The Jabber Registrar shall maintain a registry of Jingle session types. All session type registrations shall be defined in separate documents (not in this JEP). Session types defined within the JEP series MUST be registered with the Jabber Registrar, resulting in protocol URIs of the form "http://jabber.org/protocol/jingle/session/name" (where "name" is the registered name of the session type)..</p>
    <div class="indent">
<h3>10.3.1 <a name="registrar-jingle-process">Registration Process</a>
</h3>
      <p class="" style="">In order to submit new values to this registry, the registrant must define an XML fragment of the following form and either include it in the relevant Jabber Enhancement Proposal or send it to the email address &lt;registrar@jabber.org&gt;:</p>
      <p class="caption"></p>
<div class="indent"><pre>
&lt;session&gt;
  &lt;name&gt;the name of the session type (e.g., "audio")&lt;/name&gt;
  &lt;desc&gt;a natural-language description of the session type&lt;/desc&gt;
  &lt;doc&gt;the document in which this session type is specified&lt;/doc&gt;
&lt;/session&gt;
      </pre></div>
    </div>
  </div>
<h2>11.
       <a name="schema">XML Schemas</a>
</h2>
  <div class="indent">
<h3>11.1 <a name="schema-signalling">Signalling</a>
</h3>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/jingle'
    xmlns='http://jabber.org/protocol/jingle'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='jingle'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:choice&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element ref='candidate' minOccurs='0' maxOccur='unbounded'/&gt;
          &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='1'/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:element ref='redirect' type='xs:anyURI'/&gt;
      &lt;/xs:choice&gt;
      &lt;xs:attribute name='action' use='required'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base='xs:NCName'&gt;
            &lt;xs:enumeration value='accept'/&gt;
            &lt;xs:enumeration value='info'/&gt;
            &lt;xs:enumeration value='initiate'/&gt;
            &lt;xs:enumeration value='join'/&gt;
            &lt;xs:enumeration value='modify'/&gt;
            &lt;xs:enumeration value='negotiate'/&gt;
            &lt;xs:enumeration value='redirect'/&gt;
            &lt;xs:enumeration value='replace'/&gt;
            &lt;xs:enumeration value='terminate'/&gt;
            &lt;xs:enumeration value='transfer'/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
      &lt;xs:attribute name='initiator' type='xs:string' use='required'/&gt;
      &lt;xs:attribute name='mode' use='optional' default='dribble'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base='xs:NCName'&gt;
            &lt;xs:enumeration value='burst'/&gt;
            &lt;xs:enumeration value='dribble'/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
      &lt;xs:attribute name='sid' type='xs:NMTOKEN' use='required'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='candidate'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:simpleContent&gt;
        &lt;xs:extension base='empty'&gt;
          &lt;xs:attribute name='generation' type='xs:unsignedByte' use='required'/&gt;
          &lt;xs:attribute name='ip' type='xs:string' use='required'/&gt;
          &lt;xs:attribute name='name' type='xs:string' use='optional'/&gt;
          &lt;xs:attribute name='network' type='xs:unsignedByte' use='required'/&gt;
          &lt;xs:attribute name='password' type='xs:string' use='required'/&gt;
          &lt;xs:attribute name='port' type='xs:short' use='required'/&gt;
          &lt;xs:attribute name='preference' type='xs:decimal' use='required'/&gt;
          &lt;xs:attribute name='protocol' use='required'&gt;
            &lt;xs:simpleType&gt;
              &lt;xs:restriction base='xs:NCName'&gt;
                &lt;xs:enumeration value='ssltcp'/&gt;
                &lt;xs:enumeration value='tcp'/&gt;
                &lt;xs:enumeration value='udp'/&gt;
              &lt;/xs:restriction&gt;
            &lt;/xs:simpleType&gt;
          &lt;/xs:attribute&gt;
          &lt;xs:attribute name='type' use='required'&gt;
            &lt;xs:simpleType&gt;
              &lt;xs:restriction base='xs:NCName'&gt;
                &lt;xs:enumeration value='local'/&gt;
                &lt;xs:enumeration value='relay'/&gt;
                &lt;xs:enumeration value='stun'/&gt;
              &lt;/xs:restriction&gt;
            &lt;/xs:simpleType&gt;
          &lt;/xs:attribute&gt;
          &lt;xs:attribute name='username' type='xs:string' use='required'/&gt;
        &lt;/xs:extension&gt;
      &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>11.2 <a name="schema-errors">Errors</a>
</h3>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/jingle#errors'
    xmlns='http://jabber.org/protocol/jingle#errors'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='busy' type='empty'/&gt;
  &lt;xs:element name='out-of-order' type='empty'/&gt;
  &lt;xs:element name='unknown-session' type='empty'/&gt;
  &lt;xs:element name='unsupported-action' type='empty'/&gt;
  &lt;xs:element name='unsupported-media' type='empty'/&gt;
  &lt;xs:element name='unsupported-negotiation-mode' type='empty'/&gt;
  &lt;xs:element name='unsupported-session-type' type='empty'/&gt;
  &lt;xs:element name='unsupported-stun-method' type='empty'/&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
<h2>12.
       <a name="issues">Open Issues</a>
</h2>
  <p class="" style="">The open issues include:</p>
  <ul>
    <li>Describe all supported use cases, including third-party call control.</li>
    <li>Define modify (e.g., put caller on hold), join, replace, and transfer.</li>
    <li>Specify how to include call history (e.g., for transfer).</li>
    <li>Specify multi-user scenarios.</li>
    <li>Specify how to initiate a session with a bare JID.</li>
  </ul>
<h2>13.
       <a name="ack">Acknowledgements</a>
</h2>
  <p class="" style="">The authors would like to thank Rohan Mahy for his helpful feedback on this document. Thanks also to those who have commented on the <span class="ref" style="">Standards JIG</span>  [<a href="#nt-id2259475">24</a>] and (earlier) Jingle  [<a href="#nt-id2259404">25</a>] mailing lists.</p>
<p><hr></p>
<a name="notes"></a><h2>Notes</h2>
<div class="indent">
<p><a name="nt-id2250674">1</a>. JEP-0111: A Transport for Initiating and Negotiating Sessions (TINS &lt;<a href="http://www.jabber.org/jeps/jep-0111.html">http://www.jabber.org/jeps/jep-0111.html</a>&gt;.</p>
<p><a name="nt-id2250656">2</a>. It is true that TINS made it relatively easy to implement an XMPP-to-SIP gateway; however, in line with the long-time Jabber philosophy of "simple clients, complex servers", it would be better to force complexity onto the server-side gateway and to keep the client as simple as possible.</p>
<p><a name="nt-id2250722">3</a>. For example, one large ISP recently decided to switch to a pure XMPP approach after having implemented and deployed a dual-stack client for several years.</p>
<p><a name="nt-id2250781">4</a>. Possible other session types include file sharing, application casting, application sharing, whiteboarding, torrent broadcasting, shared real-time editing, and distributed musical performance, to name but a few.</p>
<p><a name="nt-id2256357">5</a>. RFC 2327: SDP: Session Description Protocol &lt;<a href="http://www.ietf.org/rfc/rfc2327.txt">http://www.ietf.org/rfc/rfc2327.txt</a>&gt;.</p>
<p><a name="nt-id2256382">6</a>. RFC 3261: Session Initiation Protocol (SIP) &lt;<a href="http://www.ietf.org/rfc/rfc3261.txt">http://www.ietf.org/rfc/rfc3261.txt</a>&gt;.</p>
<p><a name="nt-id2256404">7</a>. ITU Recommendation H.323: Packet-based Multimedia Communications Systems (September 1999).</p>
<p><a name="nt-id2256670">8</a>. RFC 3489: STUN - Simple Traversal of User Datagram Protocol (UDP) Through Network Address Translators (NATs) &lt;<a href="http://www.ietf.org/rfc/rfc3489.txt">http://www.ietf.org/rfc/rfc3489.txt</a>&gt;.</p>
<p><a name="nt-id2256697">9</a>. Interactive Connectivity Establishment (ICE): A Methodology for Network Address Translator (NAT) Traversal for Offer/Answer Protocols &lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-ice-06.txt">http://www.ietf.org/internet-drafts/draft-ietf-mmusic-ice-06.txt</a>&gt;. Work in progress.</p>
<p><a name="nt-id2256772">10</a>. JEP-0030: Service Discovery &lt;<a href="http://www.jabber.org/jeps/jep-0030.html">http://www.jabber.org/jeps/jep-0030.html</a>&gt;.</p>
<p><a name="nt-id2256795">11</a>. JEP-0115: Entity Capabilities &lt;<a href="http://www.jabber.org/jeps/jep-0115.html">http://www.jabber.org/jeps/jep-0115.html</a>&gt;.</p>
<p><a name="nt-id2256865">12</a>. JEP-0168: Resource Application Priority &lt;<a href="http://www.jabber.org/jeps/jep-0168.html">http://www.jabber.org/jeps/jep-0168.html</a>&gt;.</p>
<p><a name="nt-id2256904">13</a>. JEP-0167: Jingle Audio &lt;<a href="http://www.jabber.org/jeps/jep-0167.html">http://www.jabber.org/jeps/jep-0167.html</a>&gt;.</p>
<p><a name="nt-id2257665">14</a>. See &lt;<a href="http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken">http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken</a>&gt;</p>
<p><a name="nt-id2257853">15</a>. Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP) &lt;<a href="http://www.ietf.org/internet-drafts/draft-saintandre-xmpp-iri-03.txt">http://www.ietf.org/internet-drafts/draft-saintandre-xmpp-iri-03.txt</a>&gt; (work in progress).</p>
<p><a name="nt-id2258071">16</a>. RFC 3489: STUN - Simple Traversal of User Datagram Protocol (UDP) Through Network Address Translators (NATs) &lt;<a href="http://www.ietf.org/rfc/rfc3489.txt">http://www.ietf.org/rfc/rfc3489.txt</a>&gt;.</p>
<p><a name="nt-id2258212">17</a>. Because certain candidates may be more "expensive" in terms of bandwidth or processing power, the initiator may not want to advertise their existence unless necessary.</p>
<p><a name="nt-id2258286">18</a>. RFC 3264: An Offer/Answer Model with the Session Description Protocol (SDP) &lt;<a href="http://www.ietf.org/rfc/rfc3264.txt">http://www.ietf.org/rfc/rfc3264.txt</a>&gt;.</p>
<p><a name="nt-id2258632">19</a>. JEP-0086: Error Condition Mappings &lt;<a href="http://www.jabber.org/jeps/jep-0086.html">http://www.jabber.org/jeps/jep-0086.html</a>&gt;.</p>
<p><a name="nt-id2258644">20</a>. While it may seem that some of these Jingle-specific conditions would be more appropriate in conjunction with other XMPP conditions, such as &lt;feature-not-implemented/&gt;, the &lt;not-acceptable/&gt; XMPP condition is used for all cases of declining a session initiation request in order to simplify handling of session initiation.</p>
<p><a name="nt-id2258726">21</a>. We deliberately do not specify a separate error of "resource-constrained" in order to help prevent denial of service attacks.</p>
<p><a name="nt-id2259097">22</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
<p><a name="nt-id2259142">23</a>. The Jabber Registrar maintains a list of reserved Jabber protocol namespaces as well as registries of parameters used in the context of protocols approved by the Jabber Software Foundation. For further information, see &lt;<a href="http://www.jabber.org/registrar/">http://www.jabber.org/registrar/</a>&gt;.</p>
<p><a name="nt-id2259475">24</a>. The Standards JIG is a standing Jabber Interest Group devoted to discussion of Jabber Enhancement Proposals. The discussion list of the Standards JIG is the primary venue for discussion of Jabber protocol development, as well as for announcements by the JEP Editor and Jabber Registrar. To subscribe to the list or view the list archives, visit &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig/">http://mail.jabber.org/mailman/listinfo/standards-jig/</a>&gt;.</p>
<p><a name="nt-id2259404">25</a>. Before this specification was accepted as a Jabber Enhancement Proposal, it was discussed on the semi-private &lt;jingle@jabber.org&gt; mailing list; although that list is no longer used (the Standards-JIG list is the preferred discussion venue), for historical purposes it is publicly archived at &lt;<a href="http://mail.jabber.org/pipermail/jingle/">http://mail.jabber.org/pipermail/jingle/</a>&gt;.</p>
</div>
<p><hr></p>
<a name="revs"></a><h2>Revision History</h2>
<div class="indent">
<h4>Version 0.1 (2005-12-15)</h4>
<div class="indent">Initial JEP version. (psa)
    </div>
<h4>Version 0.0.10 (2005-12-11)</h4>
<div class="indent">More fully documented burst mode, connectivity checks, error cases, etc. (psa)
    </div>
<h4>Version 0.0.9 (2005-12-08)</h4>
<div class="indent">Restructured document flow; provided example of burst mode. (psa)
    </div>
<h4>Version 0.0.8 (2005-12-05)</h4>
<div class="indent">Distinguished between dribble mode and burst mode, including mode attribute, service discovery features, and implementation notes; provided detailed resource discovery examples; corrected state chart; specified session termination; specified error conditions; specified semantics of informational messages; began to define security considerations; added Joe Beda as co-author. (psa/sl/jb)
    </div>
<h4>Version 0.0.7 (2005-11-08)</h4>
<div class="indent">Added more detail to basic session flow; harmonized candidate negotiation process with ICE. (psa)
    </div>
<h4>Version 0.0.6 (2005-10-27)</h4>
<div class="indent">Added Jabber Registrar considerations; defined schema; completed slight syntax cleanup. (psa)
    </div>
<h4>Version 0.0.5 (2005-10-21)</h4>
<div class="indent">Separated description formats from signalling protocol. (psa/sl)
    </div>
<h4>Version 0.0.4 (2005-10-19)</h4>
<div class="indent">Harmonized basic session flow with Google Talk protocol; added Scott Ludwig as co-author. (psa/sl)
    </div>
<h4>Version 0.0.3 (2005-10-10)</h4>
<div class="indent">Added more detail to basic session flow. (psa)
    </div>
<h4>Version 0.0.2 (2005-10-07)</h4>
<div class="indent">Protocol cleanup. (psa/jjh)
    </div>
<h4>Version 0.0.1 (2005-10-06)</h4>
<div class="indent">First draft. (psa/jjh)
    </div>
</div>
<p><hr></p>
<p>END</p>
</body>
</html>
