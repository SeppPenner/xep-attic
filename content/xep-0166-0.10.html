<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>XEP-0166: Jingle</title>
<link rel="stylesheet" type="text/css" href="/xmpp.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<meta name="DC.Title" content="Jingle">
<meta name="DC.Creator" content="Scott Ludwig">
<meta name="DC.Creator" content="Joe Beda">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Creator" content="Joe Hildebrand">
<meta name="DC.Creator" content="Sean Egan">
<meta name="DC.Creator" content="Robert McQueen">
<meta name="DC.Description" content="This document defines a framework for initiating and managing peer-to-peer sessions (e.g., voice and video exchanges) between Jabber/XMPP clients in a way that is interoperable with existing Internet standards.">
<meta name="DC.Publisher" content="Jabber Software Foundation">
<meta name="DC.Contributor" content="XMPP Extensions Editor">
<meta name="DC.Date" content="2006-09-29">
<meta name="DC.Type" content="XMPP Extension Protocol">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="XEP-0166">
<meta name="DC.Language" content="en">
<meta name="DC.Rights" content="This XMPP Extension Protocol is copyright 1999 - 2006 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;http://www.xmpp.org/extensions/ipr-policy.shtml&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;http://creativecommons.org/licenses/by/2.5/&gt;).">
</head>
<body>
<h1>XEP-0166: Jingle</h1>
<p>This document defines a framework for initiating and managing peer-to-peer sessions (e.g., voice and video exchanges) between Jabber/XMPP clients in a way that is interoperable with existing Internet standards.</p>
<p><hr></p>
<p style="color:red">NOTICE: This document is currently within Last Call or under consideration by the XMPP Council for advancement to the next stage in the JSF standards process.</p>
<p><hr></p>
<h2>XEP Information</h2>
<p class="indent">
            Status: 
            <a href="http://www.xmpp.org/extensions/xep-0001.html#states-Proposed">Proposed</a><br>
            Type:
            <a href="http://www.xmpp.org/extensions/xep-0001.html#types-Standards%20Track">Standards Track</a><br>
            Number: 0166<br>
            Version: 0.10<br>
            Last Updated: 2006-09-29<br>
            Publishing Organization: <a href="http://www.jabber.org/jsf/">Jabber Software Foundation</a><br>
                Approving Body: <a href="http://www.jabber.org/council/">XMPP Council</a><br>Dependencies: XMPP Core<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: jingle<br>
              Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/Jingle%20(XEP-0166)">http://wiki.jabber.org/index.php/Jingle (XEP-0166)</a>&gt;
            </p>
<h2>Author Information</h2>
<div class="indent">
<h3>Scott Ludwig</h3>
<p class="indent">
        Email:
        <a href="mailto:scottlu@google.com">scottlu@google.com</a><br>
        JID: 
        <a href="xmpp:scottlu@google.com">scottlu@google.com</a></p>
<h3>Joe Beda</h3>
<p class="indent">
        Email:
        <a href="mailto:jbeda@google.com">jbeda@google.com</a><br>
        JID: 
        <a href="xmpp:jbeda@google.com">jbeda@google.com</a></p>
<h3>Peter Saint-Andre</h3>
<p class="indent">
        Email:
        <a href="mailto:stpeter@jabber.org">stpeter@jabber.org</a><br>
        JID: 
        <a href="xmpp:stpeter@jabber.org">stpeter@jabber.org</a></p>
<h3>Joe Hildebrand</h3>
<p class="indent">
        Email:
        <a href="mailto:jhildebrand@jabber.com">jhildebrand@jabber.com</a><br>
        JID: 
        <a href="xmpp:hildjj@jabber.org">hildjj@jabber.org</a></p>
<h3>Sean Egan</h3>
<p class="indent">
        Email:
        <a href="mailto:seanegan@google.com">seanegan@google.com</a><br>
        JID: 
        <a href="xmpp:seanegan@google.com">seanegan@google.com</a></p>
<h3>Robert McQueen</h3>
<p class="indent">
        Email:
        <a href="mailto:robert.mcqueen@collabora.co.uk">robert.mcqueen@collabora.co.uk</a><br>
        JID: 
        <a href="xmpp:robert.mcqueen@collabora.co.uk">robert.mcqueen@collabora.co.uk</a></p>
</div>
<h2>Legal Notice</h2>
<p class="indent">This XMPP Extension Protocol is copyright 1999 - 2006 by the <a href="http://www.jabber.org/jsf/">Jabber Software Foundation</a> (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;<a href="http://www.xmpp.org/extensions/ipr-policy.shtml">http://www.xmpp.org/extensions/ipr-policy.shtml</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;<a href="http://creativecommons.org/licenses/by/2.5/">http://creativecommons.org/licenses/by/2.5/</a>&gt;).</p>
<h2>Discussion Venue</h2>
<p class="indent">The preferred venue for discussion of this document is the Standards-JIG discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig">http://mail.jabber.org/mailman/listinfo/standards-jig</a>&gt;.</p>
<h2>Relation to XMPP</h2>
<p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the Jabber Software Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this document has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
<h2>Conformance Terms</h2>
<p class="indent">The following keywords as used in this document are to be interpreted as described in RFC 2119: "MUST", "SHALL", "REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT RECOMMENDED"; "MAY", "OPTIONAL".</p>
<p><hr></p>
<h2>Table of Contents</h2>
<div class="indent"><dl>
<dt>1.  <a href="#intro">Introduction</a>
</dt>
<dt>2.  <a href="#reqs">Requirements</a>
</dt>
<dt>3.  <a href="#glossary">Glossary</a>
</dt>
<dt>4.  <a href="#concepts">Concepts and Approach</a>
</dt>
<dl>
<dt>4.1.  <a href="#concepts-session">Overall Session Management</a>
</dt>
<dt>4.2.  <a href="#concepts-content">Session Content</a>
</dt>
<dl>
<dt>4.2.1.  <a href="#concepts-description">Content Description Formats</a>
</dt>
<dt>4.2.2.  <a href="#concepts-transport">Content Transport Methods</a>
</dt>
</dl>
</dl>
<dt>5.  <a href="#protocol">Protocol</a>
</dt>
<dl>
<dt>5.1.  <a href="#protocol-resource">Resource Determination</a>
</dt>
<dt>5.2.  <a href="#protocol-initiate">Initiation</a>
</dt>
<dt>5.3.  <a href="#protocol-response">Target Entity Response</a>
</dt>
<dt>5.4.  <a href="#protocol-redirect">Redirection</a>
</dt>
<dt>5.5.  <a href="#protocol-decline">Decline</a>
</dt>
<dt>5.6.  <a href="#protocol-negotiation">Negotiation</a>
</dt>
<dt>5.7.  <a href="#protocol-acceptance">Acceptance</a>
</dt>
<dt>5.8.  <a href="#protocol-modify">Modifying an Active Session</a>
</dt>
<dt>5.9.  <a href="#protocol-terminate">Termination</a>
</dt>
<dt>5.10.  <a href="#protocol-info">Informational Messages</a>
</dt>
</dl>
<dt>6.  <a href="#errors">Error Handling</a>
</dt>
<dt>7.  <a href="#impl">Implementation Notes</a>
</dt>
<dt>8.  <a href="#security">Security Considerations</a>
</dt>
<dl>
<dt>8.1.  <a href="#security-dos">Denial of Service</a>
</dt>
<dt>8.2.  <a href="#security-gateways">Communication Through Gateways</a>
</dt>
</dl>
<dt>9.  <a href="#iana">IANA Considerations</a>
</dt>
<dt>10.  <a href="#registrar">XMPP Registrar Considerations</a>
</dt>
<dl>
<dt>10.1.  <a href="#registrar-ns">Protocol Namespaces</a>
</dt>
<dt>10.2.  <a href="#registrar-content">Jingle Content Description Formats Registry</a>
</dt>
<dt>10.3.  <a href="#registrar-transports">Jingle Content Transport Methods Registry</a>
</dt>
</dl>
<dt>11.  <a href="#schema">XML Schemas</a>
</dt>
<dl>
<dt>11.1.  <a href="#schema-jingle">Jingle</a>
</dt>
<dt>11.2.  <a href="#schema-errors">Jingle Errors</a>
</dt>
</dl>
<dt>12.  <a href="#ack">Acknowledgements</a>
</dt>
<dt><a href="#notes">Notes</a></dt>
<dt><a href="#revs">Revision History</a></dt>
</dl></div>
<p><hr></p>
<h2>1.
       <a name="intro">Introduction</a>
</h2>
  <p class="" style="">There exists no widely-adopted standard for initiating and managing peer-to-peer (p2p) interactions (such as voice, video, or file sharing exchanges) from within Jabber/XMPP clients. Although several large service providers and Jabber/XMPP clients have written and implemented their own proprietary XMPP extensions for p2p signalling (usually only for voice), those technologies are not open and do not always take into account requirements to interoperate with the Public Switched Telephone Network (PSTN) or emerging SIP-based Internet voice networks. By contrast, the only existing open protocol has been <span class="ref" style="">A Transport for Initiating and Negotiating Sessions</span>  [<a href="#nt-id2257853">1</a>], which made it possible to initiate and manage p2p sessions, but which did not provide enough of the key signalling semantics to be easily implemented in Jabber/XMPP clients.  [<a href="#nt-id2257839">2</a>]</p>
  <p class="" style="">The result has been an unfortunate fragmentation within the XMPP community regarding signalling protocols. There are, essentially, two approaches to solving the problem:</p>
  <ol start="" type="">
    <li>Recommend that all client developers implement a dual-stack (XMPP + SIP) solution.</li>
    <li>Define a full-featured protocol for XMPP signalling.</li>
  </ol>
  <p class="" style="">Implementation experience indicates that a dual-stack approach may not be feasible on all the computing platforms for which Jabber clients have been written, or even desirable on platforms where it is feasible.  [<a href="#nt-id2257906">3</a>] Therefore, it seems reasonable to define an XMPP signalling protocol that can provide the necessary signalling semantics while also making it possible to interoperate with existing Internet standards.</p>
  <p class="" style="">As a result of feedback received on <span style="font-weight: bold">XEP-0111</span>, the second and fourth authors of this document began to define such a signalling protocol, code-named Jingle. Upon communication with members of the Google Talk team,  [<a href="#nt-id2257929">4</a>] it was discovered that the emerging Jingle approach was conceptually (and even syntactically) quite similar to the signalling protocol used in the Google Talk application. Therefore, in the interest of interoperability and adoption, we decided to harmonize the two approaches. The signalling protocol specified therein is, therefore, substantially equivalent to the existing Google Talk protocol, with several adjustments based on feedback received from implementors as well as for publication within the Jabber Software Foundation's standards process.</p>
<h2>2.
       <a name="reqs">Requirements</a>
</h2>
  <p class="" style="">The protocol defined herein is designed to meet the following requirements:</p>
  <ol start="" type="">
    <li>Make it possible to manage a wide variety of peer-to-peer sessions (not limited to voice and video) within XMPP.  [<a href="#nt-id2257976">5</a>]</li>
    <li>Make it possible to add, modify, and remove content types from an existing session.</li>
    <li>Make it relatively easy to implement support for the protocol in standard Jabber/XMPP clients.</li>
    <li>Where communication with non-XMPP entities is needed, push as much complexity as possible onto server-side gateways between the XMPP network and the non-XMPP network.</li>
  </ol>
  <p class="" style="">This document defines the signalling protocol only. Additional documents specify the following:</p>
  <ul>
    <li><p class="" style="">Various content description formats (audio, video, etc.) and, where possible, mapping those types to the Session Description Protocol (SDP; see <span class="ref" style="">RFC 4566</span>  [<a href="#nt-id2258044">6</a>]); one example is <span class="ref" style="">Jingle Audio Content Description Format</span>  [<a href="#nt-id2258068">7</a>].</p></li>
    <li><p class="" style="">Various content transport methods.</p></li>
    <li><p class="" style="">Procedures for mapping the Jingle signalling protocol to existing signalling standards such as the IETF's Session Initiation Protocol (SIP; see <span class="ref" style="">RFC 3261</span>  [<a href="#nt-id2258111">8</a>]) and the ITU's H.323 protocol (see <span class="ref" style="">H.323</span>  [<a href="#nt-id2258133">9</a>]).</p></li>
  </ul>
<h2>3.
       <a name="glossary">Glossary</a>
</h2>
  <p class="caption">Table 1: Glossary</p>
<table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Term</th>
      <th colspan="" rowspan="">Definition</th>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Session</td>
      <td align="" colspan="" rowspan="">A number of pairs of negotiated content transport methods and content description formats connecting two entities. It is delimited in time by an initiate request and session ending events. During the lifetime of a session, pairs of content descriptions and content transport methods can be added or removed.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Content Type</td>
      <td align="" colspan="" rowspan="">A formal declaration of the purpose(s) of the session. Common sessions might include types such as "voice", both "voice" and "video", and "file sharing". A session consists of at least one active negotiated content type at a time. Depending on the content type and the content description, one content description may require multiple components to be communicated by the transport. This is the 'what' of the session. In Jingle XML syntax the content type is the namespace of the &lt;description/&gt; element.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Content Description</td>
      <td align="" colspan="" rowspan="">The details of the content type being established. For instance, this might describe the acceptable codecs when establishing a voice conversation. The XML elements for the content description are qualified by the namespace of the content type. The content description defines the bits to be transferred.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Transport Method</td>
      <td align="" colspan="" rowspan="">The method for establishing data stream(s) between entities. Possible transports might include <span class="ref" style="">Jingle RTP-ICE Transport Method</span>  [<a href="#nt-id2258645">10</a>], <span class="ref" style="">Jingle Raw UDP Transport Method </span>  [<a href="#nt-id2250552">11</a>], inband data, etc. This is the 'how' of the session. In Jingle XML syntax this is the namespace of the &lt;transport/&gt; element. The content transport method defines how to transfer bits from one host to another.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">Component</td>
      <td align="" colspan="" rowspan="">A component is a numbered stream of data which needs to be transmitted between the endpoints for a given content type in the context of a given session. It is up to the transport to negotiate the details of each component. For instance, the voice content type might use two components, one to transmit an RTP stream, and another to transmit RTCP timing information.</td>
    </tr>
  </table>
<h2>4.
       <a name="concepts">Concepts and Approach</a>
</h2>
  <p class="" style="">Jingle consists of three parts, each with its own syntax, semantics, and state machine:</p>
  <ol start="" type="">
    <li>Overall session management</li>
    <li>Content description formats (the "what")</li>
    <li>Content transport methods (the "how")</li>
  </ol>
  <p class="" style="">This document defines the semantics and syntax for overall session management, and provides pluggable "slots" for content description formats and content transport methods, which are specified in separate documents.</p>
  <div class="indent">
<h3>4.1 <a name="concepts-session">Overall Session Management</a>
</h3>
    <p class="" style="">The state machine for overall session management (i.e., the state per Session ID) is as follows:</p>
    <p class="caption"></p>
<div class="indent"><pre>
         o
         |
         | session-initiate
         |
         | +-----------------------+
         |/                        |
PENDING  o---------------------+   |
         |  | session-info,    |   |
         |  | content-remove,  |   |
         |  | content-modify,  |   |
         |  | content-accept,  |   |
         |  | content-decline, |   |
         |  +------------------+   |
         |                         |
         | session-accept          |
         |                         |
 ACTIVE  o---------------------+   |
         |  | session-info,    |   |
         |  | content-add,     |   |
         |  | content-remove,  |   |
         |  | content-modify,  |   |
         |  | content-accept,  |   |
         |  | content-decline, |   |
         |  +------------------+   |
         |                         |
         +-------------------------+
                                   |
                                   | session-redirect,
                                   | session-terminate
                                   |
                                   o ENDED
    </pre></div>
    <p class="" style="">There are three overall session states:</p>
    <ol start="" type="">
      <li>PENDING</li>
      <li>ACTIVE</li>
      <li>ENDED</li>
    </ol>
    <p class="" style="">The actions related to management of the overall Jingle session are:</p>
    <ol start="1" type="">
      <li>content-accept (accept a content-add, content-modify, or content-remove; implicitly also serves as a description-accept and transport-accept)</li>
      <li>content-add (add one or more new content types to the session; this MUST NOT be sent while the session is in the PENDING state)</li>
      <li>content-decline (reject a content-add or content-modify)</li>
      <li>content-modify (change an existing content type, mainly the directionality)</li>
      <li>content-remove (remove one or more content types from the session)</li>
      <li>session-accept (definitively accept a session request; implicitly also serves as a description-accept and transport-accept)</li>
      <li>session-initiate (request a new Jingle session)</li>
      <li>session-info (session-level information / messages)</li>
      <li>session-redirect (redirect an initiate request to another address)</li>
      <li>session-terminate (end an existing session)</li>
    </ol>
  </div>
  <div class="indent">
<h3>4.2 <a name="concepts-content">Session Content</a>
</h3>
    <p class="" style="">The content type of a session is made up of two aspects:</p>
    <ol start="1" type="">
      <li>The content description format specifies the "what" of the session (e.g., audio).</li>
      <li>The content transport method defines "how" the data shall be exchanged (e.g., raw UDP).</li>
    </ol>
    <p class="" style="">The &lt;content/&gt; element also specifies who will be sending content (the initiator, the recipient, or both).</p>
    <div class="indent">
<h3>4.2.1 <a name="concepts-description">Content Description Formats</a>
</h3>
      <p class="" style="">When negotiating the session and its content type, the entities involved in the session need to exchange content description formats. The approach taken herein is to specify pure session description information in separate specifications, one for each content description format (audio, video, etc.).  [<a href="#nt-id2258965">12</a>] The session negotiation must contain some content description format(s), which are defined in separate specifications. Those specifications also define the state chart for the content description format in question.</p>
      <p class="" style="">The generic state machine for management of any given content description format is as follows:</p>
      <p class="caption"></p>
<div class="indent"><pre>
         START
           o  
           |   
           | session-initiate
           | content-add
           |
[PENDING]  o-------------+
           |   |         | description-info
           |   |_________| description-modify
           |
           | content-accept
           | description-accept
           | session-accept
           |
           |  _____________________o [MODIFYING]
           | / description-modify / \
           |/                    /   |
 [ACTIVE]  o--------------------/    | 
           |\  description-decline   |
           | \______________________/
           |   description-accept
           |
           | content-remove
           | session-terminate
           |
           o [ENDED]
      </pre></div>
      <p class="" style="">The states related to management of content description formats are:</p>
      <ol start="" type="">
        <li>PENDING</li>
        <li>ACTIVE</li>
        <li>MODIFYING</li>
        <li>ENDED</li>
      </ol>
      <p class="" style="">The actions related to management of content description formats are:</p>
      <ol start="" type="">
        <li>description-info (description-level information / messages)</li>
        <li>description-modify (request a change to a content description format)</li>
        <li>description-accept (accept a proposed content change)</li>
        <li>description-decline (decline a proposed content change)</li>
      </ol>
    </div>
    <div class="indent">
<h3>4.2.2 <a name="concepts-transport">Content Transport Methods</a>
</h3>
      <p class="" style="">As with the content description formats, the content transport methods are specified in separate specifications. Possible content transport methods include Real-time Transport Protocol (RTP) with Interactive Connectivity Establishment (ICE) and raw UDP. Those specifications will also define the state chart for the content transport method in question.</p>
      <p class="" style="">The generic state machine for any given content transport method is as follows:</p>
      <p class="caption"></p>
<div class="indent"><pre>
         START
           o  
           |   
           | session-initiate
           | content-add
           |
[PENDING]  o-------------+
           |   |         | transport-info
           |   |_________| transport-modify
           |
           | content-accept
           | session-accept
           | transport-accept
           |
           |  ___________________o [MODIFYING]
           | / transport-modify / \
           |/                  /   |
 [ACTIVE]  o------------------/    | 
           |\  transport-decline   |
           | \____________________/
           |   transport-accept
           |
           | content-remove
           | session-terminate
           |
           o [ENDED]
      </pre></div>
      <p class="" style="">The states related to management of content transport methods are:</p>
      <ol start="" type="">
        <li>PENDING</li>
        <li>ACTIVE</li>
        <li>MODIFYING</li>
        <li>ENDED</li>
      </ol>
      <p class="" style="">The actions related to management of content transport methods are:</p>
      <ol start="" type="">
        <li>transport-info (transport-level information / messages)</li>
        <li>transport-modify (request a change to the content transport methods)</li>
        <li>transport-accept (accept a proposed transport change)</li>
        <li>transport-decline (decline a proposed transport change)</li>
      </ol>
    </div>
  </div>
<h2>5.
       <a name="protocol">Protocol</a>
</h2>
  <div class="indent">
<h3>5.1 <a name="protocol-resource">Resource Determination</a>
</h3>
    <p class="" style="">In order to initiate a Jingle session, the initiating entity must determine which of the target entity's XMPP resources is best for the desired content description format. If a contact has only one XMPP resource, this task MUST be completed using <span class="ref" style="">Service Discovery</span>  [<a href="#nt-id2259238">13</a>] or the presence-based profile of service discovery specified in <span class="ref" style="">Entity Capabilities</span>  [<a href="#nt-id2259262">14</a>].</p>
    <p class="" style="">Naturally, instead of sending service discovery requests to every contact in a user's roster, it is more efficient to use <span style="font-weight: bold">Entity Capabilities</span>, whereby support for Jingle and various Jingle content description formats and content transport methods is determined for a client version in general (rather than on a per-JID basis) and then cached. Refer to <span style="font-weight: bold">XEP-0115</span> for details.</p>
    <p class="" style="">If a contact has more than one XMPP resource, it may be that only one of the resources supports Jingle and the desired content description format, in which case the user MUST initiate the Jingle signalling with that resource.</p>
    <p class="" style="">If a contact has more than one XMPP resource that supports Jingle and the desired content description format, it is RECOMMENDED for a client to use <span class="ref" style="">Resource Application Priority</span>  [<a href="#nt-id2259324">15</a>] in order to determine which is the best resource with which to initiate the desired Jingle session.</p>
  </div>
  <div class="indent">
<h3>5.2 <a name="protocol-initiate">Initiation</a>
</h3>
    <p class="" style="">Once the initiating entity has discovered which of the target entity's XMPP resources is ideal for the desired content description format, it sends a session initiation request to the target entity. This request is an IQ-set containing a &lt;jingle/&gt; element qualified by the 'http://jabber.org/protocol/jingle' namespace. The &lt;jingle/&gt; element MUST possess the 'action', 'initiator', and 'sid' attributes (the latter two uniquely identify the session). For initiation, the 'action' attribute MUST have a value of "session-initiate" and the &lt;jingle/&gt; element MUST contain one or more &lt;content/&gt; elements, each of which defines a content type to be transferred during the session; each &lt;content/&gt; element in turn contains one &lt;description/&gt; child element that specifies a desired content description format and one or more &lt;transport/&gt; child elements that specify potential content transport methods.</p>
    <p class="" style="">The following example shows a Jingle session initiation request for a session that contains both audio and video content:</p>
    <p class="caption">Example 1. Initiation Example</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='jingle1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='session-initiate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content name='this-is-the-audio-content'&gt;
      &lt;description xmlns='http://jabber.org/protocol/jingle/description/audio'&gt;
        ...
      &lt;/description&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/ice'&gt;
        ...
      &lt;/transport&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/raw-udp'&gt;
        ...
      &lt;/transport&gt;
    &lt;/content&gt;
    &lt;content name='this-is-the-video-content'&gt;
      &lt;description xmlns='http://jabber.org/protocol/jingle/description/video'&gt;
        ...
      &lt;/description&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/ice'&gt;
        ...
      &lt;/transport&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/raw-udp'&gt;
        ...
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">Note: The syntax and semantics of the &lt;description/&gt; and &lt;transport/&gt; elements are out of scope for this specification, but are defined in related specifications.</p>
    <p class="" style="">The attributes of the &lt;jingle/&gt; element are as follows:</p>
    <ul>
      <li>The 'action' attribute is REQUIRED; it specifies a Jingle action as listed in this document (e.g., "session-initiate").</li>
      <li>The 'initiator' attribute is the full JID of the entity that has initiated the session flow (which may be different from the 'from' address on the IQ-set).</li>
      <li>The 'responder' attribute (see examples below) is the full JID of the entity that has replied to the initiation (which may be different from the 'to' address on the IQ-set).</li>
      <li>The 'sid' attribute is a random session identifier generated by the initiator; this SHOULD match the XML Nmtoken production  [<a href="#nt-id2259435">16</a>] so that XML character escaping is not needed for characters such as &amp;. (Note: the 'sid' attribute effectively maps to the SIP "Call-ID" parameter.)</li>
    </ul>
    <p class="" style="">The attributes of the &lt;content/&gt; element are as follows:</p>
    <ul>
      <li>The 'name' attribute is REQUIRED; it specifies a unique name or identifier for the content type (this identifier is opaque and does not have semantic meaning).</li>
      <li>The 'senders' attribute specifies which entities in the session will be generating content; the allowable values are "initiator", "recipient", or "both" (where "both" is the default).</li>
    </ul>
  </div>
  <div class="indent">
<h3>5.3 <a name="protocol-response">Target Entity Response</a>
</h3>
    <p class="" style="">Unless an error occurs, the target entity MUST acknowledge receipt of the initiation request:</p>
    <p class="caption">Example 2. Target Entity Acknowledges Receipt of Initiation Request</p>
<div class="indent"><pre>
&lt;iq type='result' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'/&gt;
    </pre></div>
    <p class="" style="">If the target entity acknowledges receipt of the initation request, both parties must consider the session to be in the PENDING state.</p>
    <p class="" style="">There are several reasons why the target entity might return an error instead of acknowledging receipt of the initiation request:</p>
    <ul>
      <li>The initiating entity is unknown to the target entity (e.g., via presence subscription).</li>
      <li>The target entity does not support Jingle.</li>
      <li>The target entity does not support any of the specified content description formats.</li>
      <li>The target entity does not support any of the specified content transport methods.</li>
      <li>The initiation request was malformed.</li>
    </ul>
    <p class="" style="">The initiating entity is unknown to the target entity (e.g., via presence subscription) and the target entity has a policy of not communicating via Jingle with unknown entities, it MUST return a &lt;service-unavailable/&gt; error.</p>
    <p class="caption">Example 3. Initiating Entity Unknown to Target Entity</p>
<div class="indent"><pre>
&lt;iq type='error' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'&gt;
  &lt;error type='cancel'&gt;
    &lt;service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">If the target entity does not support Jingle, it MUST return a &lt;service-unavailable/&gt; error.</p>
    <p class="caption">Example 4. Target Entity Does Not Support Jingle</p>
<div class="indent"><pre>
&lt;iq type='error' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'&gt;
  &lt;error type='cancel'&gt;
    &lt;service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">If the target entity does not support any of the specified content description formats, it MUST return a &lt;feature-not-implemented/&gt; error with a Jingle-specific error condition of &lt;unsupported-content/&gt;.</p>
    <p class="caption">Example 5. Target Entity Does Not Support Any Content Description Formats</p>
<div class="indent"><pre>
&lt;iq type='error' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'&gt;
  &lt;error type='cancel'&gt;
    &lt;feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unsupported-content xmlns='http://jabber.org/protocol/jingle#errors'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">If the target entity does not support any of the specified content transport methods, it MUST return a &lt;feature-not-implemented/&gt; error with a Jingle-specific error condition of &lt;unsupported-transports/&gt;.</p>
    <p class="caption">Example 6. Target Entity Does Not Support Any Transport Methods</p>
<div class="indent"><pre>
&lt;iq type='error' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'&gt;
  &lt;error type='cancel'&gt;
    &lt;feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unsupported-transports xmlns='http://jabber.org/protocol/jingle#errors'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">If the initiation request was malformed, the target entity MUST return a &lt;bad-request/&gt; error.</p>
    <p class="caption">Example 7. Initiation Request Malformed</p>
<div class="indent"><pre>
&lt;iq type='error' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='jingle1'&gt;
  &lt;error type='cancel'&gt;
    &lt;bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>5.4 <a name="protocol-redirect">Redirection</a>
</h3>
    <p class="" style="">After acknowledging receipt of the initiation request, the target entity MAY redirect the session to another address (e.g., because the principal is not answering at the original resource). This is done by sending a Jingle redirect action to the initiating entity:</p>
    <p class="caption">Example 8. Target Entity Redirects the Session</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony'
    id='jingle2'
    to='romeo@montague.net/orchard'
    type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='session-redirect'
          initiator='romeo@montague.net/orchard'
          responder='juliet@capulet.com/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;redirect&gt;xmpp:voicemail@capulet.com&lt;/redirect&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The recipient then acknowledges the redirection:</p>
    <p class="caption">Example 9. Initiating Entity Acknowledges Redirection</p>
<div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard'
    id='jingle2'
    to='juliet@capulet.com/balcony'
    type='result'/&gt;
    </pre></div>
    <p class="" style="">Both entities MUST now consider the original session to be in the ENDED state, and if the initiating entity wishes to initiate a session with the redirected address it MUST do so by sending a session initiation request to that address with a new session ID.</p>
  </div>
  <div class="indent">
<h3>5.5 <a name="protocol-decline">Decline</a>
</h3>
    <p class="" style="">In order to decline the session initiation request, the target entity MUST acknowledge receipt of the session initiation request, then terminate the session as described in the <a href="#protocol-terminate">Termination</a> section of this document.</p>
  </div>
  <div class="indent">
<h3>5.6 <a name="protocol-negotiation">Negotiation</a>
</h3>
    <p class="" style="">In general, negotiation will be necessary before the parties can agree on an acceptable set of content types, content description formats, and content transport methods. The potential combinations of parameters to be negotiated are many, and not all are shown herein (some are shown in the relevant specifications for various content description formats and content transport methods).</p>
    <p class="" style="">One session-level negotiation is to <span style="font-style: italic">remove</span> a content types. For example, let us imagine that Juliet is having a bad hair day. She certainly does not want to include video in her Jingle session with Romeo, so she sends a "content-remove" request to Romeo:</p>
    <p class="caption">Example 10. Content Type Removal</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='reduce1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='content-remove'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content name='this-is-the-video-content'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The entity receiving the session reduction request then acknowledges the request:</p>
    <p class="caption">Example 11. Acknowledgement</p>
<div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard' to='juliet@capulet.com/balcony' id='reduce1' type='result'/&gt;
    </pre></div>
    <p class="" style="">If the reduction results in no more content types for the session, the entity that receives the session-reduce SHOULD send a session-terminate action to the other party (since a session with no content types is void).</p>
    <p class="" style="">Another session-level negotiation is to <span style="font-style: italic">add</span> a content type; however, this MUST NOT be done during while the session is in the PENDING state and is allowed only while the session is in the ACTIVE state (see below).</p>
  </div>
  <div class="indent">
<h3>5.7 <a name="protocol-acceptance">Acceptance</a>
</h3>
    <p class="" style="">If (after negotiation of content transport methods and content description formats) the target entity determines that it will be able to establish a connection, it sends a definitive acceptance to the initiating entity:</p>
    <p class="caption">Example 12. Target Entity Definitively Accepts the Call</p>
<div class="indent"><pre>
&lt;iq type='set' from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='accept1'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='session-accept'
          initiator='romeo@montague.net/orchard'
          responder='juliet@capulet.com/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content name='some-opaque-name'&gt;
      &lt;description xmlns='http://jabber.org/protocol/jingle/description/audio'&gt;
        ...
      &lt;/description&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/ice'&gt;
        ...
      &lt;/transport&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/raw-udp'&gt;
        ...
      &lt;/transport&gt;
    &lt;/content&gt;
    &lt;content name='another-opaque-name'&gt;
      &lt;description xmlns='http://jabber.org/protocol/jingle/description/video'&gt;
        ...
      &lt;/description&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/ice'&gt;
        ...
      &lt;/transport&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/raw-udp'&gt;
        ...
      &lt;/transport&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The &lt;jingle/&gt; element in the accept stanza MUST contain one or more &lt;content/&gt; elements, each of which MUST contain only one &lt;description/&gt; element and one or more &lt;transport/&gt; elements. The &lt;jingle/&gt; element SHOULD possess a 'responder' attribute that explicitly specifies the full JID of the responding entity, and the initiating entity SHOULD send all future commmunications about this Jingle session to the JID provided in the 'responder' attribute.</p>
    <p class="" style="">The initiating entity then acknowledges the target entity's definitive acceptance:</p>
    <p class="caption">Example 13. Initiating Entity Acknowledges Definitive Acceptance</p>
<div class="indent"><pre>
&lt;iq type='result' to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='accept1'/&gt;
    </pre></div>
    <p class="" style="">Now the initiating entity and target entity can begin sending content over the negotiated connection.</p>
    <p class="" style="">If one of the parties cannot find a suitable content transport method, it SHOULD terminate the session as described below.</p>
  </div>
  <div class="indent">
<h3>5.8 <a name="protocol-modify">Modifying an Active Session</a>
</h3>
    <p class="" style="">In order to modify an active session, either party may send a "content-remove", "content-add", "content-modify", "description-modify", or "transport-modify" action to the other party. The receiving party then sends an appropriate "-accept" or "-decline" action, and may first send an appropriate "-info" action.</p>
    <p class="" style="">If both parties send modify messages at the same time, the modify message from the session initiator MUST trump the modify message from the recipient and the initiator SHOULD return an &lt;unexpected-request/&gt; error to the other party.</p>
    <p class="" style="">One example of modifying an active session is to <span style="font-style: italic">add</span> a content type. For example, let us imagine that Juliet gets her hair in order and now wants to add video. She now sends a "content-add" request to Romeo:</p>
    <p class="caption">Example 14. Adding a Content Type</p>
<div class="indent"><pre>
&lt;iq to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='add1' type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='content-add'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content name='video-is-back'&gt;
      &lt;description xmlns='http://jabber.org/protocol/jingle/description/video'&gt;
        ...
      &lt;/description&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/ice'&gt;
        ...
      &lt;/transport&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/raw-udp'&gt;
        ...
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The entity receiving the session extension request then acknowledges the request and, if it is acceptable, returns a content-accept:</p>
    <p class="caption">Example 15. Acknowledgement</p>
<div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard' to='juliet@capulet.com/balcony' id='add1' type='result'/&gt;
    </pre></div>
    <p class="caption">Example 16. Content Acceptance</p>
<div class="indent"><pre>
&lt;iq from='romeo@montague.net/orchard' to='juliet@capulet.com/balcony' id='add2' type='set'/&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='content-add'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content name='video-is-back'&gt;
      &lt;description xmlns='http://jabber.org/protocol/jingle/description/video'&gt;
        ...
      &lt;/description&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/ice'&gt;
        ...
      &lt;/transport&gt;
      &lt;transport xmlns='http://jabber.org/protocol/jingle/transport/raw-udp'&gt;
        ...
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The other party then acknowledges the acceptance.</p>
    <p class="caption">Example 17. Acknowledgement</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' id='add2' type='result'/&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>5.9 <a name="protocol-terminate">Termination</a>
</h3>
    <p class="" style="">In order to gracefully end the session (which MAY be done at any point after acknowledging receipt of the initiation request, including immediately thereafter in order to decline the request), either the target entity or the initiating entity MUST a send a "terminate" action to the other party:</p>
    <p class="caption">Example 18. Target Entity Terminates the Session</p>
<div class="indent"><pre>
&lt;iq from='juliet@capulet.com/balcony'
    id='term1'
    to='romeo@montague.net/orchard'
    type='set'&gt;
  &lt;jingle xmlns='http://jabber.org/protocol/jingle'
          action='session-terminate'
          initiator='romeo@montague.net/orchard'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </pre></div>
    <p class="" style="">The initiating entity MUST then acknowledge termination of the session:</p>
    <p class="caption">Example 19. Initiating Entity Acknowledges Termination</p>
<div class="indent"><pre>
&lt;iq type='result' to='juliet@capulet.com/balcony' from='romeo@montague.net/orchard' id='term1'/&gt;
    </pre></div>
    <p class="" style="">Unfortunately, not all sessions end gracefully. The following events MUST be considered session-ending events, and any further Jingle communication for the negotiated content description format and content transport method MUST be completed through negotiation of a new session:</p>
    <ul>
      <li>Receipt of a 'session-redirect' or 'session-terminate' action from the other party.</li>
      <li>Receipt of &lt;presence type='unavailable'/&gt; from the other party.</li>
    </ul>
    <p class="" style="">In particular, one party MUST consider the session to be in the ENDED state if it receives presence of type "unavailable" from the other party:</p>
    <p class="caption">Example 20. Target Entity Goes Offline</p>
<div class="indent"><pre>
&lt;presence from='juliet@capulet.com/balcony' to='romeo@montague.net/orchard' type='unavailable'/&gt;
    </pre></div>
    <p class="" style="">Naturally, in this case there is nothing for the initiating entity to acknowledge.</p>
  </div>
  <div class="indent">
<h3>5.10 <a name="protocol-info">Informational Messages</a>
</h3>
    <p class="" style="">At any point after initiation of a Jingle session, either entity MAY send an informational message to the other party, for example to change a content transport method or content description format parameter, inform the other party that a session initiation request is queued, that a device is ringing, or that a scheduled event has occurred or will occur. An information message MUST be an IQ-set containing a &lt;jingle/&gt; element whose 'action' attribute is set to a value of "session-info", "description-info", or "transport-info"; the &lt;jingle/&gt; element MUST further contain a payload child element (speciific to the session, content description format, or content transport method) that specifies the information being communicated. (A future version of this specification will define payloads related to the "session-info" action.)</p>
  </div>
<h2>6.
       <a name="errors">Error Handling</a>
</h2>
  <p class="" style="">The Jingle-specific error conditions are as follows.</p>
  <p class="caption">Table 2: Other Error Conditions</p>
<table border="1" cellpadding="3" cellspacing="0">
    <tr class="body">
      <th colspan="" rowspan="">Jingle Condition</th>
      <th colspan="" rowspan="">XMPP Condition</th>
      <th colspan="" rowspan="">Description</th>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;out-of-order/&gt;</td>
      <td align="" colspan="" rowspan="">&lt;unexpected-request/&gt;</td>
      <td align="" colspan="" rowspan="">The request cannot occur at this point in the state machine (e.g., initiate after accept).</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;unknown-session/&gt;</td>
      <td align="" colspan="" rowspan="">&lt;bad-request/&gt;</td>
      <td align="" colspan="" rowspan="">The 'sid' attribute specifies a session that is unknown to the recipient.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;unsupported-content/&gt;</td>
      <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
      <td align="" colspan="" rowspan="">The recipient does not support any of the desired content description formats.</td>
    </tr>
    <tr class="body">
      <td align="" colspan="" rowspan="">&lt;unsupported-transports/&gt;</td>
      <td align="" colspan="" rowspan="">&lt;not-acceptable/&gt;</td>
      <td align="" colspan="" rowspan="">The recipient does not support any of the desired content transport methods.</td>
    </tr>
  </table>
<h2>7.
       <a name="impl">Implementation Notes</a>
</h2>
  <p class="" style="">There is a one-to-one relationship between content types and sessions. This reduces the complexity of managing a given session, since it avoids the need to de-multiplex traffic for different content types sent over the same connection. However, it may be desirable to share different kinds of content at the same time (e.g., during a video chat one party may want to share a file); in order to do this, the parties must establish a separate session for each content type. Management of multiple sessions is a client implementation matter and is not discussed in this specification.</p>
<h2>8.
       <a name="security">Security Considerations</a>
</h2>
  <p class="" style=""><span style="font-style: italic">Note: This section is not yet complete.</span></p>
  <div class="indent">
<h3>8.1 <a name="security-dos">Denial of Service</a>
</h3>
    <p class="" style="">Jingle sessions may be resource-intensive. Therefore, it is possible to launch a denial-of-service attack against an entity by burdening it with too many Jingle sessions. Care must be taken to accept content sessions only from known entities and only if the entity's device is able to process such sessions.</p>
  </div>
  <div class="indent">
<h3>8.2 <a name="security-gateways">Communication Through Gateways</a>
</h3>
    <p class="" style="">Jingle communications may be enabled through gateways to non-XMPP networks, whose security characteristics may be quite different from those of XMPP networks. (For example, on some SIP networks authentication is optional and "from" addresses can be easily forged.) Care must be taken in communicating through such gateways.</p>
  </div>
<h2>9.
       <a name="iana">IANA Considerations</a>
</h2>
  <p class="" style="">This document requires no interaction with the <span class="ref" style="">Internet Assigned Numbers Authority (IANA)</span>  [<a href="#nt-id2260492">17</a>].</p>
<h2>10.
       <a name="registrar">XMPP Registrar Considerations</a>
</h2>
  <div class="indent">
<h3>10.1 <a name="registrar-ns">Protocol Namespaces</a>
</h3>
    <p class="" style="">The <span class="ref" style="">XMPP Registrar</span>  [<a href="#nt-id2260538">18</a>] shall include 'http://jabber.org/protocol/jingle' and 'http://jabber.org/protocol/jingle#errors' in its registry of protocol namespaces.</p>
  </div>
  <div class="indent">
<h3>10.2 <a name="registrar-content">Jingle Content Description Formats Registry</a>
</h3>
    <p class="" style="">The XMPP Registrar shall maintain a registry of Jingle content description formats. All content description format registrations shall be defined in separate specifications (not in this document). Content description formats defined within the XEP series MUST be registered with the XMPP Registrar, resulting in protocol URIs of the form "http://jabber.org/protocol/jingle/description/name" (where "name" is the registered name of the content description format).</p>
    <p class="" style="">In order to submit new values to this registry, the registrant must define an XML fragment of the following form and either include it in the relevant XMPP Extension Protocol or send it to the email address &lt;registrar@jabber.org&gt;:</p>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;content&gt;
  &lt;name&gt;the name of the content description format (e.g., "audio")&lt;/name&gt;
  &lt;desc&gt;a natural-language summary of the content description format&lt;/desc&gt;
  &lt;doc&gt;the document in which this content description format is specified&lt;/doc&gt;
&lt;/content&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>10.3 <a name="registrar-transports">Jingle Content Transport Methods Registry</a>
</h3>
    <p class="" style="">The XMPP Registrar shall maintain a registry of Jingle content transport methods. All content transport method registrations shall be defined in separate specifications (not in this document). Content transport methods defined within the XEP series MUST be registered with the XMPP Registrar, resulting in protocol URIs of the form "http://jabber.org/protocol/jingle/transport/name" (where "name" is the registered name of the content transport method).</p>
    <p class="" style="">In order to submit new values to this registry, the registrant must define an XML fragment of the following form and either include it in the relevant XMPP Extension Protocol or send it to the email address &lt;registrar@jabber.org&gt;:</p>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;transport&gt;
  &lt;name&gt;the name of the content transport method (e.g., "raw-udp")&lt;/name&gt;
  &lt;desc&gt;a natural-language summary of the content transport method&lt;/desc&gt;
  &lt;doc&gt;the document in which this content transport method is specified&lt;/doc&gt;
&lt;/transport&gt;
    </pre></div>
  </div>
<h2>11.
       <a name="schema">XML Schemas</a>
</h2>
  <div class="indent">
<h3>11.1 <a name="schema-jingle">Jingle</a>
</h3>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/jingle'
    xmlns='http://jabber.org/protocol/jingle'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='jingle'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence minOccurs='1' maxOccurs='unlimited'&gt;
        &lt;xs:element ref='content'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name='action' use='required'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base='xs:NCName'&gt;
            &lt;xs:enumeration value='content-accept'/&gt;
            &lt;xs:enumeration value='content-add'/&gt;
            &lt;xs:enumeration value='content-decline'/&gt;
            &lt;xs:enumeration value='content-modify'/&gt;
            &lt;xs:enumeration value='content-remove'/&gt;
            &lt;xs:enumeration value='description-accept'/&gt;
            &lt;xs:enumeration value='description-decline'/&gt;
            &lt;xs:enumeration value='description-info'/&gt;
            &lt;xs:enumeration value='description-modify'/&gt;
            &lt;xs:enumeration value='session-accept'/&gt;
            &lt;xs:enumeration value='session-info'/&gt;
            &lt;xs:enumeration value='session-initiate'/&gt;
            &lt;xs:enumeration value='session-redirect'/&gt;
            &lt;xs:enumeration value='session-terminate'/&gt;
            &lt;xs:enumeration value='transport-accept'/&gt;
            &lt;xs:enumeration value='transport-decline'/&gt;
            &lt;xs:enumeration value='transport-info'/&gt;
            &lt;xs:enumeration value='transport-modify'/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
      &lt;xs:attribute name='initiator' type='xs:string' use='required'/&gt;
      &lt;xs:attribute name='responder' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='sid' type='xs:NMTOKEN' use='required'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:element name='content'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:choice minOccurs='0'&gt;
        &lt;xs:sequence&gt;
          &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='unbounded'/&gt;
        &lt;/xs:sequence&gt;
      &lt;/xs:choice&gt;
      &lt;xs:attribute name='senders' use='optional' default='both'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base='xs:NCName'&gt;
            &lt;xs:enumeration value='both'&gt;
            &lt;xs:enumeration value='initiator'&gt;
            &lt;xs:enumeration value='responder'/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>11.2 <a name="schema-errors">Jingle Errors</a>
</h3>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://jabber.org/protocol/jingle#errors'
    xmlns='http://jabber.org/protocol/jingle#errors'
    elementFormDefault='qualified'&gt;

  &lt;xs:element name='out-of-order' type='empty'/&gt;
  &lt;xs:element name='unknown-session' type='empty'/&gt;
  &lt;xs:element name='unsupported-content' type='empty'/&gt;
  &lt;xs:element name='unsupported-transports' type='empty'/&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
<h2>12.
       <a name="ack">Acknowledgements</a>
</h2>
  <p class="" style="">The authors would like to thank Rohan Mahy for his valuable input on early versions of this document. Rob Taylor, Dafydd Harries, Jussi Laako, Saku Vainio, Antti Ijäs, Brian West, Anthony Minessale, Matt O'Gorman, and others have also provided helpful input. Thanks also to those who have commented on the <span class="ref" style="">Standards JIG</span>  [<a href="#nt-id2260728">19</a>] and (earlier) Jingle  [<a href="#nt-id2260715">20</a>] mailing lists.</p>
<p><hr></p>
<a name="notes"></a><h2>Notes</h2>
<div class="indent">
<p><a name="nt-id2257853">1</a>. XEP-0111: A Transport for Initiating and Negotiating Sessions &lt;<a href="http://www.xmpp.org/extensions/xep-0111.html">http://www.xmpp.org/extensions/xep-0111.html</a>&gt;.</p>
<p><a name="nt-id2257839">2</a>. It is true that TINS made it relatively easy to implement an XMPP-to-SIP gateway; however, in line with the long-time Jabber philosophy of "simple clients, complex servers", it would be better to force complexity onto the server-side gateway and to keep the client as simple as possible.</p>
<p><a name="nt-id2257906">3</a>. For example, one large ISP recently decided to switch to a pure XMPP approach after having implemented and deployed a dual-stack client for several years.</p>
<p><a name="nt-id2257929">4</a>. Google Talk is a messaging and voice chat service and client provided by Google; see &lt;<a href="http://www.google.com/talk/">http://www.google.com/talk/</a>&gt;.</p>
<p><a name="nt-id2257976">5</a>. Possible other content description formats include file sharing, application casting, application sharing, whiteboarding, torrent broadcasting, shared real-time editing, and distributed musical performance, to name but a few.</p>
<p><a name="nt-id2258044">6</a>. RFC 4566: SDP: Session Description Protocol &lt;<a href="http://www.ietf.org/rfc/rfc4566.txt">http://www.ietf.org/rfc/rfc4566.txt</a>&gt;.</p>
<p><a name="nt-id2258068">7</a>. XEP-0167: Jingle Audio Content Description Format &lt;<a href="http://www.xmpp.org/extensions/xep-0167.html">http://www.xmpp.org/extensions/xep-0167.html</a>&gt;.</p>
<p><a name="nt-id2258111">8</a>. RFC 3261: Session Initiation Protocol (SIP) &lt;<a href="http://www.ietf.org/rfc/rfc3261.txt">http://www.ietf.org/rfc/rfc3261.txt</a>&gt;.</p>
<p><a name="nt-id2258133">9</a>. ITU Recommendation H.323: Packet-based Multimedia Communications Systems (September 1999).</p>
<p><a name="nt-id2258645">10</a>. XEP-0176: Jingle RTP-ICE Transport Method &lt;<a href="http://www.xmpp.org/extensions/xep-0176.html">http://www.xmpp.org/extensions/xep-0176.html</a>&gt;.</p>
<p><a name="nt-id2250552">11</a>. XEP-0177: Jingle Raw UDP Transport Method &lt;<a href="http://www.xmpp.org/extensions/xep-0177.html">http://www.xmpp.org/extensions/xep-0177.html</a>&gt;.</p>
<p><a name="nt-id2258965">12</a>. While it is possible to send raw Session Description Protocol (SDP) data for the session descriptions (the approach that was taken in <span style="font-weight: bold">XEP-0111</span>), this is not necessarily helpful, since SDP is not structured data, not all SDP data is needed or used in the most common use cases, and SDP has been heavily extended in several useful directions that are not captured in the core SDP specification.</p>
<p><a name="nt-id2259238">13</a>. XEP-0030: Service Discovery &lt;<a href="http://www.xmpp.org/extensions/xep-0030.html">http://www.xmpp.org/extensions/xep-0030.html</a>&gt;.</p>
<p><a name="nt-id2259262">14</a>. XEP-0115: Entity Capabilities &lt;<a href="http://www.xmpp.org/extensions/xep-0115.html">http://www.xmpp.org/extensions/xep-0115.html</a>&gt;.</p>
<p><a name="nt-id2259324">15</a>. XEP-0168: Resource Application Priority &lt;<a href="http://www.xmpp.org/extensions/xep-0168.html">http://www.xmpp.org/extensions/xep-0168.html</a>&gt;.</p>
<p><a name="nt-id2259435">16</a>. See &lt;<a href="http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken">http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken</a>&gt;</p>
<p><a name="nt-id2260492">17</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
<p><a name="nt-id2260538">18</a>. The XMPP Registrar maintains a list of reserved protocol namespaces as well as registries of parameters used in the context of XMPP extension protocols approved by the Jabber Software Foundation. For further information, see &lt;<a href="http://www.xmpp.org/registrar/">http://www.xmpp.org/registrar/</a>&gt;.</p>
<p><a name="nt-id2260728">19</a>. The Standards JIG is a standing Jabber Interest Group devoted to development of XMPP Extension Protocols. The discussion list of the Standards JIG is the primary venue for discussion of Jabber/XMPP protocols, as well as for announcements by the XMPP Extensions Editor and XMPP Registrar. To subscribe to the list or view the list archives, visit &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig/">http://mail.jabber.org/mailman/listinfo/standards-jig/</a>&gt;.</p>
<p><a name="nt-id2260715">20</a>. Before this specification was accepted as a XMPP Extension Protocol specification, it was discussed on the semi-private &lt;jingle@jabber.org&gt; mailing list; although that list is no longer used (the Standards-JIG list is the preferred discussion venue), for historical purposes it is publicly archived at &lt;<a href="http://mail.jabber.org/pipermail/jingle/">http://mail.jabber.org/pipermail/jingle/</a>&gt;.</p>
</div>
<p><hr></p>
<a name="revs"></a><h2>Revision History</h2>
<div class="indent">
<h4>Version 0.10 (2006-09-29)</h4>
<div class="indent">
<p class="" style="">Made several corrections to the state machines and examples.</p> (ram/psa)
    </div>
<h4>Version 0.9 (2006-09-08)</h4>
<div class="indent">
<p class="" style="">Further cleaned up state machines and state-related actions.</p> (ram/psa)
    </div>
<h4>Version 0.8 (2006-08-23)</h4>
<div class="indent">
<p class="" style="">Changed channels to components in line with ICE; changed various action names for consistency; added session-extend and session-reduce actions to add and remove description/transport pairs; added description-modify action; added sender attribute to specify directionality.</p> (ram/psa)
    </div>
<h4>Version 0.7 (2006-07-17)</h4>
<div class="indent">
<p class="" style="">Added implementation note about handling multiple content types.</p> (psa)
    </div>
<h4>Version 0.6 (2006-07-12)</h4>
<div class="indent">
<p class="" style="">Changed media type to content type.</p> (se/psa)
    </div>
<h4>Version 0.5 (2006-03-20)</h4>
<div class="indent">
<p class="" style="">Further clarified state machine diagrams; specified that session accept must include agreed-upon media format and transport description; moved deployment notes to appropriate transport spec.</p> (psa/jb)
    </div>
<h4>Version 0.4 (2006-03-01)</h4>
<div class="indent">
<p class="" style="">Added glossary; clarified state machines; updated to reflect publication of XEP-0176 and XEP-0177.</p> (psa/jb)
    </div>
<h4>Version 0.3 (2006-02-24)</h4>
<div class="indent">
<p class="" style="">Provided more detail about modify scenarios; defined media-specific and transport-specific actions and adjusted state machine accordingly.</p> (psa/jb)
    </div>
<h4>Version 0.2 (2006-02-13)</h4>
<div class="indent">
<p class="" style="">Per agreement among the co-authors, moved transport definition to separate specification, simplified state machine, and made other associated changes to the text, examples, and schemas; also harmonized redirect, decline, and terminate processes.</p> (psa/jb)
    </div>
<h4>Version 0.1 (2005-12-15)</h4>
<div class="indent">
<p class="" style="">Initial version.</p> (psa)
    </div>
<h4>Version 0.0.10 (2005-12-11)</h4>
<div class="indent">
<p class="" style="">More fully documented burst mode, connectivity checks, error cases, etc.</p> (psa)
    </div>
<h4>Version 0.0.9 (2005-12-08)</h4>
<div class="indent">
<p class="" style="">Restructured document flow; provided example of burst mode.</p> (psa)
    </div>
<h4>Version 0.0.8 (2005-12-05)</h4>
<div class="indent">
<p class="" style="">Distinguished between dribble mode and burst mode, including mode attribute, service discovery features, and implementation notes; provided detailed resource discovery examples; corrected state chart; specified session termination; specified error conditions; specified semantics of informational messages; began to define security considerations; added Joe Beda as co-author.</p> (psa/sl/jb)
    </div>
<h4>Version 0.0.7 (2005-11-08)</h4>
<div class="indent">
<p class="" style="">Added more detail to basic session flow; harmonized candidate negotiation process with ICE.</p> (psa)
    </div>
<h4>Version 0.0.6 (2005-10-27)</h4>
<div class="indent">
<p class="" style="">Added XMPP Registrar considerations; defined schema; completed slight syntax cleanup.</p> (psa)
    </div>
<h4>Version 0.0.5 (2005-10-21)</h4>
<div class="indent">
<p class="" style="">Separated  methoddescription formats from signalling protocol.</p> (psa/sl)
    </div>
<h4>Version 0.0.4 (2005-10-19)</h4>
<div class="indent">
<p class="" style="">Harmonized basic session flow with Google Talk protocol; added Scott Ludwig as co-author.</p> (psa/sl)
    </div>
<h4>Version 0.0.3 (2005-10-10)</h4>
<div class="indent">
<p class="" style="">Added more detail to basic session flow.</p> (psa)
    </div>
<h4>Version 0.0.2 (2005-10-07)</h4>
<div class="indent">
<p class="" style="">Protocol cleanup.</p> (psa/jjh)
    </div>
<h4>Version 0.0.1 (2005-10-06)</h4>
<div class="indent">
<p class="" style="">First draft.</p> (psa/jjh)
    </div>
</div>
<p><hr></p>
<p>END</p>
</body>
</html>
