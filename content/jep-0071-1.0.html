<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JEP-0071: XHTML-IM</title>
<link rel="stylesheet" type="text/css" href="jep.css">
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
<meta name="DC.Title" content="XHTML-IM">
<meta name="DC.Creator" content="Peter Saint-Andre">
<meta name="DC.Description" content="This JEP defines an XHTML 1.0 Integration Set for use in exchanging instant messages that contain lightweight text markup.">
<meta name="DC.Publisher" content="Jabber Software Foundation">
<meta name="DC.Contributor" content="JEP Editor">
<meta name="DC.Date" content="2004-09-29">
<meta name="DC.Type" content="Jabber Enhancement Proposal">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="JEP-0071">
<meta name="DC.Language" content="en">
<meta name="DC.Rights" content="This Jabber Enhancement Proposal is copyright 1999 - 2005 by the Jabber Software Foundation (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;http://www.jabber.org/jsf/ipr-policy.shtml&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;http://creativecommons.org/licenses/by/2.5/&gt;).">
</head>
<body>
<h1>JEP-0071: XHTML-IM</h1>
<p>This JEP defines an XHTML 1.0 Integration Set for use in exchanging instant messages that contain lightweight text markup.</p>
<p><hr></p>
<p style="color:green">NOTICE: The protocol defined herein is a Draft Standard of the Jabber Software Foundation. Implementations are encouraged and the protocol is appropriate for deployment in production systems, but some changes to the protocol are possible before it becomes a Final Standard.</p>
<p><hr></p>
<h2>JEP Information</h2>
<p class="indent">
            Status: Draft<br>
            Type: Standards Track<br>
            Number: 0071<br>
            Version: 1.0<br>
            Last Updated: 2004-09-29<br>
            JIG: Standards JIG<br>
                Approving Body: Jabber Council<br>Dependencies: XMPP Core, XMPP IM, XHTML 1.0, Modularization of XHTML, JEP-0030<br>
                Supersedes: None<br>
                Superseded By: None<br>
            Short Name: xhtml-im<br>
        Schema for wrapper namespace: &lt;<a href="http://jabber.org/protocol/xhtml-im/xhtml-im-wrapper.xsd">http://jabber.org/protocol/xhtml-im/xhtml-im-wrapper.xsd</a>&gt;<br>
        Schema for schema driver: &lt;<a href="http://jabber.org/protocol/xhtml-im/xhtml-im-driver.xsd">http://jabber.org/protocol/xhtml-im/xhtml-im-driver.xsd</a>&gt;<br>
        Schema for content model: &lt;<a href="http://jabber.org/protocol/xhtml-im/xhtml-im-model.xsd">http://jabber.org/protocol/xhtml-im/xhtml-im-model.xsd</a>&gt;<br>
            Wiki Page: &lt;<a href="http://wiki.jabber.org/index.php/XHTML-IM%20(JEP-0071)">http://wiki.jabber.org/index.php/XHTML-IM (JEP-0071)</a>&gt;
          </p>
<h2>Author Information</h2>
<div class="indent">
<h3>Peter Saint-Andre</h3>
<p class="indent">
        Email: stpeter@jabber.org<br>
        JID: stpeter@jabber.org</p>
</div>
<h2>Legal Notice</h2>
<p class="indent">This Jabber Enhancement Proposal is copyright 1999 - 2005 by the <a href="http://www.jabber.org/jsf/">Jabber Software Foundation</a> (JSF) and is in full conformance with the JSF's Intellectual Property Rights Policy &lt;<a href="http://www.jabber.org/jsf/ipr-policy.shtml">http://www.jabber.org/jsf/ipr-policy.shtml</a>&gt;. This material may be distributed only subject to the terms and conditions set forth in the Creative Commons Attribution License (&lt;<a href="http://creativecommons.org/licenses/by/2.5/">http://creativecommons.org/licenses/by/2.5/</a>&gt;).</p>
<h2>Discussion Venue</h2>
<p class="indent">The preferred venue for discussion of this document is the Standards-JIG discussion list: &lt;<a href="http://mail.jabber.org/mailman/listinfo/standards-jig">http://mail.jabber.org/mailman/listinfo/standards-jig</a>&gt;.</p>
<h2>Relation to XMPP</h2>
<p class="indent">The Extensible Messaging and Presence Protocol (XMPP) is defined in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by the Jabber Software Foundation to the Internet Standards Process, which is managed by the Internet Engineering Task Force in accordance with RFC 2026. Any protocol defined in this JEP has been developed outside the Internet Standards Process and is to be understood as an extension to XMPP rather than as an evolution, development, or modification of XMPP itself.</p>
<h2>Conformance Terms</h2>
<p class="indent">The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119.</p>
<p><hr></p>
<h2>Table of Contents</h2>
<div class="indent"><dl>
<dt>1.  <a href="#intro">Introduction</a>
</dt>
<dt>2.  <a href="#tech">Choice of Technology</a>
</dt>
<dt>3.  <a href="#reqs">Requirements</a>
</dt>
<dt>4.  <a href="#concepts">Concepts and Approach</a>
</dt>
<dt>5.  <a href="#wrapper">Wrapper Element</a>
</dt>
<dt>6.  <a href="#def">XHTML-IM Integration Set</a>
</dt>
<dl>
<dt>6.1.  <a href="#def-structure">Structure Module Definition</a>
</dt>
<dt>6.2.  <a href="#def-text">Text Module Definition</a>
</dt>
<dt>6.3.  <a href="#def-hypertext">Hypertext Module Definition</a>
</dt>
<dt>6.4.  <a href="#def-list">List Module Definition</a>
</dt>
<dt>6.5.  <a href="#def-image">Image Module Definition</a>
</dt>
<dt>6.6.  <a href="#def-style">Style Attribute Module Definition</a>
</dt>
</dl>
<dt>7.  <a href="#profile">Recommended Profile</a>
</dt>
<dl>
<dt>7.1.  <a href="#profile-structure">Structure Module Profile</a>
</dt>
<dt>7.2.  <a href="#profile-text">Text Module Profile</a>
</dt>
<dt>7.3.  <a href="#profile-hypertext">Hypertext Module Profile</a>
</dt>
<dt>7.4.  <a href="#profile-list">List Module Profile</a>
</dt>
<dt>7.5.  <a href="#profile-image">Image Module Profile</a>
</dt>
<dt>7.6.  <a href="#profile-style">Style Attribute Module Profile</a>
</dt>
<dl><dt>7.6.1.  <a href="#profile-style-properties">Recommended Style Properties</a>
</dt></dl>
<dt>7.7.  <a href="#profile-attributes">Recommended Attributes</a>
</dt>
<dl>
<dt>7.7.1.  <a href="#profile-attributes-common">Common Attributes</a>
</dt>
<dt>7.7.2.  <a href="#profile-attributes-special">Specialized Attributes</a>
</dt>
<dt>7.7.3.  <a href="#profile-attributes-other">Other Attributes</a>
</dt>
</dl>
<dt>7.8.  <a href="#profile-summary">Summary of Recommendations</a>
</dt>
</dl>
<dt>8.  <a href="#bizrules">Business Rules</a>
</dt>
<dt>9.  <a href="#examples">Examples</a>
</dt>
<dt>10.  <a href="#discovery">Discovering Support for XHTML-IM</a>
</dt>
<dl>
<dt>10.1.  <a href="#discovery-explicit">Explicit Discovery</a>
</dt>
<dt>10.2.  <a href="#discovery-implicit">Implicit Discovery</a>
</dt>
</dl>
<dt>11.  <a href="#security">Security Considerations</a>
</dt>
<dt>12.  <a href="#w3c">W3C Considerations</a>
</dt>
<dl>
<dt>12.1.  <a href="#w3c-doctype">Document Type Name</a>
</dt>
<dt>12.2.  <a href="#w3c-conformance">User Agent Conformance</a>
</dt>
<dt>12.3.  <a href="#w3c-modularization">XHTML Modularization</a>
</dt>
<dt>12.4.  <a href="#w3c-review">W3C Review</a>
</dt>
<dt>12.5.  <a href="#w3c-versions">XHTML Versioning</a>
</dt>
</dl>
<dt>13.  <a href="#iana">IANA Considerations</a>
</dt>
<dt>14.  <a href="#registrar">Jabber Registrar Considerations</a>
</dt>
<dl><dt>14.1.  <a href="#registrar-ns">Protocol Namespaces</a>
</dt></dl>
<dt>15.  <a href="#schemas">XML Schemas</a>
</dt>
<dl>
<dt>15.1.  <a href="#schemas-wrapper">XHTML-IM Wrapper</a>
</dt>
<dt>15.2.  <a href="#schemas-driver">XHTML-IM Schema Driver</a>
</dt>
<dt>15.3.  <a href="#schemas-model">XHTML-IM Content Model</a>
</dt>
</dl>
<dt>16.  <a href="#ack">Acknowledgements</a>
</dt>
<dt><a href="#notes">Notes</a></dt>
<dt><a href="#revs">Revision History</a></dt>
</dl></div>
<p><hr></p>
<h2>1.
       <a name="intro">Introduction</a>
</h2>
  <p class="" style="">This JEP defines methods for exchanging instant messages that contain lightweight text markup. In the context of this JEP, "lightweight text markup" is to be understood as a combination of minimal structural elements and presentational styles that can easily be rendered on a wide variety of devices without requiring a full rich-text rendering engine such as a web browser. Examples of lightweight text markup include basic text blocks (e.g., paragraphs), lists, hyperlinks, image references, and font styles (e.g., sizes and colors).</p>
<h2>2.
       <a name="tech">Choice of Technology</a>
</h2>
  <p class="" style="">In the past, there have existed several incompatible methods within the Jabber community for exchanging instant messages that contain lightweight text markup. The most notable such methods have included derivatives of <span class="ref" style="">XHTML 1.0</span>  [<a href="#nt-id2256237">1</a>] as well as of <span class="ref" style="">Rich Text Format (RTF)</span>  [<a href="#nt-id2256258">2</a>].</p>
  <p class="" style="">Although it is sometimes easier for client developers to implement RTF support (this is especially true on certain Microsoft Windows operating systems), there are several reasons (consistent with the <span class="ref" style="">Protocol Design Guidelines</span>  [<a href="#nt-id2256288">3</a>]) for the <span class="ref" style="">Jabber Software Foundation (JSF)</span>  [<a href="#nt-id2256310">4</a>] to avoid the use of RTF in developing a protocol for lightweight text markup. Specifically:</p>
  <ol start="1" type="1">
    <li>RTF is not a structured vocabulary derived from SGML (as is <span class="ref" style="">HTML 4.0</span>  [<a href="#nt-id2256344">5</a>]) or, more relevantly, from XML (as is XHTML 1.0).</li>
    <li>RTF is under the control of the Microsoft Corporation and thus is not an open standard maintained by a recognized standards development organization; therefore the JSF is unable to contribute to or influence its development if necessary, and any protocol the JSF developed using RTF would introduce unwanted dependencies.</li>
  </ol>
  <p class="" style="">Conversely, there are several reasons to prefer XHTML for lightweight text markup:</p>
  <ol start="1" type="1">
    <li>XHTML is a structured format that is defined as an application of <span class="ref" style="">XML 1.0</span>  [<a href="#nt-id2256391">6</a>], making it especially appropriate for sending over Jabber/XMPP, which is at root a technology for streaming XML (see <span class="ref" style="">XMPP Core</span>  [<a href="#nt-id2256414">7</a>]).</li>
    <li>XHTML is an open standard developed by the <span class="ref" style="">World Wide Web Consortium (W3C)</span>  [<a href="#nt-id2256441">8</a>], a recognized standards development organization.</li>
  </ol>
  <p class="" style="">Therefore, this JEP defines support for lightweight text markup in the form of an XMPP extension that encapsulates content defined by an XHTML 1.0 Integration Set that we label "XHTML-IM". The remainder of this JEP discusses lightweight text markup in terms of XHTML 1.0 only and does not further consider RTF or other technologies.</p>
<h2>3.
       <a name="reqs">Requirements</a>
</h2>
  <p class="" style="">HTML was originally designed for authoring and presenting stuctured documents on the World Wide Web, and was subsequently extended to handle more advanced functionality such as image maps and interactive forms. However, the requirements for publishing documents (or developing transactional websites) for presentation by dedicated XHTML clients on traditional computers or small-screen devices are fundamentally different from the requirements for lightweight text markup of instant messages; for this reason, only a reduced set of XHTML features is needed for XHTML-IM. In particular:</p>
  <ol start="1" type="1">
    <li><p class="" style="">IM clients are not XHTML clients: their primary purpose is not to read pre-existing XHTML documents, but to read <span style="font-style: italic">and generate</span> relatively large numbers of fairly small instant messages.</p></li>
    <li><p class="" style="">The underlying context for XHTML content in Jabber/XMPP instant messaging is provided not by a full XHTML document, but by an XML stream, and specifically by a message stanza within that stream. Thus the &lt;head/&gt; element and all its children are unnecessary. Only the &lt;body/&gt; element and some of its children are appropriate for use in instant messaging.</p></li>
    <li><p class="" style="">The XHTML content that is read by one's IM client is normally generated on the fly by one's conversation partner (or, to be precise, by his or her IM client). Thus there is an inherent limit to the sophistication of the XHTML markup involved. Even in normal XHTML documents, fairly basic structural and rendering elements such as definition lists, abbreviations, addresses, and computer input handling (e.g., &lt;kbd/&gt; and &lt;var/&gt;) are relatively rare. There is little or no foreseeable need for such elements within the context of instant messaging.</p></li>
    <li><p class="" style="">The foregoing is doubly true of more advanced markup such as tables, frames, and forms (however, there exists an XMPP extension that provides an instant messaging equivalent of the latter, as defined in <span class="ref" style="">Data Forms</span>  [<a href="#nt-id2256572">9</a>]).</p></li>
    <li><p class="" style="">Although ad-hoc styles are useful for messaging (by means of the 'style' attribute), full support for <span class="ref" style="">Cascading Style Sheets</span>  [<a href="#nt-id2256602">10</a>] (defined by the &lt;style/&gt; element or a standalone .css file, and implemented via the 'class' attribute) would be overkill since many CSS1 properties (e.g., box, classification, and text properties) were developed especially for sophisticated page layout.</p></li>
    <li><p class="" style="">Background images, audio, animated text, layers, applets, scripts, and other multimedia content types are unnecessary, especially given the existence of XMPP extensions such as <span class="ref" style="">File Transfer</span>  [<a href="#nt-id2256645">11</a>].</p></li>
    <li><p class="" style="">Content transformations such as those defined by <span class="ref" style="">XSL Transformations</span>  [<a href="#nt-id2256675">12</a>] must not be necessary in order for an instant messaging application to present lightweight text markup to an end user.</p></li>
  </ol>
  <p class="" style="">As explained below, some of these requirements are addressed by the definition of the XHTML-IM Integration Set itself, while others are addressed by a recommended "profile" for that Integration Set in the context of instant messaging applications.</p>
<h2>4.
       <a name="concepts">Concepts and Approach</a>
</h2>
  <p class="" style="">This document defines an adaptation of XHTML 1.0 (specifically, an XHTML 1.0 Integration Set) that makes it possible to provide lightweight text markup of instant messages (mainly for Jabber/XMPP instant messages, although the Integration Set defined herein could be used by other protocols). This pattern is familiar from email, wherein the HTML-formatted version of the message supplements but does not supersede the text-only version of the message.  [<a href="#nt-id2256715">13</a>]</p>
  <p class="" style="">In Jabber/XMPP communications, the meaning (as opposed to markup) of the message MUST always be represented as best as possible in the normal &lt;body/&gt; child element or elements of the &lt;message/&gt; stanza qualified by the 'jabber:client' (or 'jabber:server') namespace. Lightweight text markup is then provided within an &lt;html/&gt; element qualified by the 'http://jabber.org/protocol/xhtml-im' namespace.  [<a href="#nt-id2256728">14</a>] However, this &lt;html/&gt; element is used solely as a "wrapper" for the XHTML content itself, which content is encapsulated via one or more &lt;body/&gt; elements qualified by the 'http://www.w3.org/1999/xhtml' namespace, along with appropriate child elements thereof.</p>
  <p class="" style="">The following example illustrates this approach.</p>
  <p class="caption">Example 1. A simple example</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;hi!&lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p style='font-weight:bold'&gt;hi!&lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">Technically speaking, there are three aspects to the approach taken herein:</p>
  <ol start="1" type="1">
    <li>Definition of the &lt;html/&gt; "wrapper" element, which functions as an XMPP extension within XMPP &lt;message/&gt; stanzas.</li>
    <li>Definition of the XHTML-IM Integration Set itself in terms of supported XHTML 1.0 modules, using the concepts defined in <span class="ref" style="">Modularization of XHTML</span>  [<a href="#nt-id2256822">15</a>].</li>
    <li>A recommended "profile" regarding the specific XHTML 1.0 elements and attributes to be supported from each XHTML 1.0 module.</li>
  </ol>
  <p class="" style="">These three aspects are defined in the three document sections that follow.</p>
<h2>5.
       <a name="wrapper">Wrapper Element</a>
</h2>
  <p class="" style="">The root element for including XHTML content within XMPP stanzas is &lt;html/&gt;. This element is qualified by the 'http://jabber.org/protocol/xhtml-im' namespace. From the perspective of XMPP, it functions as an XMPP extension element; from the perspective of XHTML, it functions as a wrapper for XHTML 1.0 content qualified by the 'http://www.w3.org/1999/xhtml' namespace. Such XHTML content MUST be contained in one or more &lt;body/&gt; elements qualified by the 'http://www.w3.org/1999/xhtml' namespace and MUST conform to the XHTML-IM Integration Set defined in the following section. If more than one &lt;body/&gt; element is included in the &lt;html/&gt; wrapper element, each &lt;body/&gt; element MUST possess an 'xml:lang' attribute with a distinct value, where the value of that attribute MUST adhere to the rules defined in <span class="ref" style="">RFC 3066</span>  [<a href="#nt-id2256889">16</a>]. A formal definition of the &lt;html/&gt; element is provided in the <a href="#schemas-wrapper">XHTML-IM Wrapper Schema</a>.</p>
  <p class="" style="">Note: The XHTML &lt;body/&gt; element is not to be confused with the XMPP &lt;body/&gt; element, which is a child of a &lt;message/&gt; stanza and is qualified by the 'jabber:client' or 'jabber:server' namespace as described in <span class="ref" style="">XMPP IM</span>  [<a href="#nt-id2256935">17</a>]. The &lt;html/&gt; wrapper element is intended for inclusion only as a direct child element of the XMPP &lt;message/&gt; stanza and only in order to specify a marked-up version of the message &lt;body/&gt; element or elements, but MAY be included elsewhere in accordance with the "extended namespace" rules defined in the <span style="font-weight: bold">XMPP IM</span> specification.</p>
  <p class="" style="">Until and unless (1) additional integration sets are defined and (2) mechanisms are specified for discovering or negotiating which integration sets are supported, the XHTML markup contained within the &lt;html/&gt; wrapper element MUST NOT include elements and attributes that are not part of the XHTML-IM Integration Set defined in the following section, and any such elements and attributes MUST be ignored if received (where the meaning of "ignore" is defined by the conformance requirements of <span style="font-weight: bold">Modularization of XHTML</span>, as summarized in the <a href="#w3c-conformance">User Agent Conformance</a> section of this document).</p>
<h2>6.
       <a name="def">XHTML-IM Integration Set</a>
</h2>
  <p class="" style="">This section defines an XHTML 1.0 Integration Set for use in the context of instant messaging. Given its intended usage, we label it "XHTML-IM".</p>
  <p class="" style=""><span style="font-weight: bold">Modularization of XHTML</span> provides the ability to formally define subsets of XHTML 1.0 via the concept of "modularization" (which may be familiar from <span class="ref" style="">XHTML Basic</span>  [<a href="#nt-id2257038">18</a>]). Many of the defined modules are not necessary or useful in the context of instant messaging, and in the context of Jabber/XMPP instant messaging specifically some modules have been superseded by well-defined XMPP extensions. This JEP specifies that XHTML-IM shall be based on the following XHTML 1.0 modules:</p>
  <ul>
    <li>Core Modules
      <ul>
        <li>Structure Module</li>
        <li>Text Module</li>
        <li>Hypertext Module</li>
        <li>List Module</li>
      </ul>
    </li>
    <li>Image Module</li>
    <li>Style Attribute Module</li>
  </ul>
  <p class="" style=""><span style="font-weight: bold">Modularization of XHTML</span> defines many additional modules, such as Table Modules, Form Modules, Object Modules, and Frame Modules. None of these modules is part of the XHTML-IM Integration Set. If support for such modules is desired, it MUST be defined in a separate and distinct integration set.</p>
  <div class="indent">
<h3>6.1 <a name="def-structure">Structure Module Definition</a>
</h3>
    <p class="" style="">The Structure Module is defined as including the following elements and attributes:  [<a href="#nt-id2257101">19</a>]</p>
    <p class="caption">Table 1: Defined Structure Module Elements and Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
<th colspan="" rowspan="">Element</th>
<th colspan="" rowspan="">Attributes</th>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;body/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;head/&gt;</td>
<td align="" colspan="" rowspan="">profile</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;html/&gt;</td>
<td align="" colspan="" rowspan="">version</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;title/&gt;</td>
<td align="" colspan="" rowspan=""></td>
</tr>
    </table>
  </div>
  <div class="indent">
<h3>6.2 <a name="def-text">Text Module Definition</a>
</h3>
    <p class="" style="">The Text Module is defined as including the following elements and attributes:</p>
    <p class="caption">Table 2: Defined Text Module Elements and Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
<th colspan="" rowspan="">Element</th>
<th colspan="" rowspan="">Attributes</th>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;abbr/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;acronym/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;address/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;blockquote/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style; cite</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;br/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;cite/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;code/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;dfn/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;div/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;em/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;h1/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;h2/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;h3/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;h4/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;h5/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;h6/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;kbd/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;p/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;pre/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;q/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style; cite</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;samp/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;span/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;strong/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;var/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
    </table>
  </div>
  <div class="indent">
<h3>6.3 <a name="def-hypertext">Hypertext Module Definition</a>
</h3>
    <p class="" style="">The Hypertext Module is defined as including the &lt;a/&gt; element only:</p> 
    <p class="caption">Table 3: Defined Hypertext Module Elements and Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
<th colspan="" rowspan="">Element</th>
<th colspan="" rowspan="">Attributes</th>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;a/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style; accesskey, charset, href, hreflang, rel, rev, tabindex, type</td>
</tr>
    </table>
  </div>
  <div class="indent">
<h3>6.4 <a name="def-list">List Module Definition</a>
</h3>
    <p class="" style="">The List Module is defined as including the following elements and attributes:</p>
    <p class="caption">Table 4: Defined List Module Elements and Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
<th colspan="" rowspan="">Element</th>
<th colspan="" rowspan="">Attributes</th>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;dl/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;dt/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;dd/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;ol/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;ul/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;li/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style</td>
</tr>
    </table>
  </div>
  <div class="indent">
<h3>6.5 <a name="def-image">Image Module Definition</a>
</h3>
    <p class="" style="">The Image Module is defined as including the &lt;img/&gt; element only:</p>
    <p class="caption">Table 5: Defined Image Module Elements and Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
<th colspan="" rowspan="">Element</th>
<th colspan="" rowspan="">Attributes</th>
</tr>
      <tr class="body">
<td align="" colspan="" rowspan="">&lt;img/&gt;</td>
<td align="" colspan="" rowspan="">class, id, title; style; alt, height, longdesc, src, width</td>
</tr>
    </table>
  </div>
  <div class="indent">
<h3>6.6 <a name="def-style">Style Attribute Module Definition</a>
</h3>
    <p class="" style="">The Style Attribute Module is defined as including the style attribute only, as included in the preceding definition tables.</p>
  </div>
<h2>7.
       <a name="profile">Recommended Profile</a>
</h2>
  <p class="" style="">Even within the restricted set of modules specified as defining the XHTML-IM Integration Set (see preceding section), some elements and attributes are inappropriate or unnecessary for the purpose of instant messaging; although such elements and attributes MAY be included in accordance with the XHTML-IM Integration Set, further recommended restrictions regarding which elements and attributes to include in XHTML content are specified below.</p>
  <div class="indent">
<h3>7.1 <a name="profile-structure">Structure Module Profile</a>
</h3>
    <p class="" style="">The intent of the protocol defined herein is to support lightweight text markup of XMPP message bodies only. Therefore the &lt;head/&gt;, &lt;html/&gt;, and &lt;title/&gt; elements are NOT RECOMMENDED to be generated by a compliant implementation, and SHOULD be ignored if received (where the meaning of "ignore" is defined by the conformance requirements of <span style="font-weight: bold">Modularization of XHTML</span>, as summarized in the <a href="#w3c-conformance">User Agent Conformance</a> section of this document). However, the &lt;body/&gt; element is REQUIRED, since it is the root element for all XHTM content.</p>
  </div>
  <div class="indent">
<h3>7.2 <a name="profile-text">Text Module Profile</a>
</h3>
    <p class="" style="">Not all of the Text Module elements are appropriate in the context of instant messaging, since the XHTML content that one views is generated by one's conversation partner in what is often a rapid-fire conversation thread. Only the following elements are RECOMMENDED in XHTML-IM:</p>
    <ul>
      <li>&lt;br/&gt;</li>
      <li>&lt;div/&gt;</li>
      <li>&lt;p/&gt;</li>
      <li>&lt;span/&gt;</li>
    </ul>
    <p class="" style="">The other Text Module elements SHOULD NOT be generated by a compliant implementation, and MAY be ignored if received (where the meaning of "ignore" is defined by the conformance requirements of <span style="font-weight: bold">Modularization of XHTML</span>, as summarized in the <a href="#w3c-conformance">User Agent Conformance</a> section of this document).</p>
  </div>
  <div class="indent">
<h3>7.3 <a name="profile-hypertext">Hypertext Module Profile</a>
</h3>
    <p class="" style="">The only recommended attributes of the &lt;a/&gt; element are specified in th <a href="#profile-attributes">Recommended Attributes</a> section of this document.</p>
  </div>
  <div class="indent">
<h3>7.4 <a name="profile-list">List Module Profile</a>
</h3>
    <p class="" style="">Because it is unlikely that an instant messaging user would generate a definition list, only ordered and unordered lists are RECOMMENDED. Definition lists SHOULD NOT be generated by a compliant implementation, and MAY be ignored if received (where the meaning of "ignore" is defined by the conformance requirements of <span style="font-weight: bold">Modularization of XHTML</span>, as summarized in the <a href="#w3c-conformance">User Agent Conformance</a> section of this document).</p>
  </div>
  <div class="indent">
<h3>7.5 <a name="profile-image">Image Module Profile</a>
</h3>
    <p class="" style="">The only recommended attributes of the &lt;img/&gt; element are specified in the <a href="#profile-attributes">Recommended Attributes</a> section of this document. In addition, for security reasons or because of display constraints, a compliant client MAY choose to display 'alt' text only, not the image itself.</p>
  </div>
  <div class="indent">
<h3>7.6 <a name="profile-style">Style Attribute Module Profile</a>
</h3>
    <p class="" style="">This module MUST be supported in XHTML-IM if possible; although clients written for certain platforms (e.g., console clients, mobile phones, and handheld computers) or for certain classes of users (e.g., text-to-speech clients) may not be able to support all of the recommended styles directly, they SHOULD attempt to emulate or translate the defined style properties into text or other presentation styles that are appropriate for the platform or user base in question.</p> 
    <p class="" style="">A full list of recommended style properties is provided below.</p>
    <div class="indent">
<h3>7.6.1 <a name="profile-style-properties">Recommended Style Properties</a>
</h3>
      <p class="" style=""><span style="font-weight: bold">CSS1</span> defines 42 "atomic" style properties (which are categorized into font, color and background, text, box, and classification properties) as well as 11 "shorthand" properties ("font", "background", "margin", "padding", "border-width", "border-top", "border-right", "border-bottom", "border-left", "border", and "list-style"). Many of these properties are not appropriate for use in text-based instant messaging, for one or more of the following reasons:</p>
      <ol start="1" type="1">
        <li>The property applies to or depends on the inclusion of images other than those handled by the XHTML Image Module (e.g., the "background-image", "background-repeat", "background-attachment", "background-position", and "list-style-image"  properties).</li>
        <li>The property is intended for advanced document layout (e.g., the "line-height" property and most of the box properties, with the exception of "margin-left", which is useful for indenting text, and "margin-right", which can be useful when dealing with images).</li>
        <li>The property is unnecessary since it can be emulated via user input or recommended XHTML stuctural elements (e.g., the "text-transform" property can be emulated by the user's keystrokes or use of the caps lock key)</li>
        <li>The property is otherwise unlikely to ever be used in the context of rapid-fire conversations (e.g., the "font-variant", "word-spacing", "letter-spacing", and "list-style-position" properties).</li>
        <li>The property is a shorthand property but some of the properties it includes are not appropriate for instant messaging applications according to the foregoing considerations (in fact this applies to all of the shorthand properties).</li>
      </ol>
      <p class="" style="">Unfortunately, <span style="font-weight: bold">CSS1</span> does not include mechanisms for defining profiles thereof (as does XHTML 1.0 in the form of XHTML Modularization). While there exist reduced sets of CSS2, these introduce more complexity than is desirable in the context of XHTML-IM. Therefore we simply provide a list of recommended CSS1 style properties.</p>
      <p class="" style="">XHTML-IM stipulates that only the following style properties are RECOMMENDED:</p>
      <ul>
        <li>background-color</li>
        <li>color</li>
        <li>font-family</li>
        <li>font-size</li>
        <li>font-style</li>
        <li>font-weight</li>
        <li>margin-left</li>
        <li>margin-right</li>
        <li>text-align</li>
        <li>text-decoration</li>
      </ul>
      <p class="" style="">Although a compliant implementation MAY generate or process other style properties defined in CSS1, such behavior is NOT RECOMMENDED by this JEP.</p>
    </div>
  </div>
  <div class="indent">
<h3>7.7 <a name="profile-attributes">Recommended Attributes</a>
</h3>
    <div class="indent">
<h3>7.7.1 <a name="profile-attributes-common">Common Attributes</a>
</h3>
      <p class="" style="">Section 5.1 of <span style="font-weight: bold">Modularization of XHTML</span> describes several "common" attribute collections: a "Core" collection ('class', 'id', 'title'), an "I18N" collection ('xml:lang', not shown below since it is implied in XML), an "Events" collection (not included in the XHTML-IM Integration Set because the Intrinsic Events Module is not selected), and a "Style" collection ('style'). The following table summarizes the recommended profile of these common attributes within the XHTML 1.0 content itself:</p>
      <p class="caption">Table 6: Recommended Usage of Common Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
        <tr class="body">
<th colspan="" rowspan="">Attribute</th>
<th colspan="" rowspan="">Usage</th>
<th colspan="" rowspan="">Reason</th>
</tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">class</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
          <td align="" colspan="" rowspan="">External stylesheets (which 'class' would reference) are not recommended.</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">id</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
          <td align="" colspan="" rowspan="">Internal links and message fragments are not recommended in IM content, nor are external stylesheets (which also make use of the 'id' attribute).</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">title</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
          <td align="" colspan="" rowspan="">Granting of titles to elements in IM content seems unnecessary.</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">style</td>
          <td align="" colspan="" rowspan="">REQUIRED</td>
          <td align="" colspan="" rowspan="">The 'style' attribute is required since it is the vehicle for presentational styles.</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">xml:lang</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
          <td align="" colspan="" rowspan="">Differentiation of language identification should occur at the level of the &lt;body/&gt; element only.</td>
        </tr>
      </table>
    </div>
    <div class="indent">
<h3>7.7.2 <a name="profile-attributes-special">Specialized Attributes</a>
</h3>
      <p class="" style="">Beyond the "common" attributes, certain elements within the modules selected for the XHTML-IM Integration Set are allowed to possess other attributes, such as eight attributes for the &lt;a/&gt; element and five attributes for the &lt;img/&gt; element. The recommended profile for such attributes is provided in the following table:</p>
      <p class="caption">Table 7: Recommended Usage of Specialized Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
        <tr class="body">
<th colspan="" rowspan="">Element Scope</th>
<th colspan="" rowspan="">Attribute</th>
<th colspan="" rowspan="">Usage</th>
</tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">accesskey</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">charset</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">href</td>
          <td align="" colspan="" rowspan="">REQUIRED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">hreflang</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">rel</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">rev</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">tabindex</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
          <td align="" colspan="" rowspan="">type</td>
          <td align="" colspan="" rowspan="">RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;img/&gt;</td>
          <td align="" colspan="" rowspan="">alt</td>
          <td align="" colspan="" rowspan="">REQUIRED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;img/&gt;</td>
          <td align="" colspan="" rowspan="">height</td>
          <td align="" colspan="" rowspan="">RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;img/&gt;</td>
          <td align="" colspan="" rowspan="">longdesc</td>
          <td align="" colspan="" rowspan="">NOT RECOMMENDED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;img/&gt;</td>
          <td align="" colspan="" rowspan="">src</td>
          <td align="" colspan="" rowspan="">REQUIRED</td>
        </tr>
        <tr class="body">
          <td align="" colspan="" rowspan="">&lt;img/&gt;</td>
          <td align="" colspan="" rowspan="">width</td>
          <td align="" colspan="" rowspan="">RECOMMENDED</td>
        </tr>
      </table>
    </div>
    <div class="indent">
<h3>7.7.3 <a name="profile-attributes-other">Other Attributes</a>
</h3>
      <p class="" style="">Other XHTML 1.0 attributes SHOULD NOT be generated by a compliant implementation, and SHOULD be ignored if received (where the meaning of "ignore" is defined by the conformance requirements of <span style="font-weight: bold">Modularization of XHTML</span>, as summarized in the <a href="#w3c-conformance">User Agent Conformance</a> section of this document).</p>
    </div>
  </div>
  <div class="indent">
<h3>7.8 <a name="profile-summary">Summary of Recommendations</a>
</h3>
    <p class="" style="">The following table summarizes the elements and attributes that are recommended within the XHTML-IM Integration Set.</p>
    <p class="caption">Table 8: Recommended Elements and Attributes</p>
<table border="1" cellpadding="3" cellspacing="0">
      <tr class="body">
        <th colspan="" rowspan="">Element</th>
        <th colspan="" rowspan="">Attributes</th>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;a/&gt;</td>
        <td align="" colspan="" rowspan="">href, style, type</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;body/&gt;</td>
        <td align="" colspan="" rowspan="">style, xml:lang  [<a href="#nt-id2259002">20</a>]</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;br/&gt;</td>
        <td align="" colspan="" rowspan="">-none-</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;img/&gt;</td>
        <td align="" colspan="" rowspan="">alt, height, src, style, width</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;li/&gt;</td>
        <td align="" colspan="" rowspan="">style</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;ol/&gt;</td>
        <td align="" colspan="" rowspan="">style</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;p/&gt;</td>
        <td align="" colspan="" rowspan="">style</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;span/&gt;</td>
        <td align="" colspan="" rowspan="">style</td>
      </tr>
      <tr class="body">
        <td align="" colspan="" rowspan="">&lt;ul/&gt;</td>
        <td align="" colspan="" rowspan="">style</td>
      </tr>
    </table>
    <p class="" style="">Any other elements and attributes defined in the XHTML 1.0 modules that are included in the XHTML-IM Integration Set SHOULD NOT be generated by a compliant implementation, and SHOULD be ignored if received (where the meaning of "ignore" is defined by the conformance requirements of <span style="font-weight: bold">Modularization of XHTML</span>, as summarized in the <a href="#w3c-conformance">User Agent Conformance</a> section of this document).</p>
  </div>
<h2>8.
       <a name="bizrules">Business Rules</a>
</h2>
  <p class="" style="">The following rules apply to the generation and processing of XHTML content by Jabber clients or other XMPP entities.</p>
  <ol start="1" type="1">
    <li><p class="" style="">The sending client MUST ensure that, if XHTML content is sent, its meaning is the same as that of the plaintext version, and that the two versions differ only in markup rather than meaning.</p></li>
    <li><p class="" style="">XHTML-IM is a reduced set of <span style="font-weight: bold">XHTML 1.0</span> and thus also of <span style="font-weight: bold">XML 1.0</span>. Therefore all opening tags MUST be completed by inclusion of an appropriate closing tag.</p></li>
    <li><p class="" style=""><span style="font-weight: bold">XMPP Core</span> specifies that an XMPP &lt;message/&gt; MAY contain more than one &lt;body/&gt; child as long as each &lt;body/&gt; possesses an 'xml:lang' attribute with a distinct value. In order to ensure correct internationalization, if an XMPP &lt;message/&gt; stanza contains more than one &lt;body/&gt; child and is also sent as XHTML-IM, the &lt;html/&gt; element SHOULD also contain more than one &lt;body/&gt; child, with one such element for each &lt;body/&gt; child of the &lt;message/&gt; stanza (distinguished by an appropriate 'xml:lang' attribute).</p></li>
    <li><p class="" style="">Section 11.1 of <span style="font-weight: bold">XMPP Core</span> stipulates that character entities other than the five general entities defined in Section 4.6 of the XML specification (i.e., &amp;lt;, &amp;gt;, &amp;amp;, &amp;apos;, and &amp;quot;) MUST NOT be sent over an XML stream. Therefore implementations of XHTML-IM MUST NOT include predefined XHTML 1.0 entities such as &amp;nbsp; -- instead, implementations MUST use the equivalent character references as specified in Section 4.1 of the XML specification (even in non-obvious places such as URIs that are included in the 'href' attribute).</p></li>
    <li><p class="" style="">For elements and attributes qualified by the 'http://www.w3.org/1999/xhtml' namespace, user agent conformance is guided by the requirements defined in <span style="font-weight: bold">Modularization of XHTML</span>; for details, refer to the <a href="#w3c-conformance">User Agent Conformance</a> section of this document.</p></li>
    <li><p class="" style="">The use of structural elements is NOT RECOMMENDED where presentational styles are desired, which is why very few structural elements are specified herein. Implementations SHOULD use appropriate 'style' attributes (e.g., &lt;span style='font-weight: bold'&gt;this is bold&lt;/span&gt; and &lt;p style='margin-left: 5%'&gt;this is indented&lt;/p&gt;) rather than XHTML structural elements (e.g., &lt;strong/&gt; and &lt;blockquote/&gt;) wherever possible.</p></li>
    <li><p class="" style="">Nesting of block structural elements (&lt;p/&gt;) and list elements (&lt;dl/&gt;, &lt;ol/&gt;, &lt;ul/&gt;) is NOT RECOMMENDED, except within &lt;div/&gt; elements.</p></li>
    <li><p class="" style="">It is RECOMMENDED for implementations to replace line breaks with the &lt;br/&gt; element and to replace significant whitepace with the appropriate number of non-breaking spaces (via the NO-BREAK SPACE character or its equivalent), where "significant whitespace" means whitespace makes some material difference (e.g., one or more spaces at the beginning of a line or more than one space anywhere else within a line), not "normal" whitespace separating words or punctuation.</p></li>
  </ol>
<h2>9.
       <a name="examples">Examples</a>
</h2>
  <p class="" style="">The following examples provide an insight into the inclusion of XHTML content in XMPP &lt;message/&gt; stanzas but are by no means exhaustive or definitive.</p>
  <p class="" style="">(Note: The examples may not render correctly in all web browsers, since not all web browsers comply fully with the XHTML 1.0 and CSS1 standards. Markup in the examples may include line breaks for readability. Example renderings are shown with a colored background to set them off from the rest of the text.)</p>
  <p class="caption">Example 2. Bold, italic, font colors</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;OMG, I&amp;apos;m green with envy!&lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p style='font-size:large'&gt;
        &lt;span style='font-style: italic'&gt;OMG&lt;/span&gt;, 
        I&amp;apos;m &lt;span style='color:green'&gt;green&lt;/span&gt;
        with &lt;span style='font-weight: bold'&gt;envy&lt;/span&gt;!
      &lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">This could be rendered as follows:</p>
  <div class="example" style="">
    <p class="" style="font-size: large"><span class="" style="font-style: italic">OMG</span>, I'm <span class="" style="color:green">green</span> with <span class="" style="font-weight: bold">envy</span>!</p>
  </div>
  <p class="caption">Example 3. Indentation</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;As Emerson said in his essay Self-Reliance:

     &amp;quot;A foolish consistency is the hobgoblin of little minds.&amp;quot;
  &lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p&gt;As Emerson said in his essay &lt;span style='font-style: italic'&gt;Self-Reliance&lt;/span&gt;:&lt;/p&gt;
      &lt;p style='margin-left: 5%'&gt;
        &amp;quot;A foolish consistency is the hobgoblin of little minds.&amp;quot;
      &lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">This could be rendered as follows:</p>
  <div class="example" style="">
    <p class="" style="">As Emerson said in his essay <span class="" style="font-style: italic">Self-Reliance</span>:</p>
    <p class="" style="margin-left: 5%">
      "A foolish consistency is the hobgoblin of little minds."
    </p>
  </div>
  <p class="caption">Example 4. An image and a hyperlink</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;Hey, are you licensed to Jabber?

  http://www.jabber.org/images/psa-license.jpg
  &lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p&gt;Hey, are you licensed to &lt;a href='http://www.jabber.org/'&gt;Jabber&lt;/a&gt;?&lt;/p&gt;
      &lt;p&gt;&lt;img src='http://www.jabber.org/images/psa-license.jpg'
              alt='A License to Jabber'
              height='261'
              width='537'/&gt;&lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">This could be rendered as follows:</p>
  <div class="indent" style="">
    <p class="" style="">Hey, are you licensed to <a href="http://www.jabber.org/">Jabber</a>?</p>
    <p class="" style=""><img src="http://www.jabber.org/images/psa-license.jpg"></p>
  </div>
  <p class="" style="">Note the large size of the image. Including the 'height' and 'width' attributes is therefore quite friendly, since it gives the receiving application hints as to whether the image is too large to fit into the current interface (naturally, these are hints only and cannot necessarily be relied upon in determining the size of the image).</p>
  <p class="" style="">Rendering the 'alt' value rather than the image would yield something like the following:</p>
  <div class="example" style="">
    <p class="" style="">Hey, are you licensed to <a href="http://www.jabber.org/">Jabber</a>?</p>
    <p class="" style="">IMG: "A License to Jabber"</p>
  </div>
  <p class="caption">Example 5. Two lists</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;Here&amp;apos;s my .plan for today:
  1. Add the following examples to JEP-0071:
     - ordered and unordered lists
     - more styles (e.g., indentation)
  2. Kick back and relax
  &lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p&gt;Here&amp;apos;s my .plan for today:&lt;/p&gt;
      &lt;ol&gt;
        &lt;li&gt;Add the following examples to JEP-0071:
          &lt;ul&gt;
            &lt;li&gt;ordered and unordered lists&lt;/li&gt;
            &lt;li&gt;more styles (e.g., indentation)&lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;
        &lt;li&gt;Kick back and relax&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">This could be rendered as follows:</p>
  <div class="example" style="">
    <p class="" style="">Here's my .plan for today:</p>
    <ol start="1" type="1">
      <li>Add the following examples to JEP-0071:
        <ul>
          <li>ordered and unordered lists</li>
          <li>more styles (e.g., indentation)</li>
        </ul>
      </li>
      <li>Kick back and relax</li>
    </ol>
  </div>
  <p class="caption">Example 6. Quoted text</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;
You wrote:

   I think we have consensus on the following:

   1. Remove &lt;div/&gt;
   2. Nesting is not recommended
   3. Don't preserve whitespace

   Yes, no, maybe?

That seems fine to me.
  &lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p&gt;You wrote:&lt;/p&gt;
      &lt;div style='margin-left: 5%'&gt;
        &lt;p&gt;I think we have consensus on the following:&lt;/p&gt;
        &lt;ol&gt;
          &lt;li&gt;Remove &amp;lt;div/&amp;gt;&lt;/li&gt;
          &lt;li&gt;Nesting is not recommended&lt;/li&gt;
          &lt;li&gt;Don't preserve whitespace&lt;/li&gt;
        &lt;/ol&gt;
        &lt;p&gt;Yes, no, maybe?&lt;/p&gt;
      &lt;/div&gt;
      &lt;p&gt;That seems fine to me.&lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">Although quoting received messages is relatively uncommon in IM, it does happen. This could be rendered as follows:</p>
  <div class="example" style="">
      <p class="" style="">You wrote:</p>
      <div class="" style="margin-left: 5%">
        <p class="" style="">I think we have consensus on the following:</p>
        <ol start="" type="">
          <li>Remove &lt;div/&gt;</li>
          <li>Nesting is not recommended</li>
          <li>Don't preserve whitespace</li>
        </ol>
        <p class="" style="">Yes, no, maybe?</p>
      </div>
      <p class="" style="">That seems fine to me.</p>
  </div>
  <p class="caption">Example 7. Multiple bodies</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body xml:lang='en-US'&gt;awesome!&lt;/body&gt;
  &lt;body xml:lang='de-DE'&gt;ausgezeichnet!&lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xml:lang='en-US' xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p style='font-weight: bold'&gt;awesome!&lt;/p&gt;
    &lt;/body&gt;
    &lt;body xml:lang='de-DE' xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p style='font-weight: bold'&gt;ausgezeichnet!&lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">How multiple bodies would best be rendered will depend on the user agent and relevant application. For example, a specialized Jabber client that is used in foreign language instruction might show two languages side by side, whereas a dedicated IM client might show content only in a human user's preferred language as captured in the client configuration.</p>
  <p class="caption">Example 8. Unrecognized Elements and Attributes</p>
<div class="indent"><pre>
&lt;message&gt;
  &lt;body&gt;
    The XHTML user agent conformance requirements say to ignore
    elements and attributes you don't understand, to wit:

      4. If a user agent encounters an element it does 
         not recognize, it must continue to process the 
         children of that element. If the content is text, 
         the text must be presented to the user.

      5. If a user agent encounters an attribute it does 
         not recognize, it must ignore the entire attribute 
         specification (i.e., the attribute and its value).
  &lt;/body&gt;
  &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt;
    &lt;body xmlns='http://www.w3.org/1999/xhtml'&gt;
      &lt;p&gt;The &lt;acronym&gt;XHTML&lt;/acronym&gt; user agent conformance 
         requirements say to ignore elements and attributes 
         you don't understand, to wit:&lt;/p&gt;
      &lt;ol type='1' start='4'&gt;
        &lt;li&gt;&lt;p&gt;
          If a user agent encounters an element it does 
          not recognize, it must continue to process the 
          children of that element. If the content is text,
          the text must be presented to the user.
        &lt;/p&gt;&lt;/li&gt;
        &lt;li&gt;&lt;p&gt;
          If a user agent encounters an attribute it does 
          not recognize, it must ignore the entire attribute 
          specification (i.e., the attribute and its value).
        &lt;/p&gt;&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/message&gt;
  </pre></div>
  <p class="" style="">Let us assume that the recipient's user agent recognizes neither the &lt;acronym/&gt; element (which is discouraged in XHTML-IM) nor the 'type' and 'start' attributes of the &lt;ol/&gt; element (which, after all, were deprecated in HTML 4.0), and that it does not render nested elements (e.g., the &lt;p/&gt; elements within the &lt;li/&gt; elements); in this case, it could render the content as follows (note that the element value is shown as text and the attribute value is not rendered):</p>
  <div class="example" style="">
    <p class="" style="">The XHTML user agent conformance requirements say to ignore elements and attributes you don't understand, to wit:</p>
    <ol start="" type="">
      <li>If a user agent encounters an element it does not recognize, it must continue to process the children of that element. If the content is text, the text must be presented to the user.</li>
      <li>If a user agent encounters an attribute it does not recognize, it must ignore the entire attribute specification (i.e., the attribute and its value).</li>
    </ol>
  </div>
<h2>10.
       <a name="discovery">Discovering Support for XHTML-IM</a>
</h2>
  <p class="" style="">This section describes methods for discovering whether a Jabber client or other XMPP entity supports the protocol defined herein.</p>
  <div class="indent">
<h3>10.1 <a name="discovery-explicit">Explicit Discovery</a>
</h3>
    <p class="" style="">The primary means of discovering support for XHTML-IM is <span class="ref" style="">Service Discovery</span>  [<a href="#nt-id2260100">21</a>].</p>
    <p class="caption">Example 9. Seeking to Discover XHTML-IM Support</p>
<div class="indent"><pre>
&lt;iq type='get'
    from='juliet@shakespeare.lit/balcony'
    to='romeo@shakespeare.lit/orchard'
    id='disco1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
      </pre></div>
      <p class="" style="">If the queried entity supports XHTML-IM, it MUST return a &lt;feature/&gt; element with a 'var' attribute set to a value of "http://jabber.org/protocol/xhtml-im" in the IQ result.</p>
      <p class="caption">Example 10. Contact Returns Disco Info Results</p>
<div class="indent"><pre>
&lt;iq type='result'
    from='romeo@shakespeare.lit/orchard'
    to='juliet@shakespeare.lit/balcony'
    id='disco1'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    ...
    &lt;feature var='http://jabber.org/protocol/xhtml-im'/&gt;
    ...
  &lt;/query&gt;
&lt;/iq&gt;
      </pre></div>
  </div>
  <div class="indent">
<h3>10.2 <a name="discovery-implicit">Implicit Discovery</a>
</h3>
    <p class="" style="">A Jabber user's client MAY send XML &lt;message/&gt; stanzas containing XHTML-IM extensions without first discovering if the conversation partner's client supports XHTML-IM. If the user's client sends a message that includes XHTML-IM markup and the conversation partner's client replies to that message but does not include XHTML-IM markup, the user's client SHOULD NOT continue sending XHTML-IM markup.</p>
  </div>
<h2>11.
       <a name="security">Security Considerations</a>
</h2>
  <p class="" style="">The exclusion of scripts, applets, and other multimedia elements reduces the risk of exposure to harmful or malicious objects caused by inclusion of XHTML content. In addition, because of security concerns related to images, an implementation MAY choose not to show images but instead show only the 'alt' text.</p>
<h2>12.
       <a name="w3c">W3C Considerations</a>
</h2>
  <p class="" style="">The usage of XHTML 1.0 defined herein meets the requirements for XHTML 1.0 Integration Set document type conformance as defined in Section 3 ("Conformance Definition") of <span style="font-weight: bold">Modularization of XHTML</span>.</p>
  <div class="indent">
<h3>12.1 <a name="w3c-doctype">Document Type Name</a>
</h3>
    <p class="" style="">The Formal Public Identifier (FPI) for the XHTML-IM document type definition is:</p>
    <p class="caption"></p>
<div class="indent"><pre>
-//JSF//DTD Instant Messaging with XHTML//EN
    </pre></div>
    <p class="" style="">The fields of this FPI are as follows:</p>
    <ol start="1" type="1">
      <li>The leading field is "-", which indicates that this is a privately-defined resource.</li>
      <li>The second field is "JSF" (an abbreviation for Jabber Software Foundation), which identifies the organization that maintains the named item.</li>
      <li>The third field contains two constructs:
        <ol start="1" type="1">
          <li>The public text class is "DTD", which adheres to ISO 8879 Clause 10.2.2.1.</li>
          <li>The public text description is "Instant Messaging with XHTML", which contains but does not begin with the string "XHTML" (as recommended for an XHTML 1.0 Integration Set).</li>
        </ol>
      </li>
      <li>The fourth field is "EN", which identifies the language (English) in which the item is defined.</li>
    </ol>
  </div>
  <div class="indent">
<h3>12.2 <a name="w3c-conformance">User Agent Conformance</a>
</h3>
    <p class="" style="">A user agent that implements this specification MUST conform to Section 3.5 ("XHTML Family User Agent Conformance") of <span style="font-weight: bold">Modularization of XHTML</span>. Many of the requirements defined therein are already met by Jabber clients simply because they already include XML parsers.</p>
    <p class="" style="">However, "ignore" has a special meaning in XHTML modularization (different from its meaning in XMPP). Specifically, criteria 4 through 6 of Section 3.5 of <span style="font-weight: bold">Modularization of XHTML</span> state:</p>
    <ol start="4" type="1">
      <li>
        <p class="" style=""><span style="font-style: italic">W3C TEXT:</span> If a user agent encounters an element it does not recognize, it must continue to process the children of that element. If the content is text, the text must be presented to the user.</p>
        <p class="" style=""><span style="font-style: italic">JSF COMMENT:</span> This behavior is different from that defined by <span style="font-weight: bold">XMPP Core</span>, and in the context of XHTML-IM implementations applies only to XML elements qualified by the 'http://www.w3.org/1999/xhtml' namespace as defined herein. This criterion MUST be applied to all XHTML 1.0 elements except those explicitly included in XHTML-IM as described in the <a href="#def">XHTML-IM Integration Set</a> and <a href="#profile">Recommended Profile</a> sections of this document. Therefore, an XHTML-IM implementation MUST process all XHTML 1.0 child elements of the XHTML-IM &lt;html/&gt; element even if such child elements are not included in the XHTML 1.0 Integration Set defined herein, and MUST present to the recipient the XML character data contained in such child elements.</p>
      </li>
      <li>
        <p class="" style=""><span style="font-style: italic">W3C TEXT:</span> If a user agent encounters an attribute it does not recognize, it must ignore the entire attribute specification (i.e., the attribute and its value).</p>
        <p class="" style=""><span style="font-style: italic">JSF COMMENT:</span> This criterion MUST be applied to all XHTML 1.0 attributes except those explicitly included in XHTML-IM as described in the <a href="#def">XHTML-IM Integration Set</a> and <a href="#profile">Recommended Profile</a> sections of this document. Therefore, an XHTML-IM implementation MUST ignore all attributes of elements qualified by the 'http://www.w3.org/1999/xhtml' namespace if such attributes are not explicitly included in the XHTML 1.0 Integration Set defined herein.</p>
      </li>
      <li>
        <p class="" style=""><span style="font-style: italic">W3C TEXT:</span> If a user agent encounters an attribute value it doesn't recognize, it must use the default attribute value.</p>
        <p class="" style=""><span style="font-style: italic">JSF COMMENT:</span> Since not one of the attributes included in XHTML-IM has a default value defined for it in <span style="font-weight: bold">XHTML 1.0</span>, in practice this criterion does not apply to XHTML-IM implementations.</p>
      </li>
    </ol>
  </div>
  <div class="indent">
<h3>12.3 <a name="w3c-modularization">XHTML Modularization</a>
</h3>
    <p class="" style="">For information regarding XHTML modularization in XML schema for the XHTML 1.0 Integration Set defined in this specification, refer to the <a href="#schemas-driver">Schema Driver</a> section of this document.</p>
  </div>
  <div class="indent">
<h3>12.4 <a name="w3c-review">W3C Review</a>
</h3>
    <p class="" style="">The XHTML 1.0 Integration Set defined herein has been reviewed informally by an editor of the XHTML Modularization in XML Schema specification but has not undergone formal review by the W3C; before this specification proceeds to a status of Final within the Jabber Software Foundation's standards process, it should undergo a formal review through communication with the Hypertext Coordinating Group within the W3C.</p>
  </div>
  <div class="indent">
<h3>12.5 <a name="w3c-versions">XHTML Versioning</a>
</h3>
    <p class="" style="">The W3C is actively working on <span class="ref" style="">XHTML 2.0</span>  [<a href="#nt-id2260546">22</a>] and may produce additional versions of XHTML in the future. This specification addresses XHTML 1.0 only, but it may be superseded or supplemented in the future by a Jabber Enhancement Proposal that defines methods for encapsulating XHTML 2.0 content in XMPP.</p>
  </div>
<h2>13.
       <a name="iana">IANA Considerations</a>
</h2>
  <p class="" style="">This JEP requires no interaction with the <span class="ref" style="">Internet Assigned Numbers Authority (IANA)</span>  [<a href="#nt-id2260593">23</a>].</p>
<h2>14.
       <a name="registrar">Jabber Registrar Considerations</a>
</h2>
  <div class="indent">
<h3>14.1 <a name="registrar-ns">Protocol Namespaces</a>
</h3>
    <p class="" style="">Upon advancement of this JEP to a status of Draft, the <span class="ref" style="">Jabber Registrar</span>  [<a href="#nt-id2260639">24</a>] shall add 'http://jabber.org/protocol/xhtml-im' to its registry of protocol namespaces.</p>
  </div>
<h2>15.
       <a name="schemas">XML Schemas</a>
</h2>
  <div class="indent">
<h3>15.1 <a name="schemas-wrapper">XHTML-IM Wrapper</a>
</h3>
    <p class="" style="">The following schema defines the XMPP extension element that serves as a wrapper for XHTML content.</p>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    xmlns:xhtml='http://www.w3.org/1999/xhtml'
    targetNamespace='http://jabber.org/protocol/xhtml-im'
    xmlns='http://jabber.org/protocol/xhtml-im'
    elementFormDefault='qualified'&gt;

  &lt;xs:import namespace='http://www.w3.org/1999/xhtml'/&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;

      This schema defines the &lt;html/&gt; element qualified by
      the 'http://jabber.org/protocol/xhtml-im' namespace.
      The only allowable child is a &lt;body/&gt; element qualified
      by the 'http://www.w3.org/1999/xhtml' namespace. Refer 
      to the XHTML-IM schema driver for the definition of the 
      XHTML 1.0 Integration Set.

      Full documentation of this Integration Set is contained in
      "JEP-0071: XHTML-IM", a specification published by the
      Jabber Software Foundation.

         http://www.jabber.org/jeps/jep-0071.html

    &lt;/xs:documentation&gt;
    &lt;xs:documentation source="http://www.jabber.org/jeps/jep-0071.html"/&gt;
  &lt;/xs:annotation&gt;

  &lt;xs:element name='html'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element ref='xhtml:body' 
                    minOccurs='0' 
                    maxOccurs='unbounded'/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>15.2 <a name="schemas-driver">XHTML-IM Schema Driver</a>
</h3>
    <p class="" style="">The following schema defines the modularization schema driver for XHTML-IM.</p>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='http://www.w3.org/1999/xhtml'
    xmlns='http://www.w3.org/1999/xhtml'
    elementFormDefault='qualified'&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;

      This is the XML Schema driver for XHTML-IM, an XHTML 1.0
      Integration Set for use in exchanging marked-up instant
      messages between entities that conform to the Extensible
      Messaging and Presence Protocol (XMPP). This Integration
      Set includes a subset of the modules defined for XHTML 1.0
      but does not redefine any existing modules, nor does it
      define any new modules. Specifically, it includes the
      following modules only:

         - Structure
         - Text
         - Hypertext
         - List
         - Image
         - Style Attribute
     
      The Formal Public Identifier (FPI) for this Integration
      Set is:

         -//JSF//DTD Instant Messaging with XHTML//EN

      Full documentation of this Integration Set is contained in
      "JEP-0071: XHTML-IM", a specification published by the
      Jabber Software Foundation, which is available at the
      following URL:

         http://www.jabber.org/jeps/jep-0071.html

    &lt;/xs:documentation&gt;
    &lt;xs:documentation source="http://www.jabber.org/jeps/jep-0071.html"/&gt;
  &lt;/xs:annotation&gt;

  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-blkphras-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-blkstruct-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-hypertext-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-image-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-inlphras-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-inlstruct-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-inlstyle-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-list-1.xsd"/&gt;
  &lt;xs:include 
      schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml-struct-1.xsd"/&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
  <div class="indent">
<h3>15.3 <a name="schemas-model">XHTML-IM Content Model</a>
</h3>
    <p class="" style="">The following schema defines the content model for XHTML-IM.</p>
    <p class="caption"></p>
<div class="indent"><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           targetNamespace="http://www.w3.org/1999/xhtml"
           xmlns="http://www.w3.org/1999/xhtml"&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;

      This is the XML Schema module of named XHTML 1.0 content models 
      for XHTML-IM, an XHTML 1.0 Integration Set for use in exchanging 
      marked-up instant messages between entities that conform to 
      the Extensible Messaging and Presence Protocol (XMPP). This 
      Integration Set includes a subset of the modules defined for 
      XHTML 1.0 but does not redefine any existing modules, nor 
      does it define any new modules. Specifically, it includes the 
      following modules only:

         - Structure
         - Text
         - Hypertext
         - List
         - Image
         - Style Attribute
     
      Therefore XHTML-IM uses the following content models:

          Block.mix;            Block-like elements, e.g., paragraphs
          Flow.mix;             Any block or inline elements
          Inline.mix;           Character-level elements
          InlineNoAnchor.class; Anchor element
          InlinePre.mix;        Pre element

      XHTML-IM also uses the following Attribute Groups:

           Core.extra.attrib
           I18n.extra.attrib
           Common.extra

      Full documentation of this Integration Set is contained in
      "JEP-0071: XHTML-IM", a specification published by the
      Jabber Software Foundation.

         http://www.jabber.org/jeps/jep-0071.html

    &lt;/xs:documentation&gt;
    &lt;xs:documentation source="http://www.jabber.org/jeps/jep-0071.html"/&gt;
  &lt;/xs:annotation&gt;

  &lt;!-- BEGIN ATTRIBUTE GROUPS --&gt;

  &lt;xs:attributeGroup name="Core.extra.attrib"/&gt;
  &lt;xs:attributeGroup name="I18n.extra.attrib"/&gt;
  &lt;xs:attributeGroup name="Common.extra"&gt;
    &lt;xs:attributeGroup ref="style.attrib"/&gt;
  &lt;/xs:attributeGroup&gt;

  &lt;!-- END ATTRIBUTE GROUPS --&gt;

  &lt;!-- BEGIN HYPERTEXT MODULE "PRIMITIVES" --&gt;

  &lt;xs:group name="Anchor.class"&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element ref="a"/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:group&gt;

  &lt;!-- END HYPERTEXT MODULE "PRIMITIVES" --&gt;

  &lt;!-- BEGIN IMAGE MODULE "PRIMITIVES" --&gt;

  &lt;xs:group name="Image.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="img"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- END IMAGE MODULE "PRIMITIVES" --&gt;

  &lt;!-- BEGIN LIST MODULE "PRIMITIVES" --&gt;

  &lt;xs:group name="List.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="ul"/&gt;
      &lt;xs:element ref="ol"/&gt;
      &lt;xs:element ref="dl"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- END LIST MODULE "PRIMITIVES" --&gt;

  &lt;!-- BEGIN TEXT MODULE "PRIMITIVES" --&gt;

  &lt;xs:group name="BlkPhras.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="address"/&gt;
      &lt;xs:element ref="blockquote"/&gt;
      &lt;xs:element ref="pre"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="BlkStruct.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="div"/&gt;
      &lt;xs:element ref="p"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="Heading.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="h1"/&gt;
      &lt;xs:element ref="h2"/&gt;
      &lt;xs:element ref="h3"/&gt;
      &lt;xs:element ref="h4"/&gt;
      &lt;xs:element ref="h5"/&gt;
      &lt;xs:element ref="h6"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="InlPhras.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="abbr"/&gt;
      &lt;xs:element ref="acronym"/&gt;
      &lt;xs:element ref="cite"/&gt;
      &lt;xs:element ref="code"/&gt;
      &lt;xs:element ref="dfn"/&gt;
      &lt;xs:element ref="em"/&gt;
      &lt;xs:element ref="kbd"/&gt;
      &lt;xs:element ref="q"/&gt;
      &lt;xs:element ref="samp"/&gt;
      &lt;xs:element ref="strong"/&gt;
      &lt;xs:element ref="var"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="InlStruct.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:element ref="br"/&gt;
      &lt;xs:element ref="span"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- END TEXT MODULE "PRIMITIVES" --&gt;

  &lt;!-- BEGIN BLOCK COMBINATIONS --&gt;

  &lt;xs:group name="Block.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="BlkPhras.class"/&gt;
      &lt;xs:group ref="BlkStruct.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- END BLOCK COMBINATIONS --&gt;

  &lt;!-- BEGIN INLINE COMBINATIONS --&gt;

  &lt;!-- Any inline content --&gt;
  &lt;xs:group name="Inline.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="Anchor.class"/&gt;
      &lt;xs:group ref="Image.class"/&gt;
      &lt;xs:group ref="InlPhras.class"/&gt;
      &lt;xs:group ref="InlStruct.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- Inline content contained in a hyperlink --&gt;
  &lt;xs:group name="InlNoAnchor.class"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="Image.class"/&gt;
      &lt;xs:group ref="InlStruct.class"/&gt;
      &lt;xs:group ref="InlPhras.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- END INLINE COMBINATIONS --&gt;

  &lt;!-- BEGIN TOP-LEVEL MIXES --&gt;

  &lt;xs:group name="Block.mix"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="Block.class"/&gt;
      &lt;xs:group ref="Heading.class"/&gt;
      &lt;xs:group ref="List.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="Flow.mix"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="Block.class"/&gt;
      &lt;xs:group ref="Heading.class"/&gt;
      &lt;xs:group ref="Inline.class"/&gt;
      &lt;xs:group ref="List.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="Inline.mix"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="Inline.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="InlNoAnchor.mix"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="InlNoAnchor.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:group name="InlinePre.mix"&gt;
    &lt;xs:choice&gt;
      &lt;xs:group ref="Anchor.class"/&gt;
      &lt;xs:group ref="InlPhras.class"/&gt;
      &lt;xs:group ref="InlStruct.class"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;!-- END TOP-LEVEL MIXES --&gt;

&lt;/xs:schema&gt;
    </pre></div>
  </div>
<h2>16.
       <a name="ack">Acknowledgements</a>
</h2>
  <p class="" style="">This specification formalizes and extends earlier work by Jeremie Miller and Julian Missig on XHTML formatting of Jabber messages. Many thanks to Shane McCarron for his assistance regarding XHTML modularization and conformance issues. Thanks also to contributors on the Standards-JIG list for their feedback and suggestions.</p>
<p><hr></p>
<a name="notes"></a><h2>Notes</h2>
<div class="indent">
<p><a name="nt-id2256237">1</a>. XHTML 1.0 &lt;<a href="http://www.w3.org/TR/xhtml1">http://www.w3.org/TR/xhtml1</a>&gt;.</p>
<p><a name="nt-id2256258">2</a>. Rich Text Format (RTF) Version 1.5 Specification &lt;<a href="http://msdn.microsoft.com/library/en-us/dnrtfspec/html/rtfspec.asp">http://msdn.microsoft.com/library/en-us/dnrtfspec/html/rtfspec.asp</a>&gt;.</p>
<p><a name="nt-id2256288">3</a>. JEP-0134: Protocol Design Guidelines &lt;<a href="http://www.jabber.org/jeps/jep-0134.html">http://www.jabber.org/jeps/jep-0134.html</a>&gt;.</p>
<p><a name="nt-id2256310">4</a>. The Jabber Software Foundation (JSF) is an independent, non-profit organization that develops open application protocols on top of the IETF's Extensible Messaging and Presence Protocol (XMPP). For further information, see &lt;<a href="http://www.jabber.org/jsf/">http://www.jabber.org/jsf/</a>&gt;.</p>
<p><a name="nt-id2256344">5</a>. HTML 4.0 &lt;<a href="http://www.w3.org/TR/REC-html40">http://www.w3.org/TR/REC-html40</a>&gt;.</p>
<p><a name="nt-id2256391">6</a>. Extensible Markup Language (XML) 1.0 (Third Edition) &lt;<a href="http://www.w3.org/TR/REC-xml/">http://www.w3.org/TR/REC-xml/</a>&gt;.</p>
<p><a name="nt-id2256414">7</a>. RFC 3920: Extensible Messaging and Presence Protocol (XMPP): Core &lt;<a href="http://www.ietf.org/rfc/rfc3920.txt">http://www.ietf.org/rfc/rfc3920.txt</a>&gt;.</p>
<p><a name="nt-id2256441">8</a>. The World Wide Web Consortium defines data formats and markup languages (such as HTML and XML) for use over the Internet. For further information, see &lt;<a href="http://www.w3.org/">http://www.w3.org/</a>&gt;.</p>
<p><a name="nt-id2256572">9</a>. JEP-0004: Data Forms &lt;<a href="http://www.jabber.org/jeps/jep-0004.html">http://www.jabber.org/jeps/jep-0004.html</a>&gt;.</p>
<p><a name="nt-id2256602">10</a>. Cascading Style Sheets, level 1 &lt;<a href="http://www.w3.org/TR/REC-CSS1">http://www.w3.org/TR/REC-CSS1</a>&gt;.</p>
<p><a name="nt-id2256645">11</a>. JEP-0096: File Transfer &lt;<a href="http://www.jabber.org/jeps/jep-0096.html">http://www.jabber.org/jeps/jep-0096.html</a>&gt;.</p>
<p><a name="nt-id2256675">12</a>. XSL Transformations &lt;<a href="http://www.w3.org/TR/xslt/">http://www.w3.org/TR/xslt/</a>&gt;.</p>
<p><a name="nt-id2256715">13</a>. The XHTML is merely an alternative version of the message body or bodies, and the semantic meaning is to be derived from the textual message body or bodies rather than the XHTML version.</p>
<p><a name="nt-id2256728">14</a>. It might have been better to use an element name other than &lt;html/&gt; for the wrapper element; however, changing it would not be backwards-compatible with the older protocol and existing implementations.</p>
<p><a name="nt-id2256822">15</a>. Modularization of XHTML &lt;<a href="http://www.w3.org/TR/2004/WD-xhtml-modularization-20040218/">http://www.w3.org/TR/2004/WD-xhtml-modularization-20040218/</a>&gt;.</p>
<p><a name="nt-id2256889">16</a>. RFC 3066: Tags for the Identification of Languages &lt;<a href="http://www.ietf.org/rfc/rfc3066.txt">http://www.ietf.org/rfc/rfc3066.txt</a>&gt;.</p>
<p><a name="nt-id2256935">17</a>. RFC 3921: Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence &lt;<a href="http://www.ietf.org/rfc/rfc3921.txt">http://www.ietf.org/rfc/rfc3921.txt</a>&gt;.</p>
<p><a name="nt-id2257038">18</a>. XHTML Basic &lt;<a href="http://www.w3.org/TR/xhtml-basic">http://www.w3.org/TR/xhtml-basic</a>&gt;.</p>
<p><a name="nt-id2257101">19</a>. The 'style' attribute is specified herein where appropriate because the Style Attribute Module is included in the definition of the XHTML-IM Integration Set, whereas the event-related attributes (e.g., 'onclick') are not specified because the Implicit Events Module is not included.</p>
<p><a name="nt-id2259002">20</a>. When contained within the &lt;html xmlns='http://jabber.org/protocol/xhtml-im'&gt; element, a &lt;body/&gt; element is qualified by the 'http://www.w3.org/1999/xhtml' namespace; naturally, this is a namespace declaration rather than an attribute per se, and therefore is not mentioned in the attribute enumeration.</p>
<p><a name="nt-id2260100">21</a>. JEP-0030: Service Discovery &lt;<a href="http://www.jabber.org/jeps/jep-0030.html">http://www.jabber.org/jeps/jep-0030.html</a>&gt;.</p>
<p><a name="nt-id2260546">22</a>. XHTML 2.0 &lt;<a href="http://www.w3.org/TR/xhtml2">http://www.w3.org/TR/xhtml2</a>&gt;.</p>
<p><a name="nt-id2260593">23</a>. The Internet Assigned Numbers Authority (IANA) is the central coordinator for the assignment of unique parameter values for Internet protocols, such as port numbers and URI schemes. For further information, see &lt;<a href="http://www.iana.org/">http://www.iana.org/</a>&gt;.</p>
<p><a name="nt-id2260639">24</a>. The Jabber Registrar maintains a list of reserved Jabber protocol namespaces as well as registries of parameters used in the context of protocols approved by the Jabber Software Foundation. For further information, see &lt;<a href="http://www.jabber.org/registrar/">http://www.jabber.org/registrar/</a>&gt;.</p>
</div>
<p><hr></p>
<a name="revs"></a><h2>Revision History</h2>
<div class="indent">
<h4>Version 1.0 (2004-09-29)</h4>
<div class="indent">Per a vote of the Jabber Council, advanced status to Draft. (psa)
    </div>
<h4>Version 0.19 (2004-09-27)</h4>
<div class="indent">Per list discussion, removed recommendation to preserve whitespace in XHTML bodies (instead, use of &lt;br/&gt; and non-breaking spaces is recommended); noted that nesting of elements is not recommended except within &lt;div/&gt; elements; and switched from padding-left to margin-left for indentation. (psa)
    </div>
<h4>Version 0.18 (2004-09-15)</h4>
<div class="indent">Added recommendation to preserve whitespace in XHTML bodies. (psa)
    </div>
<h4>Version 0.17 (2004-09-08)</h4>
<div class="indent">Simplified the recommended profiles based on list discussion; changed the examples accordingly. (psa)
    </div>
<h4>Version 0.16 (2004-08-30)</h4>
<div class="indent">Specified the scope of the proposal; clarified reasons for the choice of technology; clarified one business rule; corrected several typographical errors. (psa)
    </div>
<h4>Version 0.15 (2004-07-29)</h4>
<div class="indent">Based on W3C feedback, added content model and refactored the text to ensure separation between the XHTML 1.0 Integration Set itself and the JSF's recommended profile of the Integration Set; also split the requirements out from the Concepts and Approach section, added several more examples, and showed renderings of the examples. (psa)
    </div>
<h4>Version 0.14 (2004-05-19)</h4>
<div class="indent">Clarified relationship between wrapper element and XHTML content. (psa)
    </div>
<h4>Version 0.13 (2004-05-18)</h4>
<div class="indent">Initial version of XHTML modularization. (psa)
    </div>
<h4>Version 0.12 (2004-03-10)</h4>
<div class="indent">Clarified and corrected several points in the text; improved and added to the examples. (psa)
    </div>
<h4>Version 0.11 (2003-12-05)</h4>
<div class="indent">Defined XHTML 1.0 Integration Set conformance; removed schema pending work on XHTML modularization with W3C. (psa)
    </div>
<h4>Version 0.10 (2003-11-25)</h4>
<div class="indent">Cleaned up the schema; added W3C considerations. (psa)
    </div>
<h4>Version 0.9 (2003-09-30)</h4>
<div class="indent">Changed status to Deferred pending discussion with the W3C regarding XHTML modularization. (psa)
    </div>
<h4>Version 0.8 (2003-09-16)</h4>
<div class="indent">Changed MUST to SHOULD for support of the Style Attribute Module; clarified relationship of XHTML-IM schema to XHTML schema; slight text cleanup. (psa)
    </div>
<h4>Version 0.7 (2003-08-19)</h4>
<div class="indent">Added the &lt;code/&gt; element. (psa)
    </div>
<h4>Version 0.6 (2003-06-24)</h4>
<div class="indent">Made image support recommended (not mandatory); removed references to conversation threads; fixed some issues in the schema; made small editorial changes throughout. (psa)
    </div>
<h4>Version 0.5 (2003-04-29)</h4>
<div class="indent">Fixed the schema, made several small editorial changes. (psa)
    </div>
<h4>Version 0.4 (2003-02-20)</h4>
<div class="indent">Brought back several content-based elements; added preliminary schema. (psa)
    </div>
<h4>Version 0.3 (2003-02-19)</h4>
<div class="indent">Defined the attributes and style properties required by this document. (psa)
    </div>
<h4>Version 0.2 (2003-02-17)</h4>
<div class="indent">Described the requirements more fully; added additional restrictions above and beyond the standard XHTML 1.0 Modules; added disco examples. (psa)
    </div>
<h4>Version 0.1 (2003-02-16)</h4>
<div class="indent">Initial version. (psa)
    </div>
</div>
<p><hr></p>
<p>END</p>
</body>
</html>
